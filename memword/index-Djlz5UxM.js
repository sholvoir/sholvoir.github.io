import{$ as e,A as t,B as n,C as r,D as i,E as a,F as o,G as s,H as c,I as l,J as u,K as d,L as ee,M as f,S as p,V as m,W as h,X as g,Y as _,Z as te,_ as v,a1 as y,a2 as ne,a3 as re,a4 as b,a5 as ie,a6 as x,a7 as S,a9 as C,aa as w,ab as T,ac as E,ad as ae,ae as D,af as O,ag as k,ah as A,ai as j,aj as M,ak as N,al as P,am as F,an as I,ao as L,ap as oe,b as se,c as R,d as z,e as B,f as ce,g as V,h as H,i as U,j as le,k as W,l as ue,m as G,n as K,o as q,p as J,q as de,r as fe,s as pe,t as Y,u as X,v as me,w as he,x as ge,y as _e,z as ve}from"./input-text-DHiF8Tke.js";var ye=k(`<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 128 128"><g><circle cx=16 cy=64 r=16 fill=#000000></circle><circle cx=16 cy=64 r=16 fill=#555555 transform=rotate(45,64,64)></circle><circle cx=16 cy=64 r=16 fill=#949494 transform=rotate(90,64,64)></circle><circle cx=16 cy=64 r=16 fill=#cccccc transform=rotate(135,64,64)></circle><circle cx=16 cy=64 r=16 fill=#e1e1e1 transform=rotate(180,64,64)></circle><circle cx=16 cy=64 r=16 fill=#e1e1e1 transform=rotate(225,64,64)></circle><circle cx=16 cy=64 r=16 fill=#e1e1e1 transform=rotate(270,64,64)></circle><circle cx=16 cy=64 r=16 fill=#e1e1e1 transform=rotate(315,64,64)></circle><animateTransform attributeName=transform type=rotate values="45 64 64;90 64 64;135 64 64;180 64 64;225 64 64;270 64 64;315 64 64;0 64 64;"calcMode=discrete dur=720ms repeatCount=indefinite>`),be=e=>(()=>{var t=ye();return O(t,e,!0,!0),t})(),xe=k(`<div class="title shrink-0 px-2 flex justify-between items-center font-bold"><div class="w-7 [app-region:no-drag]"></div><div class="grow font-bold text-center [app-region:drag]"></div><div class="w-7 [app-region:no-drag]">`),Se=k(`<div class="absolute inset-0 bg-[var(--bg-half)] flex justify-center content-center flex-wrap">`),Ce=k(`<div>`),Z=({title:e,children:t,leftElem:n,rightElem:r,class:i,onBackClick:a,...o})=>[(()=>{var t=xe(),i=t.firstChild,o=i.nextSibling,s=o.nextSibling;return T(i,n??(a&&N(B,{onClick:a,class:`w-full h-7 icon-[material-symbols--chevron-left]`}))),T(o,()=>pe[0]()||e),T(s,r??!1),t})(),(()=>{var e=Ce();return C(e,`body relative grow h-0 ${i??``}`),O(e,o,!1,!0),T(e,t,null),T(e,N(M,{get when(){return K[0]()},get children(){var e=Se();return T(e,N(be,{class:`w-16 h-16`})),e}}),null),e})()],we=k(`<div class=text-left>`),Te=k(`<div class="relative bg-[var(--bg-title)] h-6 py-1 w-full hover:cursor-pointer"><div class="my-auto h-4 bg-slate-400"><div class="ml-auto h-full bg-orange-500"></div></div><div class="absolute top-0 right-1">|`),Ee=k(`<div class="grow min-w-80 grid gap-x-1 grid-cols-[max-content_1fr] items-center"><div class="col-span-2 text-center font-bold"><button type=button class="hover:cursor-pointer hover:underline">`);const De=(e,t)=>e+t,Oe=(e,t)=>e>t?e:t;var ke=({stat:e})=>{let t=x(e.total),n=x(e.task),r=t.reduce(Oe)*1.2,i=e.total.reduce(De),a=e.task.reduce(De),o=e.wlid?y(e.wlid)[1]:``,s=`${e.disc??o} - ${a}|${i}`,c=e=>{let i=t[e],a=n[e];return[(()=>{var t=we();return T(t,()=>ie[e]),t})(),(()=>{var e=Te(),t=e.firstChild,n=t.firstChild,o=t.nextSibling,s=o.firstChild;return`${r?i*100/r:100}%`==null?t.style.removeProperty(`width`):t.style.setProperty(`width`,`${r?i*100/r:100}%`),`${i?a*100/i:0}%`==null?n.style.removeProperty(`width`):n.style.setProperty(`width`,`${i?a*100/i:0}%`),T(o,a,s),T(o,i,null),e})()]};return(()=>{var t=Ee(),n=t.firstChild,r=n.firstChild;return r.$$click=()=>de(e.wlid),T(r,s),T(t,()=>[0,1,2,3,4,5].map(c),null),t})()};w([`click`]);var Ae=k(`<div class="body grow overflow-y-auto"><div class="p-2 flex flex-wrap justify-between gap-4">`),je=k(`<span class=icon-[material-symbols--dictionary]>`),Me=k(`<span class=icon-[hugeicons--online-learning-01]>`),Ne=k(`<span class=icon-[material-symbols--settings]>`),Pe=k(`<span class=icon-[tabler--info-octagon]>`),Fe=k(`<span class=icon-[material-symbols--error-outline]>`),Ie=k(`<span class=icon-[material-symbols--help-outline]>`),Le=k(`<div class="tail shrink-0 px-4 pt-2 pb-5 flex gap-3 justify-between [&amp;>button]:grow [&amp;>button>span]:align-[-30%] [&amp;>button]:min-w-[110px] [&amp;>button>span]:text-4xl font-bold overflow-x-auto [scrollbar-width:none]">`),Re=()=>N(Z,{class:`flex flex-col`,title:`学习进度`,get children(){return[(()=>{var e=Ae(),t=e.firstChild;return T(t,N(j,{get each(){return fe[0]().stats},children:e=>N(ke,{stat:e})})),e})(),(()=>{var e=Le();return T(e,N(z,{onClick:()=>U(`#search`),get children(){return[je(),` 词典`]}}),null),T(e,N(z,{onClick:()=>de(),get children(){return[Me(),` 学习`]}}),null),T(e,N(z,{onClick:()=>U(`#setting`),get children(){return[Ne(),` 设置`]}}),null),T(e,N(z,{onClick:()=>U(`#about`),get children(){return[Pe(),` 关于`]}}),null),T(e,N(z,{onClick:()=>U(`#issue`),get children(){return[Fe(),` 问题`]}}),null),T(e,N(z,{onClick:()=>U(`#help`),get children(){return[Ie(),` 帮助`]}}),null),e})()]}}),ze=k(`<ol class="list-decimal py-2 pr-2 pl-8 [&amp;>li]:mx-2 overflow-y-auto"><li>如何使用本软件？<br>答：点击「学习」，开始学习即可；在学习界面， (1)当练习听力时，会先播放一小段声音，没有听清可以点击<div class="w-6 h-6 inline-block">&#8227;</div>或按下「B或C」快捷键或触摸屏幕的上半部分进行重听， (2)当练习阅读时，会先显示一个单词； 然后在心里默想一个概念（意思），点击「答」或按下「空格键」或触摸屏幕下半区域，显示单词的音标和解释， 并同时显示一个与该词相关的背景图片，检查是否和自己默想的答案一致，如果一致，点击「知」或按下「N或X」快捷键或向上滑动屏幕， 否则点击「不」或按下「M或Z」快捷键或向下滑动屏幕。记住，要快速完成，不要在一个词上长时间停留，那样只会降低效率， 我们的方法是快速/多次，从记忆效率来讲，次数的作用远远大于时长。这个方法称为大脑按摩，直接在拼写/声音和概念之间建立反射弧， 所以不要犹豫，快速完成一个小冲刺。</li><li>我应该学习哪些词汇？<br>答：我们的目标是在未来能够自由使用英语，应该先学重要的词汇，因为20%的英语词汇表达了80%的意思， 抓住少数基本词，将能够快速提高英语水平。本软件提供多本词书供您选择，以适应您当下的需求。但不要太多关注词书， 一个常用词通常会出现在多本词书中，不必介意它到底从哪里来。也可以不选择词书，直接基于词典 （本词典收录25000多条常用词，不在词典中的词，对于学生而言，可以不必记忆了），在词典中查到自己在生活中遇到， 但不会的词，直接开始学它，背它，终有一日，你再也遇不到生词的时候，你就已经功法大成了。</li><li>我该如何复习？<br>答：完全不必操心这个事情，让系统决定，系统自动根据「艾宾浩斯」遗忘曲线来决定此时的最佳复习内容， 你要做的事是每天利用碎片时间，拿出手机，开始「学习」。</li><li class="[&amp;>span]:align-[-20%]">界面上的按钮是什么意思？<br><span class="text-[150%] icon-[material-symbols--check-circle] iconify text-green-500"></span>: 我认识这个词；<br><span class="text-[150%] icon-[gridicons--cross-circle] iconify text-fuchsia-500"></span>: 我不认识这个词；<br><span class="text-[150%] icon-[material-symbols--volume-up] iconify text-blue-500"></span>: 再播一遍声音；<br><span class="text-[150%] icon-[material-symbols--family-star] iconify text-yellow-500"></span>: 这个词我已经掌握，直接标记为「已完成」；<br><span class="text-[150%] icon-[material-symbols--error] iconify text-red-500"></span>: 这个词的翻译/声音/音标，有问题/错误，请人工处理。<br><span class="text-[150%] icon-[material-symbols--refresh] iconify text-purple-500"></span>: 忽略本地词典缓冲，从服务器重新下载这个词的翻译/声音/音标。</li><li>关于「学习词书」<br>答：学习词书将一本词书的全部词添加进我的学习任务。但我们通常并不会直接开始学这些新词，而是优先复习旧词， 掌握巩固一个旧词比学习一批新词更重要，这些新加的任务将会成为优先级最低的任务。</li><li>关于登录和多设备<br>答：⓵软件设计为免密模式（不需要密码），在一个设备上只要用电子邮件验证身份之后，就再也不需要密码了，打开软件立即可以开始学习。<br>⓶在第二台设备上登录时，系统将自动同步学习记录和设置，你完全可以同时在电脑和手机上学习。</li><li>以后有AI翻译了，我还用得着学英语吗？<br>答：AI或者任意翻译工具甚至包括人工翻译，都只能解决浅表问题，因为一门语言是无法准确表达另一门语言的含义的， 一门语言的背后代表着文化和思维模式，这些深层次的东西是任何翻译都无法解决的。如果你有计划去英语文华圈生活/学习/工作， 那你必需亲自用人脑学好它，仅仅翻译工具是不够的。`),Be=()=>N(Z,{class:`flex flex-col pb-4`,title:`帮助`,onBackClick:()=>U(),get children(){return ze()}}),Ve=k(`<input>`),Q=({binding:e,...t})=>(()=>{var n=Ve();return O(n,oe(t,{get value(){return e[0]()},onInput:t=>e[1](t.currentTarget.value)}),!1,!1),n})(),He=k(`<div><h1>快乐背单词</h1><p>版本：`),Ue=k(`<div><h1>语言基础</h1><p>词汇是<b>语言的基础</b>，学习语言应该掌握一定数量的基础词汇。`),We=k(`<div><h1>高频词汇</h1><p>每个词汇的重要程度是不一样的，越是使用<b>频率高的词汇</b>，其重要程度越高，本工具提供多种词频工具统计的结果词书。`),Ge=k(`<div><h1>遗忘曲线</h1><p>记忆最大的敌人是遗忘，本工具依据「艾宾浩斯」<b>遗忘曲线</b>设计大脑刺激频率，以最大化记忆效率。`),Ke=k(`<div><h1>碎片时间</h1><p>现代人工作学习都非常忙碌，充分利用好<b>碎片时间</b>，是成功的关键。`),qe=k(`<div><h1>开始学习</h1><p>使用你的手机，单击<!>开始免费学习吧。`),Je=k(`<div><h1>微信</h1><p>*提示一：请使用<b>除微信以外</b>的其他浏览器，如果当前是在微信中，点击屏幕右上(...)，然后选择「在默认浏览器中打开」。`),Ye=k(`<div><h1>桌面</h1><p>*提示二(iOS): 请使用「共享」-「添加到主屏幕」安装 <b>Web应用</b> 到桌面，以便下次直接<!>进入。</p><p>*提示三(Android): 请使用「...」-「安装应用」安装 <b>Web应用</b> 到桌面，以便下次直接点击进入。`),Xe=()=>{let[e,t]=L(!1),[n,r]=L(``);return N(Z,{title:`快乐背单词`,class:`about flex flex-col pb-4 font-extrabold overflow-y-auto`,get onBackClick(){return X[0]()?()=>U(`#home`):void 0},get children(){return[N(M,{get when(){return e()},get children(){return[N(Q,{binding:[n,r]}),N(B,{class:`button btn-normal`,onClick:()=>_(`_auth`,n()),children:`OK`})]}}),(()=>{var e=He(),t=e.firstChild,n=t.nextSibling;return n.firstChild,T(n,re,null),e})(),Ue(),We(),Ge(),Ke(),(()=>{var e=qe(),t=e.firstChild,n=t.nextSibling,r=n.firstChild,i=r.nextSibling;return i.nextSibling,T(n,N(z,{class:`button bg-orange-300 text-slate-800`,title:`login`,onClick:()=>U(`#signup`),children:`登录`}),i),e})(),Je(),(()=>{var e=Ye(),n=e.firstChild,r=n.nextSibling,i=r.firstChild,a=i.nextSibling,o=a.nextSibling,s=o.nextSibling;return s.nextSibling,T(r,N(B,{onClick:()=>t(!0),children:`点击`}),s),e})()]}})},Ze=k(`<textarea>`),Qe=({binding:e,...t})=>(()=>{var n=Ze();return O(n,oe(t,{get value(){return e[0]()},onInput:t=>e[1](t.currentTarget.value)}),!1,!1),n})(),$e=k(`<label>请在这里描述你的问题:`),et=k(`<div class="flex gap-2 mt-2 pb-3 justify-end">`),tt=()=>{let[e,t]=L(``),n=async()=>{await l(e()),q(`提交成功!`),U()};return N(Z,{class:`p-2 flex flex-col`,title:`提交问题`,get children(){return[$e(),N(Qe,{name:`issue`,class:`grow`,binding:[e,t],get children(){return e()}}),(()=>{var e=et();return T(e,N(z,{class:`w-24 button btn-normal`,onClick:()=>U(),children:`取消`}),null),T(e,N(z,{class:`w-24 button btn-prime`,onClick:n,children:`提交`}),null),e})()]}})},nt=k(`<fieldset class="border rounded shrink-0 overflow-y-auto px-2"><legend>我的词书`),rt=k(`<div class="flex justify-between gap-2">`),it=k(`<div class="flex gap-2"><label for=filter>设置过滤`),at=k(`<fieldset class="border rounded max-h-[70%] grow shrink overflow-y-auto px-2"><legend>可用的词书`),ot=k(`<fieldset class="border rounded shrink-0 overflow-y-auto px-2"><legend>我订阅的词书`),st=k(`<div class="pb-3 flex justify-between gap-2">`),ct=()=>{let t=L([]),n=L(0),r=L([]),i=L(0),a=L([]),o=L(0),c=L(`^common`),l=()=>{V[1](void 0),U(`#book`)},d=()=>{V[1](t[0]()[n[0]()]),U(`#book`)},ee=async()=>{let e=await ge(t[0]()[n[0]()].bid);q(e?`删除成功`:`删除失败`),e&&t[1](t[0]().filter((e,t)=>t!=n[0]()))},f=()=>{r[1]([...r[0](),a[0]()[o[0]()]])},p=()=>{r[1]([...r[0]().slice(0,i[0]()),...r[0]().slice(i[0]()+1)])},m=async()=>{K[1](!0),await he(r[0]()[i[0]()].bid),await Y(),K[1](!1)},_=async()=>{await u({format:ne,version:v(),books:r[0]().map(e=>e.bid)}),await Y(),U()},te=()=>{X[1](``),U(`#about`),h()};return I(c[0],async t=>{let n=new RegExp(t);a[1]((await g(e=>n.test(e.bid)||e.disc&&n.test(e.disc))).sort(e))}),I(async()=>{a[1]((await g(e=>e.bid.startsWith(`common`))).sort(e)),r[1](await g(e=>s.books.includes(e.bid))),t[1](await g(e=>e.bid.startsWith(X[0]())))}),N(Z,{class:`p-2 gap-2 flex flex-col`,title:`设置`,get children(){return[(()=>{var e=nt();return e.firstChild,T(e,N(R,{cindex:n,get options(){return t[0]},func:e=>e.disc??e.bid,class:`px-2`,activeClass:`bg-[var(--bg-title)]`}),null),e})(),(()=>{var e=rt();return T(e,N(z,{class:`button btn-normal grow`,name:`new`,onClick:l,children:`新建`}),null),T(e,N(z,{class:`button btn-normal grow`,name:`delete`,get disabled(){return!t[0]().length},onClick:ee,children:`删除`}),null),T(e,N(z,{class:`button btn-normal grow`,name:`update`,get disabled(){return!t[0]().length},onClick:d,children:`更新`}),null),e})(),(()=>{var e=it();return e.firstChild,T(e,N(Q,{class:`grow`,name:`filter`,binding:c}),null),e})(),(()=>{var e=at();return e.firstChild,T(e,N(R,{class:`px-2`,cindex:o,get options(){return a[0]},func:e=>e.disc??e.bid,activeClass:`bg-[var(--bg-title)]`}),null),e})(),(()=>{var e=rt();return T(e,N(z,{class:`button btn-normal grow`,onClick:f,children:`添加订阅`}),null),T(e,N(z,{class:`button btn-normal grow`,onClick:p,children:`删除订阅`}),null),e})(),(()=>{var e=ot();return e.firstChild,T(e,N(R,{class:`px-2`,cindex:i,get options(){return r[0]},func:e=>e.disc??e.bid,activeClass:`bg-[var(--bg-title)]`}),null),e})(),(()=>{var e=st();return T(e,N(z,{class:`button btn-normal grow`,onClick:m,children:`添加任务`}),null),T(e,N(z,{class:`button btn-normal grow`,onClick:()=>U(),children:`取消`}),null),T(e,N(z,{class:`button btn-prime grow`,onClick:_,children:`保存`}),null),T(e,N(z,{class:`button btn-normal grow`,onClick:te,children:`登出`}),null),e})()]}})},lt=()=>{let e=L(``),t=async()=>{let t=e[0]().trim();if(!t)return;let n=await o(t);if(!n)return q(`Not Found!`);H[1](n),W[1](!0),J[1](-1),U(`#study`)};return N(Z,{class:`flex flex-col text-lg`,title:`词典`,onBackClick:()=>U(),get children(){return N(se,{autoCapitalize:`none`,type:`search`,name:`word`,placeholder:`word`,class:`m-2 w-[calc(100%-16px)]`,binding:e,onChange:t,options:me})}})};const ut=e=>new Promise(t=>setTimeout(t,e));var dt=k(`<header class="flex gap-2">`),ft=k(`<section>`),pt=k(`<div>`),mt=({class:e,cindex:t,children:n})=>{let r=Array.isArray(n)?n:[n],i=(e,n)=>{n.stopPropagation(),t[1](e)};return N(M,{get when(){return r.length},get children(){return[(()=>{var n=dt();return T(n,N(j,{each:r,children:(n,r)=>(()=>{var a=pt();return a.$$click=i,a.$$clickData=r,T(a,()=>n.title??r),F(()=>C(a,`min-w-16 px-2 py-1 cursor-pointer text-center rounded-t-md ${t[0]()==r()?e??``:``}`)),a})()})),n})(),(()=>{var n=ft();return C(n,`grow p-2 ${e??``}`),T(n,()=>r[t[0]()]),n})()]}})};w([`click`]);var ht=k(`<p class="text-xl font-bold text-[var(--accent-color)]">`),gt=k(`<span class=text-lg>`),_t=k(`<span>&ensp;`),vt=k(`<span class="text-xl font-bold">`),yt=k(`<p><span>&ensp;-&ensp;`),bt=({entry:e})=>N(j,{get each(){return Object.entries(e.meanings)},children:([e,t])=>[N(M,{when:e,get children(){var t=ht();return T(t,e),t}}),N(j,{each:t,children:e=>(()=>{var t=yt();return t.firstChild,T(t,N(M,{get when(){return e.def},get children(){var t=gt();return T(t,()=>e.def),t}}),null),T(t,N(M,{get when(){return e.def&&e.trans},get children(){return _t()}}),null),T(t,N(M,{get when(){return e.trans},get children(){var t=vt();return T(t,()=>e.trans),t}}),null),t})()})]}),xt=k(`<div class="menu absolute top-[100%] right-[36px] text-lg text-right bg-[var(--bg-body)] z-1">`),St=k(`<div class="relative flex gap-4 text-[150%] justify-between items-end"><div class=text-lg>`),Ct=k(`<div class="relative grow h-0 pb-4 flex flex-col overflow-y-auto"><div class="py-2 flex gap-2 flex-wrap justify-between"><div class="text-4xl font-bold"></div></div><audio autoplay>`),wt=k(`<div>`),Tt=k(`<menu>`),Et=k(`<div class="text-2xl flex items-center">`),Dt=k(`<div class=grow>`),Ot=()=>{let e=async()=>{U(J[0]()<0?`#search`:void 0),await Y(),await d(),Y()},n,r=L(0),i={startY:0,endY:0,cScrollTop:0,moveTop:0},a=L([]),o=L(!1),s,c=async e=>{H[0]()&&await te(H[0]().word,e)},u=async()=>{if(J[0]()<0)return e();J[1](e=>e+1),H[1](void 0),W[1](!1);let n=await t(ce[0]());if(!n)return e();H[1](n),r[1](0)},p=async(e,t)=>{let r=Math.abs(i.moveTop+=e);n.style.top=`${i.moveTop}px`,r<t&&(await ut(30),await p(e,t))},m=async()=>{q(`Get Server Data...`,!1);let e=await ee(H[0]());le(),H[1]({...e})},h=async()=>{q(`Submiting...`,!1),await l(H[0]().word),q(`Submit Success!`)},_=async()=>{q(await _e(H[0]().word)?`删除成功`:`删除失败`),await u()},v=e=>{if(e.stopPropagation(),!(e.ctrlKey||e.altKey))switch(e.key){case` `:S(e);break;case`N`:case`X`:case`n`:case`x`:W[0]()&&c().then(u);break;case`M`:case`Z`:case`m`:case`z`:W[0]()&&c(0).then(u);break}},ne=e=>{e.stopPropagation(),e.preventDefault(),W[0]()&&(i.endY=i.startY=e.touches[0].clientY,i.cScrollTop=e.currentTarget.scrollTop)},re=e=>{if(e.stopPropagation(),e.preventDefault(),!W[0]())return;let t=(i.endY=e.touches[0].clientY)-i.startY,r=e.currentTarget;if(console.log(`diff`,i.endY,i.startY,t),t<0){let e=r.scrollHeight-r.clientHeight;i.cScrollTop-t<e?r.scrollTop=i.cScrollTop-t:(r.scrollTop=e,i.moveTop=e-(i.cScrollTop-t))}else i.cScrollTop-t>0?r.scrollTop=i.cScrollTop-t:(r.scrollTop=0,i.moveTop=t-i.cScrollTop);n.style.top=`${i.moveTop}px`,console.log(r.scrollTop,i.moveTop)},ie=e=>{e.stopPropagation(),e.preventDefault(),W[0]()&&(i.moveTop=0,i.cScrollTop=e.currentTarget.scrollTop,n.style.top=`${i.moveTop}px`)},x=async e=>{if(e.stopPropagation(),e.preventDefault(),!W[0]())return i.moveTop=0,i.cScrollTop=e.currentTarget.scrollTop,n.style.top=`${i.moveTop}px`,S();let t=e.currentTarget.scrollHeight+60,r=Math.max(globalThis.innerHeight,t);Math.abs(i.moveTop)>=globalThis.innerHeight/6?(i.moveTop>0?(await c(0),await p(60,r)):(await c(),await p(-60,r)),await u()):Math.abs(i.moveTop)<5&&S(),i.moveTop=0,n.style.top=`${i.moveTop}px`},S=e=>{if(e?.stopPropagation(),o[0]())return o[1](!1);let t=H[0]()?.entries?.length??0;t!==0&&(W[0]()?t===1?s.play():r[0]()<t-1?r[1](e=>e+1):r[1](0):(W[1](!0),s.play()))},C=async e=>{o[1](!1);let t=H[0]().word,n=(await ve(e.bid))?.content;if(n?.has(t))return q(`已包含`);let[r,i]=y(e.bid),[a]=await f(i,t);q(a==b.OK?`添加成功`:`添加失败`),n?.add(H[0]().word)};return I(async()=>{a[1](await g(e=>e.bid.startsWith(X[0]())))}),N(Z,{onBackClick:e,onKeyUp:v,tabIndex:-1,class:`flex flex-col p-2 outline-none`,get title(){return`学习${J[0]()>0?`(${J[0]()})`:``}`},get children(){return N(M,{get when(){return H[0]()},get children(){return[(()=>{var e=St(),t=e.firstChild;return T(e,N(B,{onClick:()=>c().then(u),title:`X/N`,class:`iconify icon-[material-symbols--check-circle] text-green-500`}),t),T(e,N(B,{onClick:()=>c(0).then(u),title:`Z/M`,class:`iconify icon-[mdi--cross-circle] text-fuchsia-500`}),t),T(e,N(B,{onClick:()=>c(13).then(u),class:`iconify icon-[material-symbols--family-star] text-yellow-500`}),t),T(e,N(B,{onClick:_,class:`iconify icon-[material-symbols--delete-outline] text-orange-500`}),t),T(e,N(B,{onClick:()=>s.play(),class:`iconify icon-[material-symbols--volume-up] text-blue-500`}),t),T(e,N(B,{onClick:h,class:`iconify icon-[material-symbols--error] text-red-500`}),t),T(e,N(B,{onClick:m,class:`iconify icon-[material-symbols--refresh] text-purple-500`}),t),T(e,N(B,{onClick:()=>o[1](e=>!e),class:`iconify icon-[material-symbols--dictionary-outline] text-cyan-500`}),t),T(t,()=>H[0]()?.level),T(e,N(M,{get when(){return o[0]()},get children(){var e=xt();return T(e,N(j,{get each(){return a[0]()},children:e=>[wt(),(()=>{var t=Tt();return t.$$click=()=>C(e),T(t,()=>e.disc??e.bid),t})()]}),null),T(e,(()=>{var e=E(()=>!!a[0]().length);return()=>e()&&wt()})(),null),e}}),null),e})(),(()=>{var e=Ct(),t=e.firstChild,i=t.firstChild,a=t.nextSibling;e.addEventListener(`touchcancel`,ie),e.$$touchend=x,e.$$touchmove=re,e.$$touchstart=ne,e.$$click=S;var o=n;typeof o==`function`?A(o,e):n=e,T(i,()=>H[0]()?.word),T(t,(()=>{var e=E(()=>!!W[0]());return()=>e()&&(()=>{var e=Et();return T(e,()=>H[0]()?.entries?.[r[0]()].phonetic),e})()})(),null),T(e,N(M,{get when(){return W[0]()},get children(){return N(M,{get when(){return(H[0]()?.entries?.length??0)>1},get fallback(){return(()=>{var e=Dt();return T(e,N(bt,{get entry(){return H[0]()?.entries?.[0]}})),e})()},get children(){return N(mt,{class:`bg-[var(--bg-tab)]`,cindex:r,get children(){return N(j,{get each(){return H[0]()?.entries},children:e=>N(bt,{entry:e})})}})}})}}),a);var c=s;return typeof c==`function`?A(c,a):s=a,F(()=>D(a,`src`,H[0]()?.entries?.at(r[0]())?.sound??``)),e})()]}})}})};w([`click`,`touchstart`,`touchmove`,`touchend`]);var kt=k(`<div class="w-64 m-auto flex flex-col pb-4"><label>用户名</label><label>手机号码(含国际区号)</label><div class="text-right mb-3">已经注册，请`);const At=/^[_\w-]+$/,jt=/^\+\d+$/;var Mt=()=>{let e=L(``),t=()=>{U(`#signin`)},n=async()=>{if(!At.test(G[0]()))return q(`Name can only include _, letter, number and -`);let t=e[0]().replaceAll(/[\(\) -]/g,``);if(!jt.test(t))return q(`Invalid phone number!`);try{switch((await m(t,G[0]())).status){case b.BadRequest:return q(`用户名已注册`);case b.Conflict:return q(`电话号码已注册`);case b.OK:return q(`注册成功，请登录`),U(`#signin`);default:q(`未知数服务器错误`)}}catch{q(`网络错误`)}};return N(Z,{class:`p-2 flex flex-col`,title:`注册`,onBackClick:()=>U(),get children(){var r=kt(),i=r.firstChild,a=i.nextSibling,o=a.nextSibling;return o.firstChild,T(r,N(Q,{name:`name`,placeholder:`name`,autoCapitalize:`none`,binding:G,class:`mb-3`}),a),T(r,N(Q,{name:`phone`,placeholder:`+1(987)765-5432`,autoCapitalize:`none`,binding:e,class:`mb-3`}),o),T(o,N(z,{class:`button btn-normal mx-1`,onClick:t,children:`登录`}),null),T(r,N(z,{class:`button btn-prime py-1`,onClick:n,children:`注册`}),null),r}})},Nt=k(`<div class="w-64 m-auto flex flex-col"><label for=name>用户名</label><label for=code>临时密码`);let $;var Pt=()=>{let[e,t]=L(``),[n,r]=L(0),[i,a]=L(!0),o=async()=>{a(!1),r(60),$=setInterval(()=>{r(e=>e-1)<=0&&(clearInterval($),$=void 0,a(!0))},1e3);try{switch((await p(G[0]())).status){case b.BadRequest:return q(`请输入用户名`);case b.NotFound:return q(`未找到用户`);case b.FailedDependency:return q(`此用户未注册手机号码`);case b.TooEarly:return q(`请求OTP过于频繁`);case b.OK:return q(`OTP已发送`);default:q(`未知服务器错误`)}}catch{q(`网络错误`)}},s=async()=>{try{switch(await c(G[0](),e())){case b.BadRequest:return q(`请输入用户名和密码`);case b.NotFound:return q(`未找到用户`);case b.Unauthorized:return q(`错误的密码`);case b.OK:q(`已登录`),$&&clearInterval($),location.reload();break;default:q(`未知服务器错误`)}}catch{q(`网络错误`)}};return N(Z,{class:`p-2 flex flex-col`,title:`登录`,onBackClick:()=>U(),get children(){var r=Nt(),a=r.firstChild,c=a.nextSibling;return T(r,N(Q,{name:`name`,class:`mb-3`,placeholder:`name`,autoCapitalize:`none`,binding:G}),c),T(r,N(Q,{name:`code`,placeholder:`code`,autoCapitalize:`none`,binding:[e,t]}),null),T(r,N(B,{class:`btn-anchor block text-right mb-3`,onClick:o,get disabled(){return!i()},get children(){return[`Send One-Time Passcode `,E(()=>E(()=>n()>0)()?`(${n()})`:``)]}}),null),T(r,N(z,{class:`button btn-prime`,onClick:s,children:`登录`}),null),r}})},Ft=k(`<div><span>`),It=({label:e,binding:t,disabled:n,class:r,onChange:i,...a})=>{let o=e=>{e.stopPropagation(),n||(t[1](e=>!e),i&&(typeof i==`function`?i(e):i[0](i[1],e)))};return(()=>{var i=Ft(),s=i.firstChild;return i.$$click=o,C(i,`${n?`opacity-50`:``} ${r??``}`),D(i,`aria-disabled`,n),O(i,a,!1,!0),T(i,e,null),F(()=>C(s,`text-[150%] ${t[0]()?`icon-[material-symbols--check-box-outline]`:`icon-[material-symbols--check-box-outline-blank]`}`)),i})()};w([`click`]);var Lt=k(`<label for=name>名称`),Rt=k(`<label for=disc class=mt-2>描述`),zt=k(`<label for=words class=mt-2>词表`),Bt=k(`<div class="flex gap-2 my-2"><div class=grow>`),Vt=k(`<label for=replace class="text-red-500 mt-2">请考虑用下面的词替换`),Ht=k(`<textarea name=replace class=grow>`),Ut=()=>{let e=L(``),t=L(``),n=L(``),r=L(!1),i=L(``),a=async()=>{let t=`${X[0]()}/${e}`,r=await ve(t);r?.content&&n[1](Array.from(r.content).sort().join(`
`))},o=async()=>{e[1](e[0]().replaceAll(`/`,`-`));try{let[a,o]=await f(e[0](),n[0](),t[0](),r[0]());switch(a){case b.BadRequest:return q(`Error: 无名称或无内容`);case b.NotAcceptable:return i[1](Object.entries(o).map(([e,t])=>`${e}: ${t.join(`,`)}`).join(`
`)),q(`未通过拼写检查`);case b.OK:q(`词书上传成功`),U(`#setting`)}}catch{q(`网络错误`)}};return P(()=>{V[0]()&&(e[1](y(V[0]().bid)[1]),V[0]().disc&&t[1](V[0]().disc))},[]),N(Z,{class:`flex flex-col p-2`,title:`上传我的词书`,get children(){return[Lt(),N(Q,{name:`name`,binding:e}),Rt(),N(Q,{name:`disc`,binding:t}),zt(),N(Qe,{name:`words`,class:`grow`,binding:n}),E(()=>E(()=>!!i[0]().length)()?[Vt(),(()=>{var e=Ht();return e.addEventListener(`change`,e=>i[1](e.currentTarget.value)),F(()=>e.value=i[0]()),e})()]:void 0),(()=>{var e=Bt(),t=e.firstChild;return T(e,N(It,{binding:r,label:`Replace`}),t),T(e,N(z,{class:`w-24 button btn-normal`,onClick:()=>U(`#setting`),children:`取消`}),null),T(e,N(z,{class:`w-24 button btn-normal`,onClick:a,children:`下载`}),null),T(e,N(z,{class:`w-24 button btn-prime`,onClick:o,children:`上传`}),null),e})()]}})},Wt=()=>{let e=new Map;e.set(`#home`,Re),e.set(`#help`,Be),e.set(`#about`,Xe),e.set(`#issue`,tt),e.set(`#setting`,ct),e.set(`#search`,lt),e.set(`#study`,Ot),e.set(`#signup`,Mt),e.set(`#signin`,Pt),e.set(`#book`,Ut);let t=async()=>{X[1](await r()??``)?(U(`#home`),await a(),await Y(),(async()=>{await n(),me[1](await i()??[]),await u(),await d(),await Y()})()):U(`#about`)};return P(()=>{t()}),N(S,{get component(){return e.get(ue[0]())}})};ae(()=>N(Wt,{}),document.getElementById(`root`));