import{E as e,k as t,l as n,t as r,u as i,x as a}from"./jsxRuntime.module-D4PVurzm.js";var o,s,c,l,u=0,ee=[],d=n,te=d.__b,ne=d.__r,re=d.diffed,ie=d.__c,f=d.unmount,ae=d.__;function oe(e,t){d.__h&&d.__h(s,e,u||t),u=0;var n=s.__H||={__:[],__h:[]};return e>=n.__.length&&n.__.push({}),n.__[e]}function p(e,t){var n=oe(o++,3);!d.__s&&me(n.__H,t)&&(n.__=e,n.u=t,s.__H.__h.push(n))}function se(e){return u=5,ce(function(){return{current:e}},[])}function ce(e,t){var n=oe(o++,7);return me(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function le(){for(var e;e=ee.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(fe),e.__H.__h.forEach(pe),e.__H.__h=[]}catch(t){e.__H.__h=[],d.__e(t,e.__v)}}d.__b=function(e){s=null,te&&te(e)},d.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ae&&ae(e,t)},d.__r=function(e){ne&&ne(e),o=0;var t=(s=e.__c).__H;t&&(c===s?(t.__h=[],s.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(fe),t.__h.forEach(pe),t.__h=[],o=0)),c=s},d.diffed=function(e){re&&re(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(ee.push(t)!==1&&l===d.requestAnimationFrame||((l=d.requestAnimationFrame)||de)(le)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),c=s=null},d.__c=function(e,t){t.some(function(e){try{e.__h.forEach(fe),e.__h=e.__h.filter(function(e){return!e.__||pe(e)})}catch(n){t.some(function(e){e.__h&&=[]}),t=[],d.__e(n,e.__v)}}),ie&&ie(e,t)},d.unmount=function(e){f&&f(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{fe(e)}catch(e){t=e}}),n.__H=void 0,t&&d.__e(t,n.__v))};var ue=typeof requestAnimationFrame==`function`;function de(e){var t,n=function(){clearTimeout(r),ue&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);ue&&(t=requestAnimationFrame(n))}function fe(e){var t=s,n=e.__c;typeof n==`function`&&(e.__c=void 0,n()),s=t}function pe(e){var t=s;e.__c=e.__(),s=t}function me(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}var he=Symbol.for(`preact-signals`);function ge(){if(g>1)g--;else{for(var e,t=!1;h!==void 0;){var n=h;for(h=void 0,ye++;n!==void 0;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&Se(n))try{n.c()}catch(n){t||(e=n,t=!0)}n=r}}if(ye=0,g--,t)throw e}}function _e(e){if(g>0)return e();g++;try{return e()}finally{ge()}}var m=void 0;function ve(e){var t=m;m=void 0;try{return e()}finally{m=t}}var h=void 0,g=0,ye=0,be=0;function xe(e){if(m!==void 0){var t=e.n;if(t===void 0||t.t!==m)return t={i:0,S:e,p:m.s,n:void 0,t:m,e:void 0,x:void 0,r:t},m.s!==void 0&&(m.s.n=t),m.s=t,e.n=t,32&m.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=m.s,t.n=void 0,m.s.n=t,m.s=t),t}}function _(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=t?.watched,this.Z=t?.unwatched}_.prototype.brand=he,_.prototype.h=function(){return!0},_.prototype.S=function(e){var t=this,n=this.t;n!==e&&e.e===void 0&&(e.x=n,this.t=e,n===void 0?ve(function(){var e;(e=t.W)==null||e.call(t)}):n.e=e)},_.prototype.U=function(e){var t=this;if(this.t!==void 0){var n=e.e,r=e.x;n!==void 0&&(n.x=r,e.e=void 0),r!==void 0&&(r.e=n,e.x=void 0),e===this.t&&(this.t=r,r===void 0&&ve(function(){var e;(e=t.Z)==null||e.call(t)}))}},_.prototype.subscribe=function(e){var t=this;return x(function(){var n=t.value,r=m;m=void 0;try{e(n)}finally{m=r}})},_.prototype.valueOf=function(){return this.value},_.prototype.toString=function(){return this.value+``},_.prototype.toJSON=function(){return this.value},_.prototype.peek=function(){var e=m;m=void 0;try{return this.value}finally{m=e}},Object.defineProperty(_.prototype,`value`,{get:function(){var e=xe(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(ye>100)throw Error(`Cycle detected`);this.v=e,this.i++,be++,g++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{ge()}}}});function v(e,t){return new _(e,t)}function Se(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function Ce(e){for(var t=e.s;t!==void 0;t=t.n){var n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function we(e){for(var t=e.s,n=void 0;t!==void 0;){var r=t.p;t.i===-1?(t.S.U(t),r!==void 0&&(r.n=t.n),t.n!==void 0&&(t.n.p=r)):n=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=r}e.s=n}function y(e,t){_.call(this,void 0),this.x=e,this.s=void 0,this.g=be-1,this.f=4,this.W=t?.watched,this.Z=t?.unwatched}y.prototype=new _,y.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===be))return!0;if(this.g=be,this.f|=1,this.i>0&&!Se(this))return this.f&=-2,!0;var e=m;try{Ce(this),m=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return m=e,we(this),this.f&=-2,!0},y.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}_.prototype.S.call(this,e)},y.prototype.U=function(e){if(this.t!==void 0&&(_.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}},y.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}},Object.defineProperty(y.prototype,`value`,{get:function(){if(1&this.f)throw Error(`Cycle detected`);var e=xe(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function Te(e,t){return new y(e,t)}function Ee(e){var t=e.u;if(e.u=void 0,typeof t==`function`){g++;var n=m;m=void 0;try{t()}catch(t){throw e.f&=-2,e.f|=8,De(e),t}finally{m=n,ge()}}}function De(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,Ee(e)}function Oe(e){if(m!==this)throw Error(`Out-of-order effect`);we(this),m=e,this.f&=-2,8&this.f&&De(this),ge()}function b(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}b.prototype.c=function(){var e=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t==`function`&&(this.u=t)}finally{e()}},b.prototype.S=function(){if(1&this.f)throw Error(`Cycle detected`);this.f|=1,this.f&=-9,Ee(this),Ce(this),g++;var e=m;return m=this,Oe.bind(this,e)},b.prototype.N=function(){2&this.f||(this.f|=2,this.o=h,h=this)},b.prototype.d=function(){this.f|=8,1&this.f||De(this)},b.prototype.dispose=function(){this.d()};function x(e){var t=new b(e);try{t.c()}catch(e){throw t.d(),e}return t.d.bind(t)}var ke,Ae,je,Me=[],Ne=[];x(function(){ke=this.N})();function S(e,t){n[e]=t.bind(null,n[e]||function(){})}function Pe(e){je&&je(),je=e&&e.S()}function Fe(e){var t=this,n=e.data,i=C(n);i.value=n;var a=ce(function(){for(var e=t,n=t.__v;n=n.__;)if(n.__c){n.__c.__$f|=4;break}var a=Te(function(){var e=i.value.value;return e===0?0:!0===e?``:e||``}),o=Te(function(){return!Array.isArray(a.value)&&!r(a.value)}),s=x(function(){if(this.N=He,o.value){var t=a.value;e.__v&&e.__v.__e&&e.__v.__e.nodeType===3&&(e.__v.__e.data=t)}}),c=t.__$u.d;return t.__$u.d=function(){s(),c.call(this)},[o,a]},[]),o=a[0],s=a[1];return o.value?s.peek():s.value}Fe.displayName=`_st`,Object.defineProperties(_.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Fe},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),S(`__b`,function(e,t){if(typeof t.type==`string`){var n,r=t.props;for(var i in r)if(i!==`children`){var a=r[i];a instanceof _&&(n||(t.__np=n={}),n[i]=a,r[i]=a.peek())}}e(t)}),S(`__r`,function(e,n){if(n.type!==t){Pe();var r,i=n.__c;i&&(i.__$f&=-2,(r=i.__$u)===void 0&&(i.__$u=r=function(e){var t;return x(function(){t=this}),t.c=function(){i.__$f|=1,i.setState({})},t}())),Ae=i,Pe(r)}e(n)}),S(`__e`,function(e,t,n,r){Pe(),Ae=void 0,e(t,n,r)}),S(`diffed`,function(e,t){Pe(),Ae=void 0;var n;if(typeof t.type==`string`&&(n=t.__e)){var r=t.__np,i=t.props;if(r){var a=n.U;if(a)for(var o in a){var s=a[o];s!==void 0&&!(o in r)&&(s.d(),a[o]=void 0)}else a={},n.U=a;for(var c in r){var l=a[c],u=r[c];l===void 0?(l=Ie(n,c,u,i),a[c]=l):l.o(u,i)}}}e(t)});function Ie(e,t,n,r){var i=t in e&&e.ownerSVGElement===void 0,a=v(n);return{o:function(e,t){a.value=e,r=t},d:x(function(){this.N=He;var n=a.value.value;r[t]!==n&&(r[t]=n,i?e[t]=n:n?e.setAttribute(t,n):e.removeAttribute(t))})}}S(`unmount`,function(e,t){if(typeof t.type==`string`){var n=t.__e;if(n){var r=n.U;if(r)for(var i in n.U=void 0,r){var a=r[i];a&&a.d()}}}else{var o=t.__c;if(o){var s=o.__$u;s&&(o.__$u=void 0,s.d())}}e(t)}),S(`__h`,function(e,t,n,r){(r<3||r===9)&&(t.__$f|=2),e(t,n,r)}),a.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u,r=n&&n.s!==void 0;for(var i in t)return!0;if(this.__f||typeof this.u==`boolean`&&!0===this.u){var a=2&this.__$f;if(!(r||a||4&this.__$f)||1&this.__$f)return!0}else if(!(r||4&this.__$f)||3&this.__$f)return!0;for(var o in e)if(o!==`__source`&&e[o]!==this.props[o])return!0;for(var s in this.props)if(!(s in e))return!0;return!1};function C(e,t){return ce(function(){return v(e,t)},[])}var Le=typeof requestAnimationFrame>`u`?setTimeout:function(e){var t=function(){clearTimeout(n),cancelAnimationFrame(r),e()},n=setTimeout(t,35),r=requestAnimationFrame(t)},Re=function(e){queueMicrotask(function(){queueMicrotask(e)})};function ze(){_e(function(){for(var e;e=Me.shift();)ke.call(e)})}function Be(){Me.push(this)===1&&(n.requestAnimationFrame||Le)(ze)}function Ve(){_e(function(){for(var e;e=Ne.shift();)ke.call(e)})}function He(){Ne.push(this)===1&&(n.requestAnimationFrame||Re)(Ve)}function Ue(e){var t=se(e);t.current=e,p(function(){return x(function(){return this.N=Be,t.current()})},[])}const We=e=>new Promise(t=>setTimeout(t,e)),Ge=`0.2.1`,Ke=()=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],qe=(e,t,n)=>({time:e,total:Ke(),task:Ke(),wlid:t,disc:n}),Je=()=>({format:Ge,stats:[]}),Ye=(e,t)=>{e.total[t.level]++,t.next<e.time&&e.task[t.level]++},Xe=[`未学`,`新学`,`中等`,`熟悉`,`熟练`,`完成`],Ze=e=>[e[0],e[1]+e[2]+e[3]+e[4]+e[5],e[6]+e[7]+e[8]+e[9],e[10]+e[11]+e[12],e[13]+e[14],e[15]];var w;(function(e){e[e.Continue=100]=`Continue`,e[e.SwitchingProtocols=101]=`SwitchingProtocols`,e[e.Processing=102]=`Processing`,e[e.EarlyHints=103]=`EarlyHints`,e[e.OK=200]=`OK`,e[e.Created=201]=`Created`,e[e.Accepted=202]=`Accepted`,e[e.NonAuthoritativeInfo=203]=`NonAuthoritativeInfo`,e[e.NoContent=204]=`NoContent`,e[e.ResetContent=205]=`ResetContent`,e[e.PartialContent=206]=`PartialContent`,e[e.MultiStatus=207]=`MultiStatus`,e[e.AlreadyReported=208]=`AlreadyReported`,e[e.IMUsed=226]=`IMUsed`,e[e.MultipleChoices=300]=`MultipleChoices`,e[e.MovedPermanently=301]=`MovedPermanently`,e[e.Found=302]=`Found`,e[e.SeeOther=303]=`SeeOther`,e[e.NotModified=304]=`NotModified`,e[e.UseProxy=305]=`UseProxy`,e[e.TemporaryRedirect=307]=`TemporaryRedirect`,e[e.PermanentRedirect=308]=`PermanentRedirect`,e[e.BadRequest=400]=`BadRequest`,e[e.Unauthorized=401]=`Unauthorized`,e[e.PaymentRequired=402]=`PaymentRequired`,e[e.Forbidden=403]=`Forbidden`,e[e.NotFound=404]=`NotFound`,e[e.MethodNotAllowed=405]=`MethodNotAllowed`,e[e.NotAcceptable=406]=`NotAcceptable`,e[e.ProxyAuthRequired=407]=`ProxyAuthRequired`,e[e.RequestTimeout=408]=`RequestTimeout`,e[e.Conflict=409]=`Conflict`,e[e.Gone=410]=`Gone`,e[e.LengthRequired=411]=`LengthRequired`,e[e.PreconditionFailed=412]=`PreconditionFailed`,e[e.ContentTooLarge=413]=`ContentTooLarge`,e[e.URITooLong=414]=`URITooLong`,e[e.UnsupportedMediaType=415]=`UnsupportedMediaType`,e[e.RangeNotSatisfiable=416]=`RangeNotSatisfiable`,e[e.ExpectationFailed=417]=`ExpectationFailed`,e[e.Teapot=418]=`Teapot`,e[e.MisdirectedRequest=421]=`MisdirectedRequest`,e[e.UnprocessableEntity=422]=`UnprocessableEntity`,e[e.Locked=423]=`Locked`,e[e.FailedDependency=424]=`FailedDependency`,e[e.TooEarly=425]=`TooEarly`,e[e.UpgradeRequired=426]=`UpgradeRequired`,e[e.PreconditionRequired=428]=`PreconditionRequired`,e[e.TooManyRequests=429]=`TooManyRequests`,e[e.RequestHeaderFieldsTooLarge=431]=`RequestHeaderFieldsTooLarge`,e[e.UnavailableForLegalReasons=451]=`UnavailableForLegalReasons`,e[e.InternalServerError=500]=`InternalServerError`,e[e.NotImplemented=501]=`NotImplemented`,e[e.BadGateway=502]=`BadGateway`,e[e.ServiceUnavailable=503]=`ServiceUnavailable`,e[e.GatewayTimeout=504]=`GatewayTimeout`,e[e.HTTPVersionNotSupported=505]=`HTTPVersionNotSupported`,e[e.VariantAlsoNegotiates=506]=`VariantAlsoNegotiates`,e[e.InsufficientStorage=507]=`InsufficientStorage`,e[e.LoopDetected=508]=`LoopDetected`,e[e.NotExtended=510]=`NotExtended`,e[e.NetworkAuthenticationRequired=511]=`NetworkAuthenticationRequired`})(w||={});const T=(e,t=`POST`,n)=>{let r=new Headers(n);return r.has(`Content-Type`)||r.append(`Content-Type`,`application/json`),{method:t,headers:r,body:JSON.stringify(e)}},E=async(e,t,n)=>{let r=new URL(e,location.href);if(t)for(let[e,n]of Object.entries(t))n&&r.searchParams.append(e,n);return await fetch(r,n)},Qe=async(e,t,n)=>{let r=await E(e,t,n);if(r.ok)return await r.json()},$e=e=>new Promise(t=>{let n=new FileReader;n.readAsDataURL(e),n.onloadend=()=>t(n.result)}),et=new TextEncoder;function tt(e){let t=typeof e;return t===`object`?e===null?`null`:e?.constructor?.name??`object`:t}function nt(e){if(typeof e==`string`)return et.encode(e);if(e instanceof Uint8Array)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);throw TypeError(`The input must be a Uint8Array, a string, or an ArrayBuffer. Received a value of the type ${tt(e)}.`)}const D=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`.split(``);function rt(e){let t=nt(e),n=``,r,i=t.length;for(r=2;r<i;r+=3)n+=D[t[r-2]>>2],n+=D[(t[r-2]&3)<<4|t[r-1]>>4],n+=D[(t[r-1]&15)<<2|t[r]>>6],n+=D[t[r]&63];return r===i+1&&(n+=D[t[r-2]>>2],n+=D[(t[r-2]&3)<<4],n+=`==`),r===i&&(n+=D[t[r-2]>>2],n+=D[(t[r-2]&3)<<4|t[r-1]>>4],n+=D[(t[r-1]&15)<<2],n+=`=`),n}function it(e){let t=atob(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return r}function at(e){if(e.length%4==2)return e+`==`;if(e.length%4==3)return e+`=`;if(e.length%4==1)throw TypeError(`Illegal base64url string!`);return e}function ot(e){if(!/^[-_A-Z0-9]*?={0,2}$/i.test(e))throw TypeError(`Failed to decode base64url: invalid character`);return at(e).replace(/\-/g,`+`).replace(/_/g,`/`)}function st(e){return e.endsWith(`=`)?e.endsWith(`==`)?e.replace(/\+/g,`-`).replace(/\//g,`_`).slice(0,-2):e.replace(/\+/g,`-`).replace(/\//g,`_`).slice(0,-1):e.replace(/\+/g,`-`).replace(/\//g,`_`)}function ct(e){return st(rt(e))}function lt(e){return it(ot(e))}const ut=new TextEncoder,dt=new TextDecoder;function ft(e){return Array.isArray(e)}function pt(e){return e!==void 0}function mt(e){return e!==null}function ht(e){return typeof e!=`number`}function gt(e){return typeof e!=`string`}function _t(e){return e===null}function vt(e){return typeof e==`number`}function yt(e){return e!==!0}function bt(e){return typeof e==`object`&&!!e&&Array.isArray(e)===!1}function O(e){return typeof e==`string`}function xt(e){return e===void 0}function St(e){return O(e.hash?.name)}function Ct(e){return O(e.namedCurve)}function wt(e,t){if(e===`none`){if(mt(t))throw Error(`The alg '${e}' does not allow a key.`);return!0}else{if(!t)throw Error(`The alg '${e}' demands a key.`);let n=t.algorithm,r=Tt(e);if(n.name===r.name){if(St(n))return n.hash.name===r.hash.name;if(Ct(n))return n.namedCurve===r.namedCurve}return!1}}function Tt(e){switch(e){case`HS256`:return{hash:{name:`SHA-256`},name:`HMAC`};case`HS384`:return{hash:{name:`SHA-384`},name:`HMAC`};case`HS512`:return{hash:{name:`SHA-512`},name:`HMAC`};case`PS256`:return{hash:{name:`SHA-256`},name:`RSA-PSS`,saltLength:32};case`PS384`:return{hash:{name:`SHA-384`},name:`RSA-PSS`,saltLength:48};case`PS512`:return{hash:{name:`SHA-512`},name:`RSA-PSS`,saltLength:64};case`RS256`:return{hash:{name:`SHA-256`},name:`RSASSA-PKCS1-v1_5`};case`RS384`:return{hash:{name:`SHA-384`},name:`RSASSA-PKCS1-v1_5`};case`RS512`:return{hash:{name:`SHA-512`},name:`RSASSA-PKCS1-v1_5`};case`ES256`:return{hash:{name:`SHA-256`},name:`ECDSA`,namedCurve:`P-256`};case`ES384`:return{hash:{name:`SHA-384`},name:`ECDSA`,namedCurve:`P-384`};default:throw Error(`The jwt's alg '${e}' is not supported.`)}}async function Et(e,t,n,r){return _t(t)?e.length===0:await crypto.subtle.verify(Tt(n),t,e,ut.encode(r))}async function Dt(e,t,n){return _t(t)?``:ct(new Uint8Array(await crypto.subtle.sign(Tt(e),t,ut.encode(n))))}function Ot(e,t){return e+t<Date.now()/1e3}function kt(e,t){return e-t>Date.now()/1e3}function At(e){return e.length===3}function jt(...e){return e.some(e=>pt(e)&&ht(e))}function Mt(e,{expLeeway:t=1,nbfLeeway:n=1,ignoreExp:r,ignoreNbf:i}={}){if(jt(e.exp,e.nbf))throw Error(`The jwt has an invalid 'exp' or 'nbf' claim.`);if(vt(e.exp)&&yt(r)&&Ot(e.exp,t))throw RangeError(`The jwt is expired.`);if(vt(e.nbf)&&yt(i)&&kt(e.nbf,n))throw RangeError(`The jwt is used too early.`)}function Nt(e){return xt(e)||O(e)?!0:ft(e)&&e.every(O)}function Pt(e,t){if(Nt(e)){if(xt(e))throw Error(`The jwt has no 'aud' claim.`);let n=O(e)?[e]:e,r=O(t)?[t]:t;if(!n.some(e=>ft(r)?r.includes(e):r.test(e)))throw Error(`The identification with the value in the 'aud' claim has failed.`)}else throw Error(`The jwt has an invalid 'aud' claim.`)}function Ft(e){try{let t=e.split(`.`).map(lt).map((e,t)=>t===0||t===1?JSON.parse(dt.decode(e)):e);if(At(t))return t;throw Error()}catch{throw Error(`The serialization of the jwt is invalid.`)}}function It([e,t,n],r){if(gt(e?.alg))throw Error(`The jwt's 'alg' header parameter value must be a string.`);if(bt(t))return Mt(t,r),pt(r?.audience)&&Pt(t.aud,r.audience),{header:e,payload:t,signature:n};throw Error(`The jwt claims set is not a JSON object.`)}async function Lt(e,t,n){let{header:r,payload:i,signature:a}=It(Ft(e),n);if(wt(r.alg,t)){if(!await Et(a,t,r.alg,e.slice(0,e.lastIndexOf(`.`))))throw Error(`The jwt's signature does not match the verification signature.`);if(!(n?.predicates||[]).every(e=>e(i)))throw Error(`The payload does not satisfy all passed predicates.`);return i}else throw Error(`The jwt's alg '${r.alg}' does not match the key's algorithm.`)}function Rt(e,t){return`${ct(ut.encode(JSON.stringify(e)))}.${ct(ut.encode(JSON.stringify(t)))}`}async function zt(e,t,n){if(bt(t))if(wt(e.alg,n)){let r=Rt(e,t),i=await Dt(e.alg,n,r);return`${r}.${i}`}else throw Error(`The jwt's alg '${e.alg}' does not match the key's algorithm.`);else throw Error(`The jwt claims set is not a JSON object.`)}function Bt(e){return Math.round((e instanceof Date?e.getTime():Date.now()+e*1e3)/1e3)}const Vt=new TextEncoder,Ht=61,Ut={base32:new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZ234567`),base32hex:new TextEncoder().encode(`0123456789ABCDEFGHIJKLMNOPQRSTUV`),base32crockford:new TextEncoder().encode(`0123456789ABCDEFGHJKMNPQRSTVWXYZ`)},Wt={base32:new Uint8Array(128).fill(32),base32hex:new Uint8Array(128).fill(32),base32crockford:new Uint8Array(128).fill(32)};Ut.base32.forEach((e,t)=>Wt.base32[e]=t),Ut.base32hex.forEach((e,t)=>Wt.base32hex[e]=t),Ut.base32crockford.forEach((e,t)=>Wt.base32crockford[e]=t);function Gt(e,t){let n=e.length;if(e.byteOffset){let t=new Uint8Array(e.buffer);t.set(e),e=t.subarray(0,n)}return e=new Uint8Array(e.buffer.transfer(t)),e.set(e.subarray(0,n),t-n),[e,t-n]}const Kt=61,qt=new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZ234567`),Jt=new Uint8Array(128).fill(32);qt.forEach((e,t)=>Jt[e]=t);const Yt=`123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz`.split(``),Xt=61,Zt={base64:new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`),base64url:new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_`)},Qt={base64:new Uint8Array(128).fill(64),base64url:new Uint8Array(128).fill(64)};Zt.base64.forEach((e,t)=>Qt.base64[e]=t),Zt.base64url.forEach((e,t)=>Qt.base64url[e]=t);function $t(e){return((e+2)/3|0)*4}function en(e,t,n,r,i){for(t+=2;t<e.length;t+=3){let i=e[t-2]<<16|e[t-1]<<8|e[t];e[n++]=r[i>>18],e[n++]=r[i>>12&63],e[n++]=r[i>>6&63],e[n++]=r[i&63]}switch(t){case e.length+1:{let a=e[t-2]<<16;e[n++]=r[a>>18],e[n++]=r[a>>12&63],e[n++]=i,e[n++]=i;break}case e.length:{let a=e[t-2]<<16|e[t-1]<<8;e[n++]=r[a>>18],e[n++]=r[a>>12&63],e[n++]=r[a>>6&63],e[n++]=i;break}}return n}function tn(e,t,n,r,i){for(let t=e.length-2;t<e.length;++t)if(e[t]===i){for(let n=t+1;n<e.length;++n)if(e[n]!==i)throw TypeError(`Cannot decode input as base64: Invalid character (${String.fromCharCode(e[n])})`);e=e.subarray(0,t);break}if((e.length-n)%4==1)throw RangeError(`Cannot decode input as base64: Length (${e.length-n}), excluding padding, must not have a remainder of 1 when divided by 4`);for(t+=3;t<e.length;t+=4){let i=k(e[t-3],r)<<18|k(e[t-2],r)<<12|k(e[t-1],r)<<6|k(e[t],r);e[n++]=i>>16,e[n++]=i>>8&255,e[n++]=i&255}switch(t){case e.length+1:{let i=k(e[t-3],r)<<18|k(e[t-2],r)<<12;e[n++]=i>>16;break}case e.length:{let i=k(e[t-3],r)<<18|k(e[t-2],r)<<12|k(e[t-1],r)<<6;e[n++]=i>>16,e[n++]=i>>8&255;break}}return n}function k(e,t){let n=t[e]??64;if(n===64)throw TypeError(`Cannot decode input as base64: Invalid character (${String.fromCharCode(e)})`);return n}const nn=61,rn=new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`),an=new Uint8Array(128).fill(64);rn.forEach((e,t)=>an[e]=t);function on(e){e=typeof e==`string`?new TextEncoder().encode(e):e instanceof ArrayBuffer?new Uint8Array(e).slice():e.slice();let[t,n]=Gt(e,$t(e.length));return en(t,n,0,rn,nn),new TextDecoder().decode(t)}function sn(e){let t=new TextEncoder().encode(e);return new Uint8Array(t.buffer.transfer(tn(t,0,0,an,nn)))}const cn=61,ln=new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_`),un=new Uint8Array(128).fill(64);ln.forEach((e,t)=>un[e]=t);const dn=new TextEncoder().encode(`0123456789abcdef`),fn=new Uint8Array(128).fill(16);dn.forEach((e,t)=>fn[e]=t),new TextEncoder().encode(`ABCDEF`).forEach((e,t)=>fn[e]=t+10);const pn=new TextEncoder().encode(`0123456789abcdef`),mn=new Uint8Array(128).fill(16);pn.forEach((e,t)=>mn[e]=t),new TextEncoder().encode(`ABCDEF`).forEach((e,t)=>mn[e]=t+10);const hn=new ArrayBuffer(8),gn=new Uint32Array(hn),_n=new BigUint64Array(hn);var vn=class{template;#key;algorithm;keyUsages;tokenHeader;constructor(e){this.template=e,this.algorithm={name:`HMAC`,hash:`SHA-256`},this.keyUsages=[`sign`,`verify`],this.tokenHeader={alg:`HS256`,typ:`JWT`}}async importKey(e){this.#key=e?await crypto.subtle.importKey(`raw`,sn(e),this.algorithm,!1,this.keyUsages):await crypto.subtle.generateKey(this.algorithm,!0,this.keyUsages)}async exportKey(){return on(await crypto.subtle.exportKey(`raw`,this.#key))}async createToken(e,t){return await zt(this.tokenHeader,{...this.template,exp:Bt(e||5*60),...t},this.#key)}async verifyToken(e){try{return await Lt(e,this.#key)}catch{return null}}static decode(e){return Ft(e)}};const yn=`0.2.0`,bn=()=>({format:yn,version:0,books:[]}),xn=(e,t)=>e.wlid.localeCompare(t.wlid),Sn=/^(.+?)\/(.+)$/,Cn=e=>{let t=Sn.exec(e);return t?[t[1],t[2]]:[``,``]},A=new Map,wn=async e=>{let t=A.get(e),[n]=await Er(t=>t.wlid==e);if(n&&(!t||t.version!=n.version)){let t=await Nr(`${e}-${n.version}.txt`);if(!t.ok)return;let r=new Set;for(let e of(await t.text()).split(`
`))(e=e.trim())&&r.add(e);A.set(e,{wlid:e,version:n.version,disc:n.disc,wordSet:r})}},Tn=async e=>A.has(e)?(wn(e),A.get(e)):(await wn(e),A.get(e)),En=`https://f005.backblazeb2.com/file/vocabulary`,j=()=>Math.floor(Date.now()/1e3),Dn=180*24*60*60,On=(e,t)=>({word:e,last:t,next:t,level:0}),kn=e=>{let t=j();return{word:e.word,cards:e.cards,level:0,last:t,next:t,dictSync:t}},An=({word:e,last:t,next:n,level:r})=>({word:e,last:t,next:n,level:r}),jn=(e,t)=>(e.last=t.last,e.next=t.next,e.level=t.level,e),Mn=(e,t)=>(e.cards=t.cards,t.version!==void 0&&(e.version=t.version),e),M=`https://memword.micinfotech.com`,Nn=2e9,Pn=(e,t)=>(t===void 0&&(t=++e.level),t>15&&(e.level=t=15),t<=0&&(e.level=t=1),e.last=j(),e.next=t>=15?Nn:e.last+Math.round(39*t**3*1.5**t),e),N=new Map;let Fn;const P=(e,t)=>{if(Fn)return t(Fn);let n=indexedDB.open(`memword`,1);n.onerror=e,n.onsuccess=()=>t(Fn=n.result),n.onupgradeneeded=()=>{let e=n.result;e.createObjectStore(`mata`,{keyPath:`key`}),e.createObjectStore(`wordlist`,{keyPath:`wlid`}),e.createObjectStore(`issue`,{keyPath:`id`,autoIncrement:!0});let t=e.createObjectStore(`item`,{keyPath:`word`});t.createIndex(`last`,`last`),t.createIndex(`next`,`next`)}},In=()=>new Promise((e,t)=>P(t,n=>{n.close();let r=indexedDB.deleteDatabase(`memword`);r.onerror=t,r.onsuccess=()=>e()})),F=e=>new Promise((t,n)=>P(n,r=>{let i=r.transaction(`mata`,`readonly`).objectStore(`mata`).get(e);i.onerror=n,i.onsuccess=()=>t(i.result?.value)})),I=(e,t)=>new Promise((n,r)=>P(r,i=>{let a=i.transaction(`mata`,`readwrite`).objectStore(`mata`).put({key:e,value:t});a.onerror=r,a.onsuccess=()=>n()})),Ln=()=>new Promise((e,t)=>P(t,n=>{let r=n.transaction(`issue`,`readonly`).objectStore(`issue`).getAll();r.onerror=t,r.onsuccess=()=>e(r.result)})),Rn=e=>new Promise((t,n)=>P(n,r=>{let i=r.transaction(`issue`,`readwrite`).objectStore(`issue`).add({issue:e});i.onerror=n,i.onsuccess=()=>t()})),zn=e=>new Promise((t,n)=>P(n,r=>{let i=r.transaction(`issue`,`readwrite`).objectStore(`issue`).delete(e);i.onerror=n,i.onsuccess=()=>t()})),Bn=e=>new Promise((t,n)=>P(n,r=>{let i=r.transaction(`wordlist`,`readwrite`).objectStore(`wordlist`).put(e);i.onerror=n,i.onsuccess=()=>t()})),Vn=e=>new Promise((t,n)=>P(n,r=>{let i=[],a=r.transaction(`wordlist`,`readonly`);a.onerror=n,a.oncomplete=()=>t(i),a.objectStore(`wordlist`).openCursor().onsuccess=t=>{let n=t.target.result;if(!n)return;let r=n.value;e(r)&&i.push(r),n.continue()}})),Hn=e=>new Promise((t,n)=>P(n,r=>{let i=new Map;for(let t of e)i.set(t.wlid,t);let a=new Set,o=r.transaction(`wordlist`,`readwrite`);o.onerror=n,o.oncomplete=()=>t(a);let s=o.objectStore(`wordlist`);s.openCursor().onsuccess=e=>{let t=e.target.result;if(!t){for(let[e,t]of i)s.add(t);return}let n=t.value;if(i.has(n.wlid)){let e=i.get(n.wlid);e.version!==n.version&&s.put(e),i.delete(n.wlid)}else a.add(n.wlid),t.delete();t.continue()}})),Un=e=>new Promise((t,n)=>P(n,r=>{let i=r.transaction(`wordlist`,`readwrite`).objectStore(`wordlist`).delete(e);i.onerror=n,i.onsuccess=()=>t()})),Wn=e=>new Promise((t,n)=>P(n,r=>{let i=r.transaction(`item`,`readonly`).objectStore(`item`).get(e);i.onerror=n,i.onsuccess=()=>t(i.result)})),Gn=e=>new Promise((t,n)=>P(n,r=>{let i=r.transaction(`item`,`readwrite`).objectStore(`item`).delete(e);i.onerror=n,i.onsuccess=()=>t()})),Kn=e=>new Promise((t,n)=>P(n,r=>{let i=r.transaction(`item`,`readonly`).objectStore(`item`).index(`last`).getAll(IDBKeyRange.lowerBound(e));i.onerror=n,i.onsuccess=()=>t(i.result)})),qn=e=>new Promise((t,n)=>P(n,r=>{let i=j(),a=r.transaction(`item`,`readwrite`);a.onerror=n,a.oncomplete=()=>t();let o=a.objectStore(`item`);for(let t of e)o.get(t).onsuccess=e=>{let n=e.target.result;n||o.add(On(t,i))}})),Jn=e=>new Promise((t,n)=>P(n,r=>{let i=new Map;for(let t of e)i.set(t.word,t);let a=r.transaction(`item`,`readwrite`);a.onerror=n,a.oncomplete=()=>t();let o=a.objectStore(`item`);o.openCursor().onsuccess=e=>{let t=e.target.result;if(!t){for(let[e,t]of i)o.add(t);return}let n=t.value;if(i.has(n.word)){let e=i.get(n.word);e.last>n.last&&t.update(jn(n,e)),i.delete(n.word)}else t.delete();t.continue()}})),Yn=e=>new Promise((t,n)=>P(n,r=>{let i,a=r.transaction(`item`,`readwrite`);a.onerror=n,a.oncomplete=()=>t(i);let o=a.objectStore(`item`);o.get(e.word).onsuccess=t=>{i=t.target.result,i&&(i.dictSync=j())&&o.put(Mn(i,e))}})),Xn=e=>new Promise((t,n)=>P(n,r=>{let i,a=r.transaction(`item`,`readonly`);a.onerror=n,a.oncomplete=()=>t(i),a.objectStore(`item`).index(`next`).openCursor(IDBKeyRange.upperBound(j()),`prev`).onsuccess=t=>{let n=t.target.result;if(!n)return;let r=n.value;if(!e||e.has(r.word))return i=r;n.continue()}})),Zn=(e,t)=>new Promise((n,r)=>P(r,i=>{let a=[],o=i.transaction(`item`,`readonly`);o.onerror=r,o.oncomplete=()=>n(a),o.objectStore(`item`).index(`next`).openCursor(IDBKeyRange.upperBound(j()+e),`prev`).onsuccess=e=>{let n=e.target.result;n&&(a.push(n.value),!(a.length>=t)&&n.continue())}})),Qn=e=>new Promise((t,n)=>P(n,r=>{let i=j(),a=qe(i,void 0,`全部词汇`),o=e.map(e=>qe(i,e?.wlid,e?.disc)),s=e.map(e=>new Set(e?.wordSet)),c=r.transaction(`item`,`readonly`);c.onerror=n,c.oncomplete=()=>t([a,...o]),c.objectStore(`item`).openCursor().onsuccess=e=>{let t=e.target.result;if(!t)return o.forEach((e,t)=>e.total[0]+=s[t].size);let n=t.value;Ye(a,n),o.forEach((e,t)=>s[t].has(n.word)&&(Ye(e,n),s[t].delete(n.word))),t.continue()}})),$n=(e,t)=>new Promise((n,r)=>P(r,i=>{let a=i.transaction(`item`,`readwrite`);a.onerror=r,a.oncomplete=()=>n();let o=a.objectStore(`item`);N.has(e)?(o.put(Pn(N.get(e),t)),N.delete(e)):o.get(e).onsuccess=e=>{let n=e.target.result;n&&o.put(Pn(n,t))}})),er=7*24*60*60;let L;const R=()=>({Authorization:`Bearer ${L}`}),tr=async()=>L??=await F(`_auth`),nr=e=>Qe(`${M}/pub/dict?q=${encodeURIComponent(e)}`,void 0,{cache:`reload`}),rr=async e=>{let t=await Wn(e),n=await nr(e);if(!n)return t;if(!t)return kn(n);if(t.version!==void 0&&n.version!==void 0&&t.version>=n.version)return await Yn(t);if(n.cards){for(let e of n.cards)if(e.sound){let t=await fetch(`${M}/pub/sound?q=${encodeURIComponent(e.sound)}`,{cache:`force-cache`});t.ok&&(e.sound=await $e(await t.blob()))}}return await Yn(n)},ir=async()=>{let e=await Ln();for(let t of e){let e=await fetch(`${M}/api/issue`,T(t,`POST`,R()));if(!e.ok)break;await zn(t.id)}};let z=bn();const ar=async e=>e.dictSync?(e.dictSync+er<j()&&rr(e.word),e):await rr(e.word)??e,or=async()=>{if(L||await tr(),L)return vn.decode(L)[1]?.aud},sr=async e=>{try{return await nr(e)}catch{}},cr=async e=>{try{let t=await fetch(`${M}/admin/dict`,T(e,`PUT`,R()));return t.ok}catch{return!1}},lr=async e=>{try{let t=await E(`${M}/admin/dict`,{q:e},{method:`DELETE`,headers:R()});return t.ok}catch{return!1}},ur=async()=>{let e=await F(`_setting`);e&&(z=e)},dr=async e=>{e&&e.version>z.version&&(z=e);let t=await F(`_setting`);t&&t.version>z.version?z=t:await I(`_setting`,z);try{let e=await fetch(`${M}/api/setting`,T(z,`POST`,R()));if(!e.ok)return;let t=await e.json();t.version>z.version&&await I(`_setting`,z=t)}catch{}},fr=async e=>{if(N.has(e))return N.get(e);let t=await Wn(e);if(!t)try{let t=await nr(e);if(!t)return;let n=kn(t);return N.set(e,n),n}catch{return}return await ar(t)},pr=e=>rr(e),mr=async e=>{let t=await Xn(e?(await Tn(e))?.wordSet:void 0);if(t)return await ar(t)},hr=async e=>{try{let t=await fetch(`${M}/api/task`,T([e],`DELETE`,R()));return t.ok?(await Gn(e),!0):console.error(`Network Error: get sync task data error.`)}catch{return!1}},gr=(e,t)=>$n(e,t),_r=async e=>{let t=await Tn(e);return t?(await qn(t.wordSet),!0):!1},vr=async()=>{try{let e=j(),t=await F(`_sync-time`)??1,n=(await Kn(t)).map(An),r=await fetch(`${M}/api/task`,T(n,`POST`,R()));if(!r.ok)return console.error(`Network Error: get sync task data error.`);let i=await r.json();return await Jn(i),await I(`_sync-time`,e),!0}catch{return!1}},yr=async e=>{await Rn(e),ir()},br=()=>Qe(`${M}/admin/issue`,void 0,{method:`GET`,headers:R()}),xr=e=>Qe(`${M}/admin/issue`,{id:e},{method:`DELETE`,headers:R()}),Sr=async()=>{let e=[];for(let t of z.books)e.push(await Tn(t));return{format:Ge,stats:await Qn(e)}},Cr=async()=>{let e=await Tn(`system/vocabulary`);if(e)return Array.from(e.wordSet).sort()},wr=async e=>{try{let t=await E(`${M}/admin/vocabulary`,void 0,{body:e,method:`POST`,headers:R()});return t.ok}catch{return!1}},Tr=async()=>{let e=await Qe(`${M}/pub/wordlist`);return e?((async()=>{let t=j();await I(`_wl-time`,t);let n=await Hn(e),r=await F(`_setting`),i=r.books.filter(e=>!n.has(e));i.length!==r.books.length&&(r.books=i,r.version=t,await I(`_setting`,r))})(),e):[]},Er=async e=>{try{let t=await F(`_wl-time`),n=j();if(n-t>3600*24)return(await Tr()).filter(e)}catch{}return Vn(e)},Dr=async(e,t,n,r)=>{let i=await E(`${M}/api/wordlist`,{name:e,disc:n,replace:r},{body:t,method:`POST`,headers:R()});switch(i.status){case w.NotAcceptable:return[i.status,await i.json()];case w.OK:return Bn(await i.json()),[i.status];default:return[i.status]}},Or=async e=>{try{let t=Cn(e)[1],n=await E(`${M}/api/wordlist`,{name:t},{method:`DELETE`,headers:R()});return n.ok&&await Un(e),n.ok}catch{return!1}},kr=async e=>{try{let t=await E(`${M}/pub/otp`,{name:e});return t.status}catch{return-1}},Ar=async(e,t)=>{try{let n=await E(`${M}/pub/signup`,{phone:e,name:t});return n.status}catch{return-1}},jr=async(e,t)=>{try{let n=await E(`${M}/pub/signin`,{name:e,code:t});return n.ok&&await I(`_auth`,(await n.json()).auth),console.log(`signin ${n.status}`),n.status}catch{return-1}},Mr=In,Nr=e=>fetch(`${En}/${e}`),Pr=[],B=v(``),Fr=v(Je()),Ir=v(``),V=v(!1),H=v(),Lr=v(),U=v(-1),W=v(``),G=v(),K=v(!1),Rr=v(``);let zr=[];const q=async()=>Fr.value=await Sr(),Br=()=>B.value===`hua`,Vr=()=>Ir.value=``,J=e=>Rr.value=e?(Pr.push(Rr.value),e):Pr.pop()??(B.value?`#home`:`#about`),Y=(e,t=!0)=>(Ir.value=e,t&&setTimeout(Vr,3e3)),Hr=async e=>{K.value=!0;let t=await mr(Lr.value=e);K.value=!1,t?(H.value=t,V.value=!1,U.value=0,J(`#study`)):(Y(`No More Task`),q())},Ur=async()=>{if(B.value=await or()??``){J(`#home`),await ur(),await q();let e=await Cr();e&&(zr=e),(async()=>{Tr(),await dr(),await vr(),await q();for(let e of await Zn(3600,500))await ar(e),await We(300)})()}else J(`#about`)};var X=({class:e,children:t,disabled:n,onClick:r,...a})=>{let o=C(!0),s=async e=>{e.stopPropagation(),o.value=!1,r&&await r(e),o.value=!0};return i(`button`,{type:`button`,class:`disabled:opacity-50 ${e??``}`,...a,onClick:s,disabled:!o.value||n,children:t})},Z=({title:e,children:n,leftElem:r,rightElem:a,class:o,onBackClick:s,onMenuClick:c,...l})=>i(t,{children:[i(`div`,{class:`title shrink-0 px-2 flex justify-between items-center font-bold`,children:[i(`div`,{class:`w-7 [app-region:no-drag]`,children:r??(s&&i(X,{onClick:s,class:`w-full h-7 i-material-symbols-chevron-left`}))}),i(`div`,{class:`grow font-bold text-center [app-region:drag]`,children:Ir.value||e}),i(`div`,{class:`w-7 [app-region:no-drag]`,children:a??(c&&i(X,{onClick:c,class:`w-full h-7 i-heroicons-outline-dots-horizontal`}))})]}),i(`div`,{class:`body grow h-0 ${o??``}`,...l,children:n})]}),Q=({class:e,children:t,onClick:n,...r})=>{let a=C(!1),o=C({}),s=e=>{let t=e.currentTarget,r=Math.max(t.clientWidth,t.clientHeight),i=r/2;o.value={width:`${r}px`,height:`${r}px`,left:`${e.offsetX-i}px`,top:`${e.offsetY-i}px`},a.value=!0,setTimeout(()=>a.value=!1,580),n&&n(e)};return i(X,{...r,class:`overflow-hidden relative ${e??``}`,onClick:s,children:[t,a.value&&i(`span`,{class:`absolute transform-[scale(0)] rounded-[50%] bg-[var(--bg-ripple,gray)]:80 animate-[ripple_600ms_linear_0s]`,style:o.value})]})};const Wr=(e,t)=>e+t,Gr=(e,t)=>e>t?e:t;var Kr=({stat:e})=>{let n=Ze(e.total),r=Ze(e.task),a=n.reduce(Gr)*1.2,o=e.total.reduce(Wr),s=e.task.reduce(Wr),c=e.wlid?Cn(e.wlid)[1]:``,l=`${e.disc??c} - ${s}|${o}`,u=e=>{let o=n[e],s=r[e];return i(t,{children:[i(`div`,{class:`text-left`,children:Xe[e]}),i(`div`,{class:`relative bg-[var(--bg-title)] h-6 py-1 w-full hover:cursor-pointer`,children:[i(`div`,{class:`my-auto h-4 bg-slate-400`,style:{width:`${a?o*100/a:100}%`},children:i(`div`,{class:`ml-auto h-full bg-orange-500`,style:{width:`${o?s*100/o:0}%`}})}),i(`div`,{class:`absolute top-0 right-1`,children:[s,`|`,o]})]})]})};return i(`div`,{class:`grow min-w-80 grid gap-x-1 grid-cols-[max-content_1fr] items-center`,children:[i(`div`,{class:`col-span-2 text-center font-bold`,children:i(`button`,{type:`button`,class:`hover:cursor-pointer hover:underline`,onClick:()=>Hr(e.wlid),children:l})}),[0,1,2,3,4,5].map(u)]})},qr=e=>i(`svg`,{...e,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 128 128`,children:[i(`path`,{d:`M18.938 93.37c.121-26.895.24-53.753.355-80.572.01-1.78 1.007-3.302 2.379-3.635 7.656-2.032 19.724-1.521 27.918 2.485 5.77 2.655 10.828 7.348 14.583 13.53 3.875-5.886 8.908-10.355 14.584-12.949 7.738-3.763 19.477-4.668 27.89-3.066 1.436.248 2.51 1.801 2.525 3.647v80.898c-.005 2.063-1.325 3.729-2.944 3.716a2.521 2.521 0 01-.675-.105c-7.184-1.187-14.486-.318-21.373 2.544-5.088 2.416-9.918 5.639-14.374 9.592 6.267-2.478 12.798-3.692 19.36-3.6 8.418.17 16.797 1.526 24.982 4.041v-84.66h2.926c1.616 0 2.926 1.669 2.926 3.728v85.81c0 2.059-1.31 3.728-2.926 3.728a2.357 2.357 0 01-.911-.198c-8.818-3.089-17.9-4.778-27.043-5.028-8.08-.13-16.087 1.953-23.48 6.109-1.011.82-2.305.82-3.317 0-7.392-4.157-15.4-6.24-23.48-6.109-9.121.265-18.182 1.961-26.978 5.052a2.343 2.343 0 01-.912.197c-1.634.02-2.963-1.67-2.953-3.75V28.963c0-2.059 1.31-3.728 2.926-3.728h2.926v84.66c8.185-2.515 16.564-3.87 24.983-4.04 7.033-.107 14.03 1.295 20.699 4.145-4.212-4.341-9.013-7.663-14.164-9.802-6.38-2.67-16.115-3.565-23.233-2.787-1.625.202-3.065-1.33-3.2-3.402a7.394 7.394 0 010-.64zm84.364-77.239c-6.763-.813-16.46.14-22.54 3.078-5.652 2.524-10.497 7.342-13.79 13.715v69.981c4.736-4.136 9.854-7.514 15.239-10.057 6.806-2.777 13.96-3.908 21.091-3.333zM61.12 102.185V32.82c-3.063-6.886-8.012-11.485-13.608-14.214-6.38-3.101-16.179-3.798-22.386-2.671l-.328 73.814c6.772-.314 16.124.79 22.35 3.379 5.001 2.066 9.716 5.123 13.972 9.058z`}),i(`path`,{d:`M48.602 50.572c-1.248 3.52-3.008 6.432-5.216 8.864-2.464-2.528-4.384-5.504-5.76-8.864zm9.184 0V46.86h-13.92l2.752-.864c-.384-1.312-1.344-3.36-2.176-4.832l-4.064 1.184c.736 1.408 1.44 3.2 1.792 4.512H28.666v3.712h5.024c1.728 4.512 3.936 8.352 6.816 11.52-3.328 2.592-7.456 4.416-12.448 5.664.768.864 1.888 2.656 2.304 3.552 5.152-1.472 9.44-3.584 12.96-6.464 3.36 2.816 7.488 4.928 12.512 6.272.576-1.056 1.696-2.72 2.56-3.552-4.768-1.12-8.8-2.976-12.096-5.536 2.784-3.104 4.96-6.848 6.592-11.456zM81.702 58.432l.743-2.737c.743-2.601 1.486-5.439 2.128-8.175h.135c.744 2.702 1.42 5.574 2.196 8.175l.743 2.737zm8.783 10.304h5.237l-8.04-25h-5.88l-8.006 25h5.068l1.756-6.42h8.109z`})]}),Jr=e=>i(`svg`,{...e,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 128 128`,children:[i(`path`,{d:`M63.99 45.64c11.482 0 20.83-9.347 20.83-20.83C84.82 13.328 75.473 4 63.99 4c-11.482 0-20.83 9.347-20.83 20.83 0 11.483 9.347 20.81 20.83 20.81zm0-34.98c7.826 0 14.17 6.364 14.17 14.17C78.16 32.638 71.796 39 63.99 39c-7.807 0-14.17-6.362-14.17-14.168 0-7.807 6.345-14.171 14.17-14.171z`}),i(`path`,{d:`M113.97 72.637h-2.548l1.205-16.7c.099-1.244-.514-2.43-1.6-3.103-13.875-8.418-32.077-7.371-47.056 2.49-14.96-9.842-33.183-10.889-47.057-2.49-1.068.633-1.68 1.838-1.6 3.104l1.204 16.7h-2.51c-3.675 0-6.66 3.003-6.66 6.658v10.396c0 3.675 3.004 6.66 6.66 6.66h4.23c.593 8.182 1.187 16.324 1.78 24.507.158 2.49 3.359 4.367 5.671 2.133 10.375-10.316 25.475-13.339 36.74-7.331 1.225.494 2.253.435 3.143 0 11.264-6.028 26.383-3.004 36.739 7.331 2.292 2.373 5.692.1 5.672-2.133.573-8.183 1.186-16.325 1.779-24.507h4.23c3.675 0 6.66-3.004 6.66-6.66V79.296c-.021-3.656-2.985-6.66-6.681-6.66zM23.93 85.503a4.226 4.226 0 01-4.21 4.21H14.01V79.318h5.73a4.226 4.226 0 014.21 4.209v1.976zm36.72 22.173c-11.107-3.714-24.071-1.363-34.467 6.167-.454-6.205-.89-12.43-1.344-18.637v-.118c3.419-1.818 5.77-5.435 5.77-9.585v-1.977c0-4.743-3.063-8.795-7.331-10.256l-1.127-15.693c11.522-6.027 26.265-4.684 38.499 3.539zm41.147 6.167c-10.396-7.529-23.36-9.88-34.467-6.166V87.835h6.56a3.336 3.336 0 003.341-3.34 3.323 3.323 0 00-3.34-3.34H67.33v-6.027h14.624a3.336 3.336 0 003.34-3.34 3.336 3.336 0 00-3.34-3.34H67.349v-7.37c12.254-8.222 26.997-9.566 38.5-3.519l-1.128 15.693c-4.249 1.461-7.332 5.513-7.332 10.256v1.977c0 4.15 2.332 7.746 5.77 9.585 0 .02-.929 12.727-1.362 18.774zm6.442-24.15a4.226 4.226 0 01-4.21-4.21v-1.976a4.226 4.226 0 014.21-4.21h5.732v10.396z`})]}),Yr=e=>i(`svg`,{...e,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 64 64`,children:[i(`path`,{d:`m 32,3.5 c -9.094931,0 -16.5,7.405069 -16.5,16.5 0,9.094931 7.405069,16.5 16.5,16.5 9.094931,0 16.5,-7.405069 16.5,-16.5 C 48.5,10.905069 41.094931,3.5 32,3.5 Z m 0,3 c 7.473611,0 13.5,6.026389 13.5,13.5 0,7.473611 -6.026389,13.5 -13.5,13.5 C 24.526389,33.5 18.5,27.473611 18.5,20 18.5,12.526389 24.526389,6.5 32,6.5 Z`}),i(`path`,{d:`M 32,26.5 C 15.173084,26.5 1.5000002,40.173072 1.5,57 v 1.5 h 61 V 57 C 62.5,40.173072 48.826916,26.5 32,26.5 Z m 0,3 c 14.691629,0 26.556927,11.508874 27.349609,26 H 4.6503906 C 5.4430732,41.008874 17.308371,29.5 32,29.5 Z`})]}),Xr=()=>i(Z,{class:`flex flex-col`,title:`学习进度`,children:[i(`div`,{class:`body grow overflow-y-auto`,children:i(`div`,{class:`p-2 flex flex-wrap justify-between gap-4`,children:Fr.value.stats.map(e=>i(Kr,{stat:e},`${e.time}${e.wlid}`))})}),i(`div`,{class:`tail shrink-0 px-4 pt-2 pb-5 flex gap-3 justify-between [&>button]:grow font-bold`,children:[i(Q,{onClick:()=>J(`#search`),children:[i(qr,{class:`w-9 h-9 inline-block`}),`词典`]}),i(Q,{onClick:()=>Hr(),children:[i(Jr,{class:`w-9 h-9 inline-block`}),`学习`]}),i(Q,{onClick:()=>J(`#menu`),children:[i(Yr,{class:`w-9 h-9 inline-block`}),`我`]})]})]}),Zr=()=>i(Z,{class:`flex flex-col pb-4`,title:`帮助`,onBackClick:()=>J(),children:i(`ol`,{class:`list-decimal py-2 pr-2 pl-8 [&>li]:mx-2 overflow-y-auto`,children:[i(`li`,{children:[`如何使用本软件？`,i(`br`,{}),`答：点击「学习」，开始学习即可；在学习界面， (1)当练习听力时，会先播放一小段声音，没有听清可以点击`,i(`div`,{class:`w-6 h-6 inline-block`,children:`‣`}),`或按下「B或C」快捷键或触摸屏幕的上半部分进行重听， (2)当练习阅读时，会先显示一个单词； 然后在心里默想一个概念（意思），点击「答」或按下「空格键」或触摸屏幕下半区域，显示单词的音标和解释， 并同时显示一个与该词相关的背景图片，检查是否和自己默想的答案一致，如果一致，点击「知」或按下「N或X」快捷键或向上滑动屏幕， 否则点击「不」或按下「M或Z」快捷键或向下滑动屏幕。记住，要快速完成，不要在一个词上长时间停留，那样只会降低效率， 我们的方法是快速/多次，从记忆效率来讲，次数的作用远远大于时长。这个方法称为大脑按摩，直接在拼写/声音和概念之间建立反射弧， 所以不要犹豫，快速完成一个小冲刺。`]}),i(`li`,{children:[`我应该学习哪些词汇？`,i(`br`,{}),`答：我们的目标是在未来能够自由使用英语，应该先学重要的词汇，因为20%的英语词汇表达了80%的意思， 抓住少数基本词，将能够快速提高英语水平。本软件提供多本词书供您选择，以适应您当下的需求。但不要太多关注词书， 一个常用词通常会出现在多本词书中，不必介意它到底从哪里来。也可以不选择词书，直接基于词典 （本词典收录25000多条常用词，不在词典中的词，对于学生而言，可以不必记忆了），在词典中查到自己在生活中遇到， 但不会的词，直接开始学它，背它，终有一日，你再也遇不到生词的时候，你就已经功法大成了。`]}),i(`li`,{children:[`我该如何复习？`,i(`br`,{}),`答：完全不必操心这个事情，让系统决定，系统自动根据「艾宾浩斯」遗忘曲线来决定此时的最佳复习内容， 你要做的事是每天利用碎片时间，拿出手机，开始「学习」。`]}),i(`li`,{children:[`界面上的按钮是什么意思？`,i(`br`,{}),i(`span`,{class:`text-[150%] i-material-symbols-check-circle text-green`}),`我认识这个词；`,i(`br`,{}),i(`span`,{class:`text-[150%] i-gridicons-cross-circle text-fuchsia`}),`我不认识这个词；`,i(`br`,{}),i(`span`,{class:`text-[150%] i-material-symbols-volume-up text-blue`}),`: 再播一遍声音；`,i(`br`,{}),i(`span`,{class:`text-[150%] i-material-symbols-light-family-star text-yellow`}),`: 这个词我已经掌握，直接标记为「已完成」；`,i(`br`,{}),i(`span`,{class:`text-[150%] i-material-symbols-error text-red`}),`: 这个词的翻译/声音/音标，有问题/错误，请人工处理。`,i(`br`,{}),i(`span`,{class:`text-[150%] i-material-symbols-refresh text-purple`}),`: 忽略本地词典缓冲，从服务器重新下载这个词的翻译/声音/音标。`]}),i(`li`,{children:[`关于「学习词书」`,i(`br`,{}),`答：学习词书将一本词书的全部词添加进我的学习任务。但我们通常并不会直接开始学这些新词，而是优先复习旧词， 掌握巩固一个旧词比学习一批新词更重要，这些新加的任务将会成为优先级最低的任务。`]}),i(`li`,{children:[`关于登录和多设备`,i(`br`,{}),`答：⓵软件设计为免密模式（不需要密码），在一个设备上只要用电子邮件验证身份之后，就再也不需要密码了，打开软件立即可以开始学习。`,i(`br`,{}),`⓶在第二台设备上登录时，系统将自动同步学习记录和设置，你完全可以同时在电脑和手机上学习。`]}),i(`li`,{children:[`以后有AI翻译了，我还用得着学英语吗？`,i(`br`,{}),`答：AI或者任意翻译工具甚至包括人工翻译，都只能解决浅表问题，因为一门语言是无法准确表达另一门语言的含义的， 一门语言的背后代表着文化和思维模式，这些深层次的东西是任何翻译都无法解决的。如果你有计划去英语文华圈生活/学习/工作， 那你必需亲自用人脑学好它，仅仅翻译工具是不够的。`]})]})}),$=({binding:e,...t})=>i(`input`,{...t,value:e.value?.toString(),onInput:t=>e.value=t.currentTarget.value});const Qr=`0.11.1`;var $r=()=>{let e=C(!1),n=C(``);return i(Z,{title:`快乐背单词`,class:`about flex flex-col pb-4 font-extrabold`,onBackClick:B.value?()=>J(`#home`):void 0,children:[e.value&&i(t,{children:[i($,{binding:n}),i(X,{class:`button btn-normal`,onClick:()=>I(`_auth`,n.value),children:`OK`})]}),i(`div`,{children:[i(`h1`,{children:`快乐背单词`}),i(`p`,{children:[`版本：`,Qr]})]}),i(`div`,{children:[i(`h1`,{children:`语言基础`}),i(`p`,{children:[`词汇是`,i(`b`,{children:`语言的基础`}),`，学习语言应该掌握一定数量的基础词汇。`]})]}),i(`div`,{children:[i(`h1`,{children:`高频词汇`}),i(`p`,{children:[`每个词汇的重要程度是不一样的，越是使用`,i(`b`,{children:`频率高的词汇`}),`，其重要程度越高，本工具提供多种词频工具统计的结果词书。`]})]}),i(`div`,{children:[i(`h1`,{children:`遗忘曲线`}),i(`p`,{children:[`记忆最大的敌人是遗忘，本工具依据「艾宾浩斯」`,i(`b`,{children:`遗忘曲线`}),`设计大脑刺激频率，以最大化记忆效率。`]})]}),i(`div`,{children:[i(`h1`,{children:`碎片时间`}),i(`p`,{children:[`现代人工作学习都非常忙碌，充分利用好`,i(`b`,{children:`碎片时间`}),`，是成功的关键。`]})]}),i(`div`,{children:[i(`h1`,{children:`开始学习`}),i(`p`,{children:[`使用你的手机，单击`,i(Q,{class:`button bg-orange-300 text-slate-800`,title:`login`,onClick:()=>J(`#signup`),children:`登录`}),`开始免费学习吧。`]})]}),i(`div`,{children:[i(`h1`,{children:`微信`}),i(`p`,{children:[`*提示一：请使用`,i(`b`,{children:`除微信以外`}),`的其他浏览器，如果当前是在微信中，点击屏幕右上(...)，然后选择「在默认浏览器中打开」。`]})]}),i(`div`,{children:[i(`h1`,{children:`桌面`}),i(`p`,{children:[`*提示二(iOS): 请使用「共享」-「添加到主屏幕」安装 `,i(`b`,{children:`Web应用`}),` 到桌面，以便下次直接`,i(X,{onClick:()=>e.value=!0,children:`点击`}),`进入。`]}),i(`p`,{children:[`*提示三(Android): 请使用「...」-「安装应用」安装 `,i(`b`,{children:`Web应用`}),` 到桌面，以便下次直接点击进入。`]})]})]})},ei=()=>{let e=e=>{e.stopPropagation(),J(e.currentTarget.title)},n=()=>{B.value=``,J(`#about`),Mr()};return i(Z,{class:`menu p-2 flex flex-col gap-1`,title:`菜单`,onBackClick:()=>J(),children:[Br()&&i(t,{children:[i(`menu`,{title:`#lookup`,onClick:e,children:`辞典编辑`}),i(`div`,{}),i(`menu`,{title:`#ignore`,onClick:e,children:`拼写忽略`}),i(`div`,{}),i(`menu`,{title:`#issues`,onClick:e,children:`处理问题`}),i(`div`,{}),i(`div`,{})]}),i(`menu`,{title:`#issue`,onClick:e,children:`报告问题`}),i(`div`,{}),i(`menu`,{title:`#wordlists`,onClick:e,children:`我的词书`}),i(`div`,{}),i(`menu`,{title:`#setting`,onClick:e,children:`设置`}),i(`div`,{}),i(`menu`,{title:`#about`,onClick:e,children:`关于`}),i(`div`,{}),i(`menu`,{title:`#help`,onClick:e,children:`帮助`}),i(`div`,{}),i(`menu`,{onClick:n,children:`登出`})]})},ti=({binding:e,...t})=>i(`textarea`,{...t,value:e.value,onInput:t=>e.value=t.currentTarget.value}),ni=()=>{let e=C(``),t=async()=>{await yr(e.value),Y(`提交成功!`),J()};return i(Z,{class:`p-2 flex flex-col`,title:`提交问题`,onBackClick:()=>J(),children:[i(`label`,{children:`请在这里描述你的问题:`}),i(ti,{name:`issue`,class:`grow`,binding:e,children:e.value}),i(`div`,{class:`flex gap-2 mt-2 pb-3 justify-end`,children:[i(Q,{class:`w-24 button btn-normal`,onClick:()=>J(),children:`取消`}),i(Q,{class:`w-24 button btn-prime`,onClick:t,children:`提交`})]})]})},ri=({options:e,cindex:t,class:n,activeClass:r})=>e.map((e,a)=>i(`div`,{onClick:e=>(e.stopPropagation(),t.value=a),class:`${n??``} ${t.value==a?r:``}`,children:e},a)),ii=()=>{let e=C(0),t=C([]),n=async()=>{let n=t.value[e.value],r=await xr(n._id);r.acknowledged&&r.deletedCount>0?(t.value=[...t.value.slice(0,e.value),...t.value.slice(e.value+1)],Y(`处理成功!`)):Y(`处理失败`)};return p(()=>{br().then(e=>e&&(t.value=e))},[]),i(Z,{class:`p-2 flex flex-col`,title:`处理问题`,onBackClick:()=>J(),children:[i(`div`,{class:`grow border p-2`,children:i(ri,{cindex:e,activeClass:`bg-[var(--bg-title)]`,options:t.value.map(e=>`${e.reporter}: ${e.issue}`)})}),i(`div`,{class:`flex gap-2 mt-2 pb-4 justify-end`,children:[i(Q,{class:`w-24 button btn-normal`,onClick:()=>J(),children:`取消`}),i(Q,{class:`w-24 button btn-prime`,onClick:n,children:`处理`})]})]})},ai=()=>{let e=C(`^common`),t=C(0),n=C([]),r=C(0),a=C([]),o=()=>{a.value=[...a.value,n.value[r.value]]},s=()=>{a.value=[...a.value.slice(0,t.value),...a.value.slice(t.value+1)]},c=async()=>{K.value=!0,await _r(a.value[t.value].wlid),await q(),K.value=!1},l=async()=>{await dr({format:yn,version:j(),books:a.value.map(e=>e.wlid)}),await q(),J()},u=async()=>{n.value=(await Tr()).filter(e=>e.wlid.startsWith(`common`)).sort(xn),a.value=await Er(e=>z.books.includes(e.wlid))};return Ue(()=>{(async()=>{let t=new RegExp(e.value);n.value=(await Er(e=>t.test(e.wlid)||e.disc&&t.test(e.disc))).sort(xn)})()}),p(()=>{u()},[]),i(Z,{class:`p-2 gap-2 flex flex-col`,title:`设置`,onBackClick:()=>J(),children:[i(`div`,{class:`flex gap-2`,children:[i(`label`,{for:`filter`,children:`设置过滤`}),i($,{class:`grow`,name:`filter`,binding:e})]}),i(`fieldset`,{class:`border rounded max-h-[50%] grow overflow-y-auto px-2`,children:[i(`legend`,{children:`可用的词书`}),i(ri,{class:`px-2`,cindex:r,options:n.value.map(e=>e.disc??e.wlid),activeClass:`bg-[var(--bg-title)]`})]}),i(`div`,{class:`flex justify-between gap-2`,children:[i(Q,{class:`button btn-normal grow`,onClick:o,children:`添加订阅`}),i(Q,{class:`button btn-normal grow`,onClick:s,children:`删除订阅`})]}),i(`fieldset`,{class:`border rounded max-h-[50%] grow overflow-y-auto px-2`,children:[i(`legend`,{children:`我订阅的词书`}),i(ri,{class:`px-2`,cindex:t,options:a.value.map(e=>e.disc??e.wlid),activeClass:`bg-[var(--bg-title)]`})]}),i(`div`,{class:`pb-3 flex justify-between gap-2`,children:[i(Q,{class:`button btn-normal grow`,onClick:c,children:`添加任务`}),i(Q,{class:`button btn-normal grow`,onClick:()=>J(),children:`取消`}),i(Q,{class:`button btn-prime grow`,onClick:l,children:`保存`})]})]})},oi=({binding:e,options:t,maxSuggest:n,class:r,onChange:a,...o})=>{let s=n??12,c=C([]),l=()=>setTimeout(()=>c.value=[],200),u=e=>{e.stopPropagation(),e.key==`Enter`&&l()&&a&&a()},ee=n=>{let r=e.value=n.currentTarget.value;if(!r)return c.value=[];let i=[],a=[];for(let e of t)if(e.startsWith(r)?i.push(e):e.includes(r)&&a.push(e),i.length>=s)break;c.value=i.concat(a.slice(0,s-i.length))},d=t=>{e.value=t.currentTarget.textContent??``,a&&a()};return i(`div`,{class:`inline-block relative ${r??``}`,children:[i(`input`,{class:`w-full px-2`,...o,value:e.value?.toString(),onInput:ee,onBlur:l,onKeyUp:u}),c.value.length?i(`div`,{class:`absolute border bg-[var(--bg-body)] z-100 top-[calc(100%_+_4px)] inset-x-0 px-2`,children:c.value.map((e,t)=>i(`div`,{onClick:d,children:e},t))}):``]})},si=({class:e,cindex:n,children:r})=>{let a=Array.isArray(r)?r:[r];return a.length?i(t,{children:[i(`header`,{class:`flex gap-2`,children:a?.map((t,r)=>i(`div`,{class:`min-w-16 px-2 py-1 cursor-pointer text-center rounded-t-md ${n.value==r?e??``:``}`,onClick:e=>(e.stopPropagation(),n.value=r),children:t.props.title??r},r))}),i(`section`,{class:`grow h-0 p-2 overflow-y-auto ${e??``}`,children:a[n.value]})]}):void 0},ci=({card:e,class:t})=>{let n=C(e.phonetic),r=C(e.trans),a=C(e.def),o=C(e.sound),s=se(null),c=()=>{o.value?s.current?.play():Y(`no sound to play!`)};return i(`div`,{class:`flex flex-col h-full gap-2 ${t??``}`,children:[i(`input`,{name:`phonetic`,placeholder:`phonetic`,value:n,onInput:t=>e.phonetic=n.value=t.currentTarget.value}),i(`textarea`,{name:`trans`,placeholder:`trans`,class:`h-32 grow`,value:r,onInput:t=>e.trans=r.value=t.currentTarget.value}),i(`textarea`,{name:`def`,placeholder:`def`,class:`h-32 grow`,value:a,onInput:t=>e.def=a.value=t.currentTarget.value}),i(`div`,{class:`flex`,children:[i(`textarea`,{name:`sound`,placeholder:`sound`,class:`h-32 grow`,value:o,onInput:t=>e.sound=o.value=t.currentTarget.value}),i(Q,{class:`button ml-2`,onClick:c,disabled:!o.value,children:i(`span`,{class:`text-[150%] i-material-symbols-chevron-right`})})]}),i(`audio`,{ref:s,src:o})]})};function li(){let e=C(``),t=C(0),n=C([]),r=async()=>{let r=await sr(e.value);if(!r)return Y(`Not Found`);t.value=0,n.value=r?.cards??[]},a=()=>{n.value=[...n.value,{}]},o=()=>{n.value.length>1&&(n.value=n.value.toSpliced(t.value,1))},s=async()=>{let t={word:e.value,cards:n.value};Y(await cr(t)?`success update word "${e.value}"!`:`Error`)},c=async()=>{Y(await lr(e.value)?`success delete word "${e.value}"!`:`Error`)};return p(()=>{H.value&&(e.value=H.value.word),r()},[]),i(Z,{class:`flex flex-col gap-2 p-2 text-lg`,title:`辞典编辑ˈʒɑɜæəɪʌʊˌ`,onBackClick:()=>J(),children:[i(`div`,{class:`flex gap-2`,children:[i(oi,{name:`word`,placeholder:`word`,class:`grow`,binding:e,options:zr,onChange:r}),i(Q,{class:`button btn-normal`,disabled:!e.value,onClick:r,children:`Search`})]}),i(`div`,{class:`flex flex-col grow`,children:i(si,{class:`bg-[var(--bg-tab)]`,cindex:t,children:n.value.map(e=>i(ci,{card:e},e))})}),i(`div`,{class:`flex justify-between gap-2 pb-4`,children:[i(Q,{class:`grow button btn-normal`,disabled:!e.value,onClick:a,children:`增卡`}),i(Q,{class:`grow button btn-normal`,disabled:!e.value||n.value.length<=1,onClick:o,children:`删卡`}),i(Q,{class:`grow button btn-normal`,disabled:!e.value,onClick:c,children:`删除`}),i(Q,{class:`grow button btn-normal`,disabled:!e.value,onClick:s,children:`更新`})]})]})}var ui=()=>{let e=C(``),t=async()=>{let t=e.peek().trim();if(!t)return;let n=await fr(t);if(!n)return Y(`Not Found!`);H.value=n,V.value=!0,U.value=-1,J(`#study`)};return i(Z,{class:`flex flex-col text-lg`,title:`词典`,onBackClick:()=>J(),children:i(oi,{autoCapitalize:`none`,type:`search`,name:`word`,placeholder:`word`,class:`m-2 w-[calc(100%-16px)]`,binding:e,onChange:t,options:zr})})},di=({card:e})=>e&&i(t,{children:[e.trans?.split(`
`).map((e,t)=>i(`p`,{class:`text-2xl`,children:e},t)),e.def?.split(`
`).map((e,t)=>e.startsWith(` `)?i(`p`,{class:`text-lg`,children:[` •`,e]},t):i(`p`,{class:`text-xl font-bold`,children:e},t))]}),fi=()=>{let e=async()=>{J(),await q(),await vr(),q()};if(!H.value)return J(),i(`div`,{});let t=C(0),n=C(0),r=C(0),a=se(null),o=e=>gr(H.value.word,e),s=async()=>{if(++U.value<=0)return e();let n=await mr(Lr.value);if(!n)return e();H.value=n,V.value=!1,t.value=0},c=async(e,t)=>{r.value+=e;let i=Math.abs(r.value-n.value);i<t&&(await We(30),await c(e,t))},l=async()=>{Y(`Get Server Data...`);let e=await pr(H.value.word);if(!e)return Y(`Not Found ${H.value.word}`);H.value=e},u=async()=>{Y(`Submiting...`,!1),await yr(H.value.word),Y(`Submit Success!`)},ee=async()=>{Y(await hr(H.value.word)?`删除成功`:`删除失败`)},d=e=>{if(e.stopPropagation(),!(e.ctrlKey||e.altKey))switch(e.key){case` `:f(e);break;case`N`:case`X`:case`n`:case`x`:V.value&&o().then(s);break;case`M`:case`Z`:case`m`:case`z`:V.value&&o(0).then(s);break}},te=e=>{e.stopPropagation(),e.preventDefault(),V.value&&(r.value=n.value=e.touches[0].clientY)},ne=e=>{e.stopPropagation(),e.preventDefault(),V.value&&(r.value=e.touches[0].clientY)},re=e=>{e.stopPropagation(),e.preventDefault(),V.value&&(r.value=n.value=0)},ie=async e=>{if(e.stopPropagation(),e.preventDefault(),V.value){let t=e.currentTarget.scrollHeight+60,i=r.value-n.value,a=Math.max(globalThis.innerHeight,t);Math.abs(i)>=globalThis.innerHeight/6?(i>0?(await o(0),await c(60,a)):(await o(),await c(-60,a)),await s()):Math.abs(i)<5&&f()}else f();r.value=n.value=0},f=e=>{e?.stopPropagation();let n=H.value.cards.length??0;n!==0&&(V.value?n===1?a.current?.play():t.value<n-1?t.value++:t.value=0:(V.value=!0)&&a.current?.play())};return i(Z,{title:`学习`,onBackClick:e,children:i(`div`,{class:`relative h-full p-2 flex flex-col`,style:{top:`${r.value-n.value}px`},children:[i(`div`,{class:`flex gap-4 text-[150%] items-center`,children:[i(X,{disabled:!V.value,title:`X/N`,onClick:()=>o().then(s),class:`i-material-symbols-check-circle text-green`}),i(X,{disabled:!V.value,title:`Z/M`,onClick:()=>o(0).then(s),class:`i-gridicons-cross-circle text-fuchsia`}),i(X,{disabled:!V.value,onClick:()=>o(13).then(s),class:`i-material-symbols-light-family-star text-yellow`}),i(X,{disabled:!V.value,onClick:ee,class:`i-material-symbols-delete-outline text-orange`}),i(`div`,{class:`grow text-center text-lg`,children:U.value>0?U.value:``}),i(X,{onClick:()=>a.current?.play(),class:`i-material-symbols-volume-up text-blue`}),Br()&&i(X,{onClick:()=>J(`#lookup`),class:`i-material-symbols-dictionary-outline text-cyan`}),i(X,{disabled:!V.value,onClick:u,class:`i-material-symbols-error text-red`}),i(X,{disabled:!V.value,onClick:l,class:`i-material-symbols-refresh text-purple`}),i(`div`,{class:`text-lg`,children:H.value.level})]}),i(`div`,{class:`grow h-0 pb-4 flex flex-col outline-none`,tabIndex:-1,onTouchStart:te,onTouchMove:ne,onTouchEnd:ie,onTouchCancel:re,onClick:f,onKeyUp:d,children:[i(`div`,{class:`py-2 flex gap-2 flex-wrap justify-between`,children:[i(`div`,{class:`text-4xl font-bold`,children:H.value.word}),V.value&&i(`div`,{class:`text-2xl flex items-center`,children:H.value.cards?.[t.value].phonetic})]}),V.value&&((H.value.cards.length??0)>1?i(si,{class:`bg-[var(--bg-tab)]`,cindex:t,children:H.value.cards.map((e,t)=>i(di,{card:e},`${H.value.word}${t}`))}):i(`div`,{class:`grow h-0 overflow-y-auto`,children:i(di,{card:H.value.cards?.[0]})})),i(`audio`,{ref:a,autoPlay:!0,src:H.value.cards.at(t.value)?.sound??``})]})]})})};const pi=/^[_\w-]+$/,mi=/^\+\d+$/;var hi=()=>{let e=C(``),t=()=>{J(`#signin`)},n=async()=>{if(!pi.test(W.value))return Y(`Name can only include _, letter, number and -`);let t=e.value.replaceAll(/[\(\) -]/g,``);if(!mi.test(t))return Y(`Invalid phone number!`);switch(await Ar(t,W.value)){case w.BadRequest:return Y(`用户名已注册`);case w.Conflict:return Y(`电话号码已注册`);case w.OK:Y(`注册成功，请登录`),J(`#signin`)}};return i(Z,{class:`p-2 flex flex-col`,title:`注册`,onBackClick:()=>J(),children:i(`div`,{class:`w-64 m-auto flex flex-col pb-4`,children:[i(`label`,{children:`用户名`}),i($,{name:`name`,placeholder:`name`,autoCapitalize:`none`,binding:W,class:`mb-3`}),i(`label`,{children:`手机号码(含国际区号)`}),i($,{name:`phone`,placeholder:`+1(987)765-5432`,autoCapitalize:`none`,binding:e,class:`mb-3`}),i(`div`,{class:`text-right mb-3`,children:[`已经注册，请`,i(Q,{class:`button btn-normal mx-1`,onClick:t,children:`登录`})]}),i(Q,{class:`button btn-prime py-1`,onClick:n,children:`注册`})]})})};let gi;var _i=()=>{let e=C(``),t=C(0),n=C(!0),r=async()=>{switch(n.value=!1,t.value=60,gi=setInterval(()=>{--t.value<=0&&(clearInterval(gi),gi=void 0,n.value=!0)},1e3),await kr(W.value)){case w.BadRequest:return Y(`请输入用户名`);case w.NotFound:return Y(`未找到用户`);case w.FailedDependency:return Y(`此用户未注册手机号码`);case w.TooEarly:return Y(`请求OTP过于频繁`);case w.OK:return Y(`OTP已发送`);default:return Y(`未知服务器错误`)}},a=async()=>{switch(await jr(W.value,e.value)){case w.BadRequest:return Y(`请输入用户名和密码`);case w.NotFound:return Y(`未找到用户`);case w.Unauthorized:return Y(`错误的密码`);case w.OK:Y(`已登录`),gi&&clearInterval(gi),location.reload()}};return i(Z,{class:`p-2 flex flex-col`,title:`登录`,onBackClick:()=>J(),children:i(`div`,{class:`w-64 m-auto flex flex-col`,children:[i(`label`,{for:`name`,children:`用户名`}),i($,{name:`name`,class:`mb-3`,placeholder:`name`,autoCapitalize:`none`,binding:W}),i(`label`,{for:`code`,children:`临时密码`}),i($,{name:`code`,placeholder:`code`,autoCapitalize:`none`,binding:e}),i(X,{class:`btn-anchor block text-right mb-3`,onClick:r,disabled:!n.value,children:[`Send One-Time Passcode `,t.value>0?`(${t.value})`:``]}),i(Q,{class:`button btn-prime`,onClick:a,children:`登录`})]})})},vi=()=>{let e=C(``),t=async()=>{let t=await wr(e.value);Y(t?`上传成功`:`上传失败`)};return i(Z,{class:`flex flex-col p-2`,title:`拼写忽略`,onBackClick:()=>J(),children:[i(`textarea`,{class:`grow`,value:e,onChange:t=>e.value=t.currentTarget.value}),i(`div`,{class:`flex justify-end gap-2 my-2`,children:[i(Q,{class:`w-32 button btn-normal`,onClick:()=>J(),children:`取消`}),i(Q,{class:`w-32 button btn-prime`,onClick:t,children:`上传`})]})]})},yi=()=>{let e=C(0),t=C([]),n=()=>{G.value=void 0,J(`#wordlist`)},r=async()=>{Y(await Or(t.value[e.value].wlid)?`删除成功`:`删除失败`),t.value=[...t.value.slice(0,e.value),...t.value.slice(e.value+1)]},a=()=>{G.value=t.value[e.value],J(`#wordlist`)},o=async()=>{t.value=(await Tr()).filter(e=>e.wlid.startsWith(B.value)).sort(xn)};return p(()=>{o()},[]),i(Z,{class:`p-2 flex flex-col gap-2`,title:`我的词书`,onBackClick:()=>J(),children:[i(`div`,{class:`h-0 grow border overflow-y-auto`,children:i(ri,{cindex:e,options:t.value.map(e=>e.disc??e.wlid),class:`px-2`,activeClass:`bg-[var(--bg-title)]`})}),i(`div`,{class:`pb-3 flex justify-end gap-2`,children:[i(Q,{class:`w-24 button btn-normal`,name:`new`,onClick:n,children:`新建`}),i(Q,{class:`w-24 button btn-normal`,name:`delete`,disabled:!t.value.length,onClick:r,children:`删除`}),i(Q,{class:`w-24 button btn-normal`,name:`update`,disabled:!t.value.length,onClick:a,children:`更新`})]})]})},bi=({label:e,binding:t,disabled:n,class:r,onChange:a,...o})=>{let s=e=>{e.stopPropagation(),n||(t.value=!t.value,a&&a(e))};return i(`div`,{class:`${n?`opacity-50`:``} ${r??``}`,"aria-disabled":n,onClick:s,...o,children:[i(`span`,{class:`text-[150%] ${t.value?`i-material-symbols-check-box-outline`:`i-material-symbols-check-box-outline-blank`}`}),e]})},xi=()=>{let e=C(``),n=C(``),r=C(``),a=C(!1),o=C(``),s=async()=>{let t=`${B.value}/${e}`,n=await Tn(t);n&&(r.value=Array.from(n.wordSet).sort().join(`
`))},c=async()=>{e.value=e.value.replaceAll(`/`,`-`);let[t,i]=await Dr(e.value,r.value,n.value,a.value?`1`:void 0);switch(t){case w.BadRequest:return Y(`Error: 无名称或无内容`);case w.NotAcceptable:return o.value=Object.entries(i).map(([e,t])=>`${e}: ${t.join(`,`)}`).join(`
`),Y(`未通过拼写检查`);case w.OK:Y(`词书上传成功`),J()}};return p(()=>{G.value&&(e.value=Cn(G.value.wlid)[1],G.value.disc&&(n.value=G.value.disc))},[]),i(Z,{class:`flex flex-col p-2`,title:`上传我的词书`,onBackClick:()=>J(),children:[i(`label`,{for:`name`,children:`名称`}),i($,{name:`name`,binding:e}),i(`label`,{for:`disc`,class:`mt-2`,children:`描述`}),i($,{name:`disc`,binding:n}),i(`label`,{for:`words`,class:`mt-2`,children:`词表`}),i(ti,{name:`words`,class:`grow`,binding:r}),o.value.length?i(t,{children:[i(`label`,{for:`replace`,class:`text-red-500 mt-2`,children:`请考虑用下面的词替换`}),i(`textarea`,{name:`replace`,class:`grow`,value:o,onChange:e=>o.value=e.currentTarget.value})]}):void 0,i(`div`,{class:`flex gap-2 my-2`,children:[i(bi,{binding:a,label:`Replace`}),i(`div`,{class:`grow`}),i(Q,{class:`w-24 button btn-normal`,onClick:s,children:`下载`}),i(Q,{class:`w-24 button btn-prime`,onClick:c,children:`上传`})]})]})},Si=e=>i(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 128 128`,...e,children:i(`g`,{children:[i(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#000000`}),i(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#555555`,transform:`rotate(45,64,64)`}),i(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#949494`,transform:`rotate(90,64,64)`}),i(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#cccccc`,transform:`rotate(135,64,64)`}),i(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#e1e1e1`,transform:`rotate(180,64,64)`}),i(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#e1e1e1`,transform:`rotate(225,64,64)`}),i(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#e1e1e1`,transform:`rotate(270,64,64)`}),i(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#e1e1e1`,transform:`rotate(315,64,64)`}),i(`animateTransform`,{attributeName:`transform`,type:`rotate`,values:`45 64 64;90 64 64;135 64 64;180 64 64;225 64 64;270 64 64;315 64 64;0 64 64;`,calcMode:`discrete`,dur:`720ms`,repeatCount:`indefinite`})]})}),Ci=()=>{let e=new Map;return e.set(`#home`,i(Xr,{})),e.set(`#help`,i(Zr,{})),e.set(`#about`,i($r,{})),e.set(`#menu`,i(ei,{})),e.set(`#issue`,i(ni,{})),e.set(`#issues`,i(ii,{})),e.set(`#setting`,i(ai,{})),e.set(`#lookup`,i(li,{})),e.set(`#search`,i(ui,{})),e.set(`#study`,i(fi,{})),e.set(`#signup`,i(hi,{})),e.set(`#signin`,i(_i,{})),e.set(`#ignore`,i(vi,{})),e.set(`#wordlists`,i(yi,{})),e.set(`#wordlist`,i(xi,{})),p(()=>{Ur()},[]),i(t,{children:[e.get(Rr.value),K.value&&i(`div`,{class:`absolute inset-0 bg-[var(--bg-half)] flex justify-center content-center flex-wrap`,children:i(Si,{class:`w-16 h-16`})})]})};e(i(Ci,{}),document.getElementById(`root`));