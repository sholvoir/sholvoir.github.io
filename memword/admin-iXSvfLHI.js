import{A as e,M as t,N as n,P as r,Q as i,R as a,U as o,W as s,a9 as c,ab as l,ac as u,ad as d,ae as f,b as p,c as m,d as h,e as g,f as _,h as v,n as y}from"./tab-BFe7gOXo.js";var b=({card:e,class:t})=>{let n=c(e.phonetic),r=c(JSON.stringify(e.meanings,void 0,3)),i=c(e.sound),a=u(null),o=()=>{i.value?a.current?.play():y(`no sound to play!`)};return v(`div`,{class:`flex flex-col h-full gap-2 ${t??``}`,children:[v(`input`,{name:`phonetic`,placeholder:`phonetic`,value:n,onInput:t=>e.phonetic=n.value=t.currentTarget.value}),v(`textarea`,{name:`meanings`,placeholder:`meanings`,class:`h-32 grow`,value:r,onChange:t=>e.meanings=JSON.parse(r.value=t.currentTarget.value)}),v(`div`,{class:`shrink flex`,children:[v(`textarea`,{name:`sound`,rows:1,placeholder:`sound`,class:`grow`,value:i,onInput:t=>e.sound=i.value=t.currentTarget.value}),v(_,{class:`button ml-2`,onClick:o,disabled:!i.value,children:v(`span`,{class:`text-[150%] i-material-symbols-chevron-right`})})]}),v(`audio`,{ref:a,src:i})]})};function x(){let u=c(!1),d=c([]),y=c(``),x=()=>y.value=``,S=(e,t=!0)=>(y.value=e,t&&setTimeout(x,3e3)),C=c(``),w=async()=>{let e=await o(C.value);S(e?`上传成功`:`上传失败`)},T=c(``),E=c(`_`),D=c(0),O=c([]),k=async()=>{let e=encodeURIComponent(T.value);window.open(`https://www.oxfordlearnersdictionaries.com/us/definition/english/${e}`,`oxfordlearnersdictionaries`),window.open(`https://www.merriam-webster.com/dictionary/${e}`,`merriam-webster`);let t=await s(T.value);if(!t)return S(`Not Found`);E.value=t.word,D.value=0,O.value=t?.cards??[]},A=()=>{O.value=[...O.value,{}]},j=()=>{O.value.length>1&&(O.value=O.value.toSpliced(D.value,1))},M=async()=>{let t={word:T.value,cards:O.value};S(await e(t)?`success update word "${T.value}"!`:`Error`)},N=async()=>{S(await r(T.value)?`success delete word "${T.value}"!`:`Error`)},P=c(0),F=c([]),I=async()=>{let e=await n();e&&(F.value=e,L())},L=()=>{let e=F.value[P.value];e&&(T.value=e.issue,k())},R=async()=>{let e=F.value[P.value],t=await i(e._id);t.acknowledged&&t.deletedCount>0?(F.value=[...F.value.slice(0,P.value),...F.value.slice(P.value+1)],P.value>=F.value.length&&(P.value=F.value.length-1),F.value.length?L():(T.value=``,E.value=`_`,O.value=[],D.value=0,I()),S(`处理成功!`)):S(`处理失败`)},z=async()=>{(u.value=await a()===`hua`)&&(d.value=await t()??[],await I())};return l(()=>{z()},[]),u.value&&v(f,{children:[v(`div`,{class:`text-center bg-[var(--bg-title)] p-1`,children:y.value||`系统管理-${g} ˈʒɑɜæəɪʌʊʃˌ`}),v(`div`,{class:`body grow flex flex-col gap-2 p-2`,children:[v(`div`,{class:`h-4 grow-4 flex flex-col gap-2`,children:[v(`div`,{class:`flex gap-2`,children:[v(m,{name:`word`,placeholder:`word`,class:`grow`,binding:T,options:d.value,onChange:k}),v(_,{class:`button btn-normal`,disabled:!T.value,onClick:k,children:`Search`})]}),v(`div`,{class:`flex flex-col grow`,children:v(p,{class:`bg-[var(--bg-tab)]`,cindex:D,children:O.value.map(e=>v(b,{card:e},e))})}),v(`div`,{class:`flex justify-between gap-2`,children:[v(_,{class:`grow button btn-normal`,disabled:T.value!=E.value,onClick:A,children:`增卡`}),v(_,{class:`grow button btn-normal`,disabled:T.value!=E.value||O.value.length<=1,onClick:j,children:`删卡`}),v(_,{class:`grow button btn-normal`,disabled:T.value!=E.value,onClick:N,children:`删除`}),v(_,{class:`grow button btn-normal`,disabled:T.value!=E.value,onClick:M,children:`更新`})]})]}),v(`div`,{class:`h-1 grow flex gap-2`,children:[v(`div`,{class:`w-1 grow flex flex-col gap-2`,children:[v(`textarea`,{class:`grow`,value:C,onChange:e=>C.value=e.currentTarget.value}),v(`div`,{class:`flex justify-end`,children:v(_,{class:`w-24 button btn-normal`,onClick:w,children:`拼写忽略`})})]}),v(`div`,{class:`w-1 grow flex flex-col gap-2`,children:[v(`div`,{class:`grow border`,children:v(h,{class:`px-2`,cindex:P,activeClass:`bg-[var(--bg-title)]`,options:F.value.map(e=>`${e.reporter}: ${e.issue}`),onClick:L})}),v(`div`,{class:`flex justify-end gap-2`,children:[v(_,{class:`w-24 button btn-normal`,onClick:I,children:`加载问题`}),v(_,{class:`w-24 button btn-normal`,onClick:R,children:`处理问题`})]})]})]})]})]})}d(v(x,{}),document.getElementById(`root`));