import{API_URL as e,version as t}from"./package-B3hxJLrk.js";import{E as n,k as r,l as i,t as a,u as o,x as s}from"./jsxRuntime.module-RSGa2Ug1.js";var c,l,u,ee,d=0,te=[],f=i,ne=f.__b,re=f.__r,p=f.diffed,ie=f.__c,ae=f.unmount,oe=f.__;function se(e,t){f.__h&&f.__h(l,e,d||t),d=0;var n=l.__H||={__:[],__h:[]};return e>=n.__.length&&n.__.push({}),n.__[e]}function m(e,t){var n=se(c++,3);!f.__s&&he(n.__H,t)&&(n.__=e,n.u=t,l.__H.__h.push(n))}function ce(e){return d=5,le(function(){return{current:e}},[])}function le(e,t){var n=se(c++,7);return he(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function ue(){for(var e;e=te.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(pe),e.__H.__h.forEach(me),e.__H.__h=[]}catch(t){e.__H.__h=[],f.__e(t,e.__v)}}f.__b=function(e){l=null,ne&&ne(e)},f.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),oe&&oe(e,t)},f.__r=function(e){re&&re(e),c=0;var t=(l=e.__c).__H;t&&(u===l?(t.__h=[],l.__h=[],t.__.forEach(function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0})):(t.__h.forEach(pe),t.__h.forEach(me),t.__h=[],c=0)),u=l},f.diffed=function(e){p&&p(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(te.push(t)!==1&&ee===f.requestAnimationFrame||((ee=f.requestAnimationFrame)||fe)(ue)),t.__H.__.forEach(function(e){e.u&&(e.__H=e.u),e.u=void 0})),u=l=null},f.__c=function(e,t){t.some(function(e){try{e.__h.forEach(pe),e.__h=e.__h.filter(function(e){return!e.__||me(e)})}catch(n){t.some(function(e){e.__h&&=[]}),t=[],f.__e(n,e.__v)}}),ie&&ie(e,t)},f.unmount=function(e){ae&&ae(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(e){try{pe(e)}catch(e){t=e}}),n.__H=void 0,t&&f.__e(t,n.__v))};var de=typeof requestAnimationFrame==`function`;function fe(e){var t,n=function(){clearTimeout(r),de&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);de&&(t=requestAnimationFrame(n))}function pe(e){var t=l,n=e.__c;typeof n==`function`&&(e.__c=void 0,n()),l=t}function me(e){var t=l;e.__c=e.__(),l=t}function he(e,t){return!e||e.length!==t.length||t.some(function(t,n){return t!==e[n]})}var ge=Symbol.for(`preact-signals`);function _e(){if(_>1)_--;else{for(var e,t=!1;g!==void 0;){var n=g;for(g=void 0,be++;n!==void 0;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&Ce(n))try{n.c()}catch(n){t||(e=n,t=!0)}n=r}}if(be=0,_--,t)throw e}}function ve(e){if(_>0)return e();_++;try{return e()}finally{_e()}}var h=void 0;function ye(e){var t=h;h=void 0;try{return e()}finally{h=t}}var g=void 0,_=0,be=0,xe=0;function Se(e){if(h!==void 0){var t=e.n;if(t===void 0||t.t!==h)return t={i:0,S:e,p:h.s,n:void 0,t:h,e:void 0,x:void 0,r:t},h.s!==void 0&&(h.s.n=t),h.s=t,e.n=t,32&h.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=h.s,t.n=void 0,h.s.n=t,h.s=t),t}}function v(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=t?.watched,this.Z=t?.unwatched}v.prototype.brand=ge,v.prototype.h=function(){return!0},v.prototype.S=function(e){var t=this,n=this.t;n!==e&&e.e===void 0&&(e.x=n,this.t=e,n===void 0?ye(function(){var e;(e=t.W)==null||e.call(t)}):n.e=e)},v.prototype.U=function(e){var t=this;if(this.t!==void 0){var n=e.e,r=e.x;n!==void 0&&(n.x=r,e.e=void 0),r!==void 0&&(r.e=n,e.x=void 0),e===this.t&&(this.t=r,r===void 0&&ye(function(){var e;(e=t.Z)==null||e.call(t)}))}},v.prototype.subscribe=function(e){var t=this;return S(function(){var n=t.value,r=h;h=void 0;try{e(n)}finally{h=r}})},v.prototype.valueOf=function(){return this.value},v.prototype.toString=function(){return this.value+``},v.prototype.toJSON=function(){return this.value},v.prototype.peek=function(){var e=h;h=void 0;try{return this.value}finally{h=e}},Object.defineProperty(v.prototype,`value`,{get:function(){var e=Se(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(be>100)throw Error(`Cycle detected`);this.v=e,this.i++,xe++,_++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{_e()}}}});function y(e,t){return new v(e,t)}function Ce(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function we(e){for(var t=e.s;t!==void 0;t=t.n){var n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function Te(e){for(var t=e.s,n=void 0;t!==void 0;){var r=t.p;t.i===-1?(t.S.U(t),r!==void 0&&(r.n=t.n),t.n!==void 0&&(t.n.p=r)):n=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=r}e.s=n}function b(e,t){v.call(this,void 0),this.x=e,this.s=void 0,this.g=xe-1,this.f=4,this.W=t?.watched,this.Z=t?.unwatched}b.prototype=new v,b.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===xe))return!0;if(this.g=xe,this.f|=1,this.i>0&&!Ce(this))return this.f&=-2,!0;var e=h;try{we(this),h=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(e){this.v=e,this.f|=16,this.i++}return h=e,Te(this),this.f&=-2,!0},b.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}v.prototype.S.call(this,e)},b.prototype.U=function(e){if(this.t!==void 0&&(v.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}},b.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}},Object.defineProperty(b.prototype,`value`,{get:function(){if(1&this.f)throw Error(`Cycle detected`);var e=Se(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function Ee(e,t){return new b(e,t)}function De(e){var t=e.u;if(e.u=void 0,typeof t==`function`){_++;var n=h;h=void 0;try{t()}catch(t){throw e.f&=-2,e.f|=8,Oe(e),t}finally{h=n,_e()}}}function Oe(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,De(e)}function ke(e){if(h!==this)throw Error(`Out-of-order effect`);Te(this),h=e,this.f&=-2,8&this.f&&Oe(this),_e()}function x(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}x.prototype.c=function(){var e=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t==`function`&&(this.u=t)}finally{e()}},x.prototype.S=function(){if(1&this.f)throw Error(`Cycle detected`);this.f|=1,this.f&=-9,De(this),we(this),_++;var e=h;return h=this,ke.bind(this,e)},x.prototype.N=function(){2&this.f||(this.f|=2,this.o=g,g=this)},x.prototype.d=function(){this.f|=8,1&this.f||Oe(this)},x.prototype.dispose=function(){this.d()};function S(e){var t=new x(e);try{t.c()}catch(e){throw t.d(),e}return t.d.bind(t)}var Ae,je,Me,Ne=[],Pe=[];S(function(){Ae=this.N})();function C(e,t){i[e]=t.bind(null,i[e]||function(){})}function Fe(e){Me&&Me(),Me=e&&e.S()}function Ie(e){var t=this,n=e.data,r=w(n);r.value=n;var i=le(function(){for(var e=t,n=t.__v;n=n.__;)if(n.__c){n.__c.__$f|=4;break}var i=Ee(function(){var e=r.value.value;return e===0?0:!0===e?``:e||``}),o=Ee(function(){return!Array.isArray(i.value)&&!a(i.value)}),s=S(function(){if(this.N=Ue,o.value){var t=i.value;e.__v&&e.__v.__e&&e.__v.__e.nodeType===3&&(e.__v.__e.data=t)}}),c=t.__$u.d;return t.__$u.d=function(){s(),c.call(this)},[o,i]},[]),o=i[0],s=i[1];return o.value?s.peek():s.value}Ie.displayName=`_st`,Object.defineProperties(v.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Ie},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}}),C(`__b`,function(e,t){if(typeof t.type==`string`){var n,r=t.props;for(var i in r)if(i!==`children`){var a=r[i];a instanceof v&&(n||(t.__np=n={}),n[i]=a,r[i]=a.peek())}}e(t)}),C(`__r`,function(e,t){if(t.type!==r){Fe();var n,i=t.__c;i&&(i.__$f&=-2,(n=i.__$u)===void 0&&(i.__$u=n=function(e){var t;return S(function(){t=this}),t.c=function(){i.__$f|=1,i.setState({})},t}())),je=i,Fe(n)}e(t)}),C(`__e`,function(e,t,n,r){Fe(),je=void 0,e(t,n,r)}),C(`diffed`,function(e,t){Fe(),je=void 0;var n;if(typeof t.type==`string`&&(n=t.__e)){var r=t.__np,i=t.props;if(r){var a=n.U;if(a)for(var o in a){var s=a[o];s!==void 0&&!(o in r)&&(s.d(),a[o]=void 0)}else a={},n.U=a;for(var c in r){var l=a[c],u=r[c];l===void 0?(l=Le(n,c,u,i),a[c]=l):l.o(u,i)}}}e(t)});function Le(e,t,n,r){var i=t in e&&e.ownerSVGElement===void 0,a=y(n);return{o:function(e,t){a.value=e,r=t},d:S(function(){this.N=Ue;var n=a.value.value;r[t]!==n&&(r[t]=n,i?e[t]=n:n?e.setAttribute(t,n):e.removeAttribute(t))})}}C(`unmount`,function(e,t){if(typeof t.type==`string`){var n=t.__e;if(n){var r=n.U;if(r)for(var i in n.U=void 0,r){var a=r[i];a&&a.d()}}}else{var o=t.__c;if(o){var s=o.__$u;s&&(o.__$u=void 0,s.d())}}e(t)}),C(`__h`,function(e,t,n,r){(r<3||r===9)&&(t.__$f|=2),e(t,n,r)}),s.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u,r=n&&n.s!==void 0;for(var i in t)return!0;if(this.__f||typeof this.u==`boolean`&&!0===this.u){var a=2&this.__$f;if(!(r||a||4&this.__$f)||1&this.__$f)return!0}else if(!(r||4&this.__$f)||3&this.__$f)return!0;for(var o in e)if(o!==`__source`&&e[o]!==this.props[o])return!0;for(var s in this.props)if(!(s in e))return!0;return!1};function w(e,t){return le(function(){return y(e,t)},[])}var Re=typeof requestAnimationFrame>`u`?setTimeout:function(e){var t=function(){clearTimeout(n),cancelAnimationFrame(r),e()},n=setTimeout(t,35),r=requestAnimationFrame(t)},ze=function(e){queueMicrotask(function(){queueMicrotask(e)})};function Be(){ve(function(){for(var e;e=Ne.shift();)Ae.call(e)})}function Ve(){Ne.push(this)===1&&(i.requestAnimationFrame||Re)(Be)}function He(){ve(function(){for(var e;e=Pe.shift();)Ae.call(e)})}function Ue(){Pe.push(this)===1&&(i.requestAnimationFrame||ze)(He)}function We(e){var t=ce(e);t.current=e,m(function(){return S(function(){return this.N=Ve,t.current()})},[])}const Ge=e=>new Promise(t=>setTimeout(t,e)),Ke=`0.2.1`,qe=()=>[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Je=(e,t,n)=>({time:e,total:qe(),task:qe(),wlid:t,disc:n}),Ye=()=>({format:Ke,stats:[]}),Xe=(e,t)=>{e.total[t.level]++,t.next<e.time&&e.task[t.level]++},Ze=[`未学`,`新学`,`中等`,`熟悉`,`熟练`,`完成`],Qe=e=>[e[0],e[1]+e[2]+e[3]+e[4]+e[5],e[6]+e[7]+e[8]+e[9],e[10]+e[11]+e[12],e[13]+e[14],e[15]];var T;(function(e){e[e.Continue=100]=`Continue`,e[e.SwitchingProtocols=101]=`SwitchingProtocols`,e[e.Processing=102]=`Processing`,e[e.EarlyHints=103]=`EarlyHints`,e[e.OK=200]=`OK`,e[e.Created=201]=`Created`,e[e.Accepted=202]=`Accepted`,e[e.NonAuthoritativeInfo=203]=`NonAuthoritativeInfo`,e[e.NoContent=204]=`NoContent`,e[e.ResetContent=205]=`ResetContent`,e[e.PartialContent=206]=`PartialContent`,e[e.MultiStatus=207]=`MultiStatus`,e[e.AlreadyReported=208]=`AlreadyReported`,e[e.IMUsed=226]=`IMUsed`,e[e.MultipleChoices=300]=`MultipleChoices`,e[e.MovedPermanently=301]=`MovedPermanently`,e[e.Found=302]=`Found`,e[e.SeeOther=303]=`SeeOther`,e[e.NotModified=304]=`NotModified`,e[e.UseProxy=305]=`UseProxy`,e[e.TemporaryRedirect=307]=`TemporaryRedirect`,e[e.PermanentRedirect=308]=`PermanentRedirect`,e[e.BadRequest=400]=`BadRequest`,e[e.Unauthorized=401]=`Unauthorized`,e[e.PaymentRequired=402]=`PaymentRequired`,e[e.Forbidden=403]=`Forbidden`,e[e.NotFound=404]=`NotFound`,e[e.MethodNotAllowed=405]=`MethodNotAllowed`,e[e.NotAcceptable=406]=`NotAcceptable`,e[e.ProxyAuthRequired=407]=`ProxyAuthRequired`,e[e.RequestTimeout=408]=`RequestTimeout`,e[e.Conflict=409]=`Conflict`,e[e.Gone=410]=`Gone`,e[e.LengthRequired=411]=`LengthRequired`,e[e.PreconditionFailed=412]=`PreconditionFailed`,e[e.ContentTooLarge=413]=`ContentTooLarge`,e[e.URITooLong=414]=`URITooLong`,e[e.UnsupportedMediaType=415]=`UnsupportedMediaType`,e[e.RangeNotSatisfiable=416]=`RangeNotSatisfiable`,e[e.ExpectationFailed=417]=`ExpectationFailed`,e[e.Teapot=418]=`Teapot`,e[e.MisdirectedRequest=421]=`MisdirectedRequest`,e[e.UnprocessableEntity=422]=`UnprocessableEntity`,e[e.Locked=423]=`Locked`,e[e.FailedDependency=424]=`FailedDependency`,e[e.TooEarly=425]=`TooEarly`,e[e.UpgradeRequired=426]=`UpgradeRequired`,e[e.PreconditionRequired=428]=`PreconditionRequired`,e[e.TooManyRequests=429]=`TooManyRequests`,e[e.RequestHeaderFieldsTooLarge=431]=`RequestHeaderFieldsTooLarge`,e[e.UnavailableForLegalReasons=451]=`UnavailableForLegalReasons`,e[e.InternalServerError=500]=`InternalServerError`,e[e.NotImplemented=501]=`NotImplemented`,e[e.BadGateway=502]=`BadGateway`,e[e.ServiceUnavailable=503]=`ServiceUnavailable`,e[e.GatewayTimeout=504]=`GatewayTimeout`,e[e.HTTPVersionNotSupported=505]=`HTTPVersionNotSupported`,e[e.VariantAlsoNegotiates=506]=`VariantAlsoNegotiates`,e[e.InsufficientStorage=507]=`InsufficientStorage`,e[e.LoopDetected=508]=`LoopDetected`,e[e.NotExtended=510]=`NotExtended`,e[e.NetworkAuthenticationRequired=511]=`NetworkAuthenticationRequired`})(T||={});const E=(e,t=`POST`,n)=>{let r=new Headers(n);return r.has(`Content-Type`)||r.append(`Content-Type`,`application/json`),{method:t,headers:r,body:JSON.stringify(e)}},D=async(e,t,n)=>{let r=new URL(e,location.href);if(t)for(let[e,n]of Object.entries(t))n&&r.searchParams.append(e,n);return await fetch(r,n)},$e=async(e,t,n)=>{let r=await D(e,t,n);if(r.ok)return await r.json()},et=e=>new Promise(t=>{let n=new FileReader;n.readAsDataURL(e),n.onloadend=()=>t(n.result)}),tt=new TextEncoder;function nt(e){let t=typeof e;return t===`object`?e===null?`null`:e?.constructor?.name??`object`:t}function rt(e){if(typeof e==`string`)return tt.encode(e);if(e instanceof Uint8Array)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);throw TypeError(`The input must be a Uint8Array, a string, or an ArrayBuffer. Received a value of the type ${nt(e)}.`)}const O=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`.split(``);function it(e){let t=rt(e),n=``,r,i=t.length;for(r=2;r<i;r+=3)n+=O[t[r-2]>>2],n+=O[(t[r-2]&3)<<4|t[r-1]>>4],n+=O[(t[r-1]&15)<<2|t[r]>>6],n+=O[t[r]&63];return r===i+1&&(n+=O[t[r-2]>>2],n+=O[(t[r-2]&3)<<4],n+=`==`),r===i&&(n+=O[t[r-2]>>2],n+=O[(t[r-2]&3)<<4|t[r-1]>>4],n+=O[(t[r-1]&15)<<2],n+=`=`),n}function at(e){let t=atob(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return r}function ot(e){if(e.length%4==2)return e+`==`;if(e.length%4==3)return e+`=`;if(e.length%4==1)throw TypeError(`Illegal base64url string!`);return e}function st(e){if(!/^[-_A-Z0-9]*?={0,2}$/i.test(e))throw TypeError(`Failed to decode base64url: invalid character`);return ot(e).replace(/\-/g,`+`).replace(/_/g,`/`)}function ct(e){return e.endsWith(`=`)?e.endsWith(`==`)?e.replace(/\+/g,`-`).replace(/\//g,`_`).slice(0,-2):e.replace(/\+/g,`-`).replace(/\//g,`_`).slice(0,-1):e.replace(/\+/g,`-`).replace(/\//g,`_`)}function lt(e){return ct(it(e))}function ut(e){return at(st(e))}const dt=new TextEncoder,ft=new TextDecoder;function pt(e){return Array.isArray(e)}function mt(e){return e!==void 0}function ht(e){return e!==null}function gt(e){return typeof e!=`number`}function _t(e){return typeof e!=`string`}function vt(e){return e===null}function yt(e){return typeof e==`number`}function bt(e){return e!==!0}function xt(e){return typeof e==`object`&&!!e&&Array.isArray(e)===!1}function k(e){return typeof e==`string`}function St(e){return e===void 0}function Ct(e){return k(e.hash?.name)}function wt(e){return k(e.namedCurve)}function Tt(e,t){if(e===`none`){if(ht(t))throw Error(`The alg '${e}' does not allow a key.`);return!0}else{if(!t)throw Error(`The alg '${e}' demands a key.`);let n=t.algorithm,r=Et(e);if(n.name===r.name){if(Ct(n))return n.hash.name===r.hash.name;if(wt(n))return n.namedCurve===r.namedCurve}return!1}}function Et(e){switch(e){case`HS256`:return{hash:{name:`SHA-256`},name:`HMAC`};case`HS384`:return{hash:{name:`SHA-384`},name:`HMAC`};case`HS512`:return{hash:{name:`SHA-512`},name:`HMAC`};case`PS256`:return{hash:{name:`SHA-256`},name:`RSA-PSS`,saltLength:32};case`PS384`:return{hash:{name:`SHA-384`},name:`RSA-PSS`,saltLength:48};case`PS512`:return{hash:{name:`SHA-512`},name:`RSA-PSS`,saltLength:64};case`RS256`:return{hash:{name:`SHA-256`},name:`RSASSA-PKCS1-v1_5`};case`RS384`:return{hash:{name:`SHA-384`},name:`RSASSA-PKCS1-v1_5`};case`RS512`:return{hash:{name:`SHA-512`},name:`RSASSA-PKCS1-v1_5`};case`ES256`:return{hash:{name:`SHA-256`},name:`ECDSA`,namedCurve:`P-256`};case`ES384`:return{hash:{name:`SHA-384`},name:`ECDSA`,namedCurve:`P-384`};default:throw Error(`The jwt's alg '${e}' is not supported.`)}}async function Dt(e,t,n,r){return vt(t)?e.length===0:await crypto.subtle.verify(Et(n),t,e,dt.encode(r))}async function Ot(e,t,n){return vt(t)?``:lt(new Uint8Array(await crypto.subtle.sign(Et(e),t,dt.encode(n))))}function kt(e,t){return e+t<Date.now()/1e3}function At(e,t){return e-t>Date.now()/1e3}function jt(e){return e.length===3}function Mt(...e){return e.some(e=>mt(e)&&gt(e))}function Nt(e,{expLeeway:t=1,nbfLeeway:n=1,ignoreExp:r,ignoreNbf:i}={}){if(Mt(e.exp,e.nbf))throw Error(`The jwt has an invalid 'exp' or 'nbf' claim.`);if(yt(e.exp)&&bt(r)&&kt(e.exp,t))throw RangeError(`The jwt is expired.`);if(yt(e.nbf)&&bt(i)&&At(e.nbf,n))throw RangeError(`The jwt is used too early.`)}function Pt(e){return St(e)||k(e)?!0:pt(e)&&e.every(k)}function Ft(e,t){if(Pt(e)){if(St(e))throw Error(`The jwt has no 'aud' claim.`);let n=k(e)?[e]:e,r=k(t)?[t]:t;if(!n.some(e=>pt(r)?r.includes(e):r.test(e)))throw Error(`The identification with the value in the 'aud' claim has failed.`)}else throw Error(`The jwt has an invalid 'aud' claim.`)}function It(e){try{let t=e.split(`.`).map(ut).map((e,t)=>t===0||t===1?JSON.parse(ft.decode(e)):e);if(jt(t))return t;throw Error()}catch{throw Error(`The serialization of the jwt is invalid.`)}}function Lt([e,t,n],r){if(_t(e?.alg))throw Error(`The jwt's 'alg' header parameter value must be a string.`);if(xt(t))return Nt(t,r),mt(r?.audience)&&Ft(t.aud,r.audience),{header:e,payload:t,signature:n};throw Error(`The jwt claims set is not a JSON object.`)}async function Rt(e,t,n){let{header:r,payload:i,signature:a}=Lt(It(e),n);if(Tt(r.alg,t)){if(!await Dt(a,t,r.alg,e.slice(0,e.lastIndexOf(`.`))))throw Error(`The jwt's signature does not match the verification signature.`);if(!(n?.predicates||[]).every(e=>e(i)))throw Error(`The payload does not satisfy all passed predicates.`);return i}else throw Error(`The jwt's alg '${r.alg}' does not match the key's algorithm.`)}function zt(e,t){return`${lt(dt.encode(JSON.stringify(e)))}.${lt(dt.encode(JSON.stringify(t)))}`}async function Bt(e,t,n){if(xt(t))if(Tt(e.alg,n)){let r=zt(e,t),i=await Ot(e.alg,n,r);return`${r}.${i}`}else throw Error(`The jwt's alg '${e.alg}' does not match the key's algorithm.`);else throw Error(`The jwt claims set is not a JSON object.`)}function Vt(e){return Math.round((e instanceof Date?e.getTime():Date.now()+e*1e3)/1e3)}const Ht=new TextEncoder,Ut=61,Wt={base32:new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZ234567`),base32hex:new TextEncoder().encode(`0123456789ABCDEFGHIJKLMNOPQRSTUV`),base32crockford:new TextEncoder().encode(`0123456789ABCDEFGHJKMNPQRSTVWXYZ`)},Gt={base32:new Uint8Array(128).fill(32),base32hex:new Uint8Array(128).fill(32),base32crockford:new Uint8Array(128).fill(32)};Wt.base32.forEach((e,t)=>Gt.base32[e]=t),Wt.base32hex.forEach((e,t)=>Gt.base32hex[e]=t),Wt.base32crockford.forEach((e,t)=>Gt.base32crockford[e]=t);function Kt(e,t){let n=e.length;if(e.byteOffset){let t=new Uint8Array(e.buffer);t.set(e),e=t.subarray(0,n)}return e=new Uint8Array(e.buffer.transfer(t)),e.set(e.subarray(0,n),t-n),[e,t-n]}const qt=61,Jt=new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZ234567`),Yt=new Uint8Array(128).fill(32);Jt.forEach((e,t)=>Yt[e]=t);const Xt=`123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz`.split(``),Zt=61,Qt={base64:new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`),base64url:new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_`)},$t={base64:new Uint8Array(128).fill(64),base64url:new Uint8Array(128).fill(64)};Qt.base64.forEach((e,t)=>$t.base64[e]=t),Qt.base64url.forEach((e,t)=>$t.base64url[e]=t);function en(e){return((e+2)/3|0)*4}function tn(e,t,n,r,i){for(t+=2;t<e.length;t+=3){let i=e[t-2]<<16|e[t-1]<<8|e[t];e[n++]=r[i>>18],e[n++]=r[i>>12&63],e[n++]=r[i>>6&63],e[n++]=r[i&63]}switch(t){case e.length+1:{let a=e[t-2]<<16;e[n++]=r[a>>18],e[n++]=r[a>>12&63],e[n++]=i,e[n++]=i;break}case e.length:{let a=e[t-2]<<16|e[t-1]<<8;e[n++]=r[a>>18],e[n++]=r[a>>12&63],e[n++]=r[a>>6&63],e[n++]=i;break}}return n}function nn(e,t,n,r,i){for(let t=e.length-2;t<e.length;++t)if(e[t]===i){for(let n=t+1;n<e.length;++n)if(e[n]!==i)throw TypeError(`Cannot decode input as base64: Invalid character (${String.fromCharCode(e[n])})`);e=e.subarray(0,t);break}if((e.length-n)%4==1)throw RangeError(`Cannot decode input as base64: Length (${e.length-n}), excluding padding, must not have a remainder of 1 when divided by 4`);for(t+=3;t<e.length;t+=4){let i=A(e[t-3],r)<<18|A(e[t-2],r)<<12|A(e[t-1],r)<<6|A(e[t],r);e[n++]=i>>16,e[n++]=i>>8&255,e[n++]=i&255}switch(t){case e.length+1:{let i=A(e[t-3],r)<<18|A(e[t-2],r)<<12;e[n++]=i>>16;break}case e.length:{let i=A(e[t-3],r)<<18|A(e[t-2],r)<<12|A(e[t-1],r)<<6;e[n++]=i>>16,e[n++]=i>>8&255;break}}return n}function A(e,t){let n=t[e]??64;if(n===64)throw TypeError(`Cannot decode input as base64: Invalid character (${String.fromCharCode(e)})`);return n}const rn=61,an=new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`),on=new Uint8Array(128).fill(64);an.forEach((e,t)=>on[e]=t);function sn(e){e=typeof e==`string`?new TextEncoder().encode(e):e instanceof ArrayBuffer?new Uint8Array(e).slice():e.slice();let[t,n]=Kt(e,en(e.length));return tn(t,n,0,an,rn),new TextDecoder().decode(t)}function cn(e){let t=new TextEncoder().encode(e);return new Uint8Array(t.buffer.transfer(nn(t,0,0,on,rn)))}const ln=61,un=new TextEncoder().encode(`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_`),dn=new Uint8Array(128).fill(64);un.forEach((e,t)=>dn[e]=t);const fn=new TextEncoder().encode(`0123456789abcdef`),pn=new Uint8Array(128).fill(16);fn.forEach((e,t)=>pn[e]=t),new TextEncoder().encode(`ABCDEF`).forEach((e,t)=>pn[e]=t+10);const mn=new TextEncoder().encode(`0123456789abcdef`),hn=new Uint8Array(128).fill(16);mn.forEach((e,t)=>hn[e]=t),new TextEncoder().encode(`ABCDEF`).forEach((e,t)=>hn[e]=t+10);const gn=new ArrayBuffer(8),_n=new Uint32Array(gn),vn=new BigUint64Array(gn);var yn=class{template;#key;algorithm;keyUsages;tokenHeader;constructor(e){this.template=e,this.algorithm={name:`HMAC`,hash:`SHA-256`},this.keyUsages=[`sign`,`verify`],this.tokenHeader={alg:`HS256`,typ:`JWT`}}async importKey(e){this.#key=e?await crypto.subtle.importKey(`raw`,cn(e),this.algorithm,!1,this.keyUsages):await crypto.subtle.generateKey(this.algorithm,!0,this.keyUsages)}async exportKey(){return sn(await crypto.subtle.exportKey(`raw`,this.#key))}async createToken(e,t){return await Bt(this.tokenHeader,{...this.template,exp:Vt(e||5*60),...t},this.#key)}async verifyToken(e){try{return await Rt(e,this.#key)}catch{return null}}static decode(e){return It(e)}};const bn=`0.2.0`,xn=()=>({format:bn,version:0,books:[]}),Sn=(e,t)=>e.wlid.localeCompare(t.wlid),Cn=/^(.+?)\/(.+)$/,wn=e=>{let t=Cn.exec(e);return t?[t[1],t[2]]:[``,``]},j=new Map,Tn=async e=>{let t=j.get(e),[n]=await Er(t=>t.wlid==e);if(n&&(!t||t.version!=n.version)){let t=await Nr(`${e}-${n.version}.txt`);if(!t.ok)return;let r=new Set;for(let e of(await t.text()).split(`
`))(e=e.trim())&&r.add(e);j.set(e,{wlid:e,version:n.version,disc:n.disc,wordSet:r})}},M=async e=>j.has(e)?(Tn(e),j.get(e)):(await Tn(e),j.get(e)),En=`https://f005.backblazeb2.com/file/vocabulary`,N=()=>Math.floor(Date.now()/1e3),Dn=180*24*60*60,On=(e,t)=>({word:e,last:t,next:t,level:0}),kn=e=>{let t=N();return{word:e.word,cards:e.cards,level:0,last:t,next:t,dictSync:t}},An=({word:e,last:t,next:n,level:r})=>({word:e,last:t,next:n,level:r}),jn=(e,t)=>(e.last=t.last,e.next=t.next,e.level=t.level,e),Mn=(e,t)=>(e.cards=t.cards,t.version!==void 0&&(e.version=t.version),e),Nn=2e9,Pn=(e,t)=>(t===void 0&&(t=++e.level),t>15&&(e.level=t=15),t<=0&&(e.level=t=1),e.last=N(),e.next=t>=15?Nn:e.last+Math.round(39*t**3*1.5**t),e),P=new Map;let Fn;const F=(e,t)=>{if(Fn)return t(Fn);let n=indexedDB.open(`memword`,1);n.onerror=e,n.onsuccess=()=>t(Fn=n.result),n.onupgradeneeded=()=>{let e=n.result;e.createObjectStore(`mata`,{keyPath:`key`}),e.createObjectStore(`wordlist`,{keyPath:`wlid`}),e.createObjectStore(`issue`,{keyPath:`id`,autoIncrement:!0});let t=e.createObjectStore(`item`,{keyPath:`word`});t.createIndex(`last`,`last`),t.createIndex(`next`,`next`)}},In=()=>new Promise((e,t)=>F(t,n=>{n.close();let r=indexedDB.deleteDatabase(`memword`);r.onerror=t,r.onsuccess=()=>e()})),I=e=>new Promise((t,n)=>F(n,r=>{let i=r.transaction(`mata`,`readonly`).objectStore(`mata`).get(e);i.onerror=n,i.onsuccess=()=>t(i.result?.value)})),L=(e,t)=>new Promise((n,r)=>F(r,i=>{let a=i.transaction(`mata`,`readwrite`).objectStore(`mata`).put({key:e,value:t});a.onerror=r,a.onsuccess=()=>n()})),Ln=()=>new Promise((e,t)=>F(t,n=>{let r=n.transaction(`issue`,`readonly`).objectStore(`issue`).getAll();r.onerror=t,r.onsuccess=()=>e(r.result)})),Rn=e=>new Promise((t,n)=>F(n,r=>{let i=r.transaction(`issue`,`readwrite`).objectStore(`issue`).add({issue:e});i.onerror=n,i.onsuccess=()=>t()})),zn=e=>new Promise((t,n)=>F(n,r=>{let i=r.transaction(`issue`,`readwrite`).objectStore(`issue`).delete(e);i.onerror=n,i.onsuccess=()=>t()})),Bn=e=>new Promise((t,n)=>F(n,r=>{let i=r.transaction(`wordlist`,`readwrite`).objectStore(`wordlist`).put(e);i.onerror=n,i.onsuccess=()=>t()})),Vn=e=>new Promise((t,n)=>F(n,r=>{let i=[],a=r.transaction(`wordlist`,`readonly`);a.onerror=n,a.oncomplete=()=>t(i),a.objectStore(`wordlist`).openCursor().onsuccess=t=>{let n=t.target.result;if(!n)return;let r=n.value;e(r)&&i.push(r),n.continue()}})),Hn=e=>new Promise((t,n)=>F(n,r=>{let i=new Map;for(let t of e)i.set(t.wlid,t);let a=new Set,o=r.transaction(`wordlist`,`readwrite`);o.onerror=n,o.oncomplete=()=>t(a);let s=o.objectStore(`wordlist`);s.openCursor().onsuccess=e=>{let t=e.target.result;if(!t){for(let[e,t]of i)s.add(t);return}let n=t.value;if(i.has(n.wlid)){let e=i.get(n.wlid);e.version!==n.version&&s.put(e),i.delete(n.wlid)}else a.add(n.wlid),t.delete();t.continue()}})),Un=e=>new Promise((t,n)=>F(n,r=>{let i=r.transaction(`wordlist`,`readwrite`).objectStore(`wordlist`).delete(e);i.onerror=n,i.onsuccess=()=>t()})),Wn=e=>new Promise((t,n)=>F(n,r=>{let i=r.transaction(`item`,`readonly`).objectStore(`item`).get(e);i.onerror=n,i.onsuccess=()=>t(i.result)})),Gn=e=>new Promise((t,n)=>F(n,r=>{let i=r.transaction(`item`,`readwrite`).objectStore(`item`).delete(e);i.onerror=n,i.onsuccess=()=>t()})),Kn=e=>new Promise((t,n)=>F(n,r=>{let i=r.transaction(`item`,`readonly`).objectStore(`item`).index(`last`).getAll(IDBKeyRange.lowerBound(e));i.onerror=n,i.onsuccess=()=>t(i.result)})),qn=e=>new Promise((t,n)=>F(n,r=>{let i=N(),a=r.transaction(`item`,`readwrite`);a.onerror=n,a.oncomplete=()=>t();let o=a.objectStore(`item`);for(let t of e)o.get(t).onsuccess=e=>{let n=e.target.result;n||o.add(On(t,i))}})),Jn=e=>new Promise((t,n)=>F(n,r=>{let i=new Map;for(let t of e)i.set(t.word,t);let a=r.transaction(`item`,`readwrite`);a.onerror=n,a.oncomplete=()=>t();let o=a.objectStore(`item`);o.openCursor().onsuccess=e=>{let t=e.target.result;if(!t){for(let[e,t]of i)o.add(t);return}let n=t.value;if(i.has(n.word)){let e=i.get(n.word);e.last>n.last&&t.update(jn(n,e)),i.delete(n.word)}else t.delete();t.continue()}})),Yn=e=>new Promise((t,n)=>F(n,r=>{let i,a=r.transaction(`item`,`readwrite`);a.onerror=n,a.oncomplete=()=>t(i);let o=a.objectStore(`item`);o.get(e.word).onsuccess=t=>{i=t.target.result,i&&(i.dictSync=N())&&o.put(Mn(i,e))}})),Xn=e=>new Promise((t,n)=>F(n,r=>{let i,a=r.transaction(`item`,`readonly`);a.onerror=n,a.oncomplete=()=>t(i),a.objectStore(`item`).index(`next`).openCursor(IDBKeyRange.upperBound(N()),`prev`).onsuccess=t=>{let n=t.target.result;if(!n)return;let r=n.value;if(!e||e.has(r.word))return i=r;n.continue()}})),Zn=(e,t)=>new Promise((n,r)=>F(r,i=>{let a=[],o=i.transaction(`item`,`readonly`);o.onerror=r,o.oncomplete=()=>n(a),o.objectStore(`item`).index(`next`).openCursor(IDBKeyRange.upperBound(N()+e),`prev`).onsuccess=e=>{let n=e.target.result;n&&(a.push(n.value),!(a.length>=t)&&n.continue())}})),Qn=e=>new Promise((t,n)=>F(n,r=>{let i=N(),a=Je(i,void 0,`全部词汇`),o=e.map(e=>Je(i,e?.wlid,e?.disc)),s=e.map(e=>new Set(e?.wordSet)),c=r.transaction(`item`,`readonly`);c.onerror=n,c.oncomplete=()=>t([a,...o]),c.objectStore(`item`).openCursor().onsuccess=e=>{let t=e.target.result;if(!t)return o.forEach((e,t)=>e.total[0]+=s[t].size);let n=t.value;Xe(a,n),o.forEach((e,t)=>s[t].has(n.word)&&(Xe(e,n),s[t].delete(n.word))),t.continue()}})),$n=(e,t)=>new Promise((n,r)=>F(r,i=>{let a=i.transaction(`item`,`readwrite`);a.onerror=r,a.oncomplete=()=>n();let o=a.objectStore(`item`);P.has(e)?(o.put(Pn(P.get(e),t)),P.delete(e)):o.get(e).onsuccess=e=>{let n=e.target.result;n&&o.put(Pn(n,t))}})),er=7*24*60*60;let R;const z=()=>({Authorization:`Bearer ${R}`}),tr=async()=>R??=await I(`_auth`),nr=t=>$e(`${e}/pub/dict?q=${encodeURIComponent(t)}`,void 0,{cache:`reload`}),rr=async t=>{let n=await Wn(t),r=await nr(t);if(!r)return n;if(!n)return kn(r);if(n.version!==void 0&&r.version!==void 0&&n.version>=r.version)return await Yn(n);if(r.cards){for(let t of r.cards)if(t.sound){let n=await fetch(`${e}/pub/sound?q=${encodeURIComponent(t.sound)}`,{cache:`force-cache`});n.ok&&(t.sound=await et(await n.blob()))}}return await Yn(r)},ir=async()=>{let t=await Ln();for(let n of t){let t=await fetch(`${e}/api/issue`,E(n,`POST`,z()));if(!t.ok)break;await zn(n.id)}};let B=xn();const ar=async e=>e.dictSync?(e.dictSync+er<N()&&rr(e.word),e):await rr(e.word)??e,or=async()=>{if(R||await tr(),R)return yn.decode(R)[1]?.aud},sr=async e=>{try{return await nr(e)}catch{}},cr=async t=>{try{let n=await fetch(`${e}/admin/dict`,E(t,`PUT`,z()));return n.ok}catch{return!1}},lr=async t=>{try{let n=await D(`${e}/admin/dict`,{q:t},{method:`DELETE`,headers:z()});return n.ok}catch{return!1}},ur=async()=>{let e=await I(`_setting`);e&&(B=e)},dr=async t=>{t&&t.version>B.version&&(B=t);let n=await I(`_setting`);n&&n.version>B.version?B=n:await L(`_setting`,B);try{let t=await fetch(`${e}/api/setting`,E(B,`POST`,z()));if(!t.ok)return;let n=await t.json();n.version>B.version&&await L(`_setting`,B=n)}catch{}},fr=async e=>{if(P.has(e))return P.get(e);let t=await Wn(e);if(!t)try{let t=await nr(e);if(!t)return;let n=kn(t);return P.set(e,n),n}catch{return}return await ar(t)},pr=e=>rr(e),mr=async e=>{let t=await Xn(e?(await M(e))?.wordSet:void 0);if(t)return await ar(t)},hr=async t=>{try{let n=await fetch(`${e}/api/task`,E([t],`DELETE`,z()));return n.ok?(await Gn(t),!0):console.error(`Network Error: get sync task data error.`)}catch{return!1}},gr=(e,t)=>$n(e,t),_r=async e=>{let t=await M(e);return t?(await qn(t.wordSet),!0):!1},vr=async()=>{try{let t=N(),n=await I(`_sync-time`)??1,r=(await Kn(n)).map(An),i=await fetch(`${e}/api/task`,E(r,`POST`,z()));if(!i.ok)return console.error(`Network Error: get sync task data error.`);let a=await i.json();return await Jn(a),await L(`_sync-time`,t),!0}catch{return!1}},yr=async e=>{await Rn(e),ir()},br=()=>$e(`${e}/admin/issue`,void 0,{method:`GET`,headers:z()}),xr=t=>$e(`${e}/admin/issue`,{id:t},{method:`DELETE`,headers:z()}),Sr=async()=>{let e=[];for(let t of B.books)e.push(await M(t));return{format:Ke,stats:await Qn(e)}},Cr=async()=>{let e=await M(`system/vocabulary`);if(e)return Array.from(e.wordSet).sort()},wr=async t=>{try{let n=await D(`${e}/admin/vocabulary`,void 0,{body:t,method:`POST`,headers:z()});return n.ok}catch{return!1}},Tr=async()=>{let t=await $e(`${e}/pub/wordlist`);return t?((async()=>{let e=N();await L(`_wl-time`,e);let n=await Hn(t),r=await I(`_setting`),i=r.books.filter(e=>!n.has(e));i.length!==r.books.length&&(r.books=i,r.version=e,await L(`_setting`,r))})(),t):[]},Er=async e=>{try{let t=await I(`_wl-time`),n=N();if(n-t>3600*24)return(await Tr()).filter(e)}catch{}return Vn(e)},Dr=async(t,n,r,i)=>{let a=await D(`${e}/api/wordlist`,{name:t,disc:r,replace:i},{body:n,method:`POST`,headers:z()});switch(a.status){case T.NotAcceptable:return[a.status,await a.json()];case T.OK:return Bn(await a.json()),[a.status];default:return[a.status]}},Or=async t=>{try{let n=wn(t)[1],r=await D(`${e}/api/wordlist`,{name:n},{method:`DELETE`,headers:z()});return r.ok&&await Un(t),r.ok}catch{return!1}},kr=async t=>{try{let n=await D(`${e}/pub/otp`,{name:t});return n.status}catch{return-1}},Ar=async(t,n)=>{try{let r=await D(`${e}/pub/signup`,{phone:t,name:n});return r.status}catch{return-1}},jr=async(t,n)=>{try{let r=await D(`${e}/pub/signin`,{name:t,code:n});return r.ok&&await L(`_auth`,(await r.json()).auth),console.log(`signin ${r.status}`),r.status}catch{return-1}},Mr=In,Nr=e=>fetch(`${En}/${e}`),Pr=[],V=y(``),Fr=y(Ye()),Ir=y(``),H=y(!1),U=y(),Lr=y(),Rr=y(-1),W=y(``),G=y(),K=y(!1),zr=y(``);let Br=[];const q=async()=>Fr.value=await Sr(),Vr=()=>V.value===`hua`,Hr=()=>Ir.value=``,J=e=>zr.value=e?(Pr.push(zr.value),e):Pr.pop()??(V.value?`#home`:`#about`),Y=(e,t=!0)=>(Ir.value=e,t&&setTimeout(Hr,3e3)),Ur=async e=>{K.value=!0;let t=await mr(Lr.value=e);K.value=!1,t?(U.value=t,H.value=!1,Rr.value=0,J(`#study`)):(Y(`No More Task`),q())},Wr=async()=>{if(V.value=await or()??``){J(`#home`),await ur(),await q();let e=await Cr();e&&(Br=e),(async()=>{Tr(),await dr(),await vr(),await q();for(let e of await Zn(3600,500))await ar(e),await Ge(300)})()}else J(`#about`)};var X=({class:e,children:t,disabled:n,onClick:r,...i})=>{let a=w(!0),s=async e=>{e.stopPropagation(),a.value=!1,r&&await r(e),a.value=!0};return o(`button`,{type:`button`,class:`disabled:opacity-50 ${e??``}`,...i,onClick:s,disabled:!a.value||n,children:t})},Z=({title:e,children:t,leftElem:n,rightElem:i,class:a,onBackClick:s,onMenuClick:c,...l})=>o(r,{children:[o(`div`,{class:`title shrink-0 px-2 flex justify-between items-center font-bold`,children:[o(`div`,{class:`w-7 [app-region:no-drag]`,children:n??(s&&o(X,{onClick:s,class:`w-full h-7 i-material-symbols-chevron-left`}))}),o(`div`,{class:`grow font-bold text-center [app-region:drag]`,children:Ir.value||e}),o(`div`,{class:`w-7 [app-region:no-drag]`,children:i??(c&&o(X,{onClick:c,class:`w-full h-7 i-heroicons-outline-dots-horizontal`}))})]}),o(`div`,{class:`body grow h-0 ${a??``}`,...l,children:t})]}),Q=({class:e,children:t,onClick:n,...r})=>{let i=w(!1),a=w({}),s=e=>{let t=e.currentTarget,r=Math.max(t.clientWidth,t.clientHeight),o=r/2;a.value={width:`${r}px`,height:`${r}px`,left:`${e.offsetX-o}px`,top:`${e.offsetY-o}px`},i.value=!0,setTimeout(()=>i.value=!1,580),n&&n(e)};return o(X,{...r,class:`overflow-hidden relative ${e??``}`,onClick:s,children:[t,i.value&&o(`span`,{class:`absolute transform-[scale(0)] rounded-[50%] bg-[var(--bg-ripple,gray)]:80 animate-[ripple_600ms_linear_0s]`,style:a.value})]})};const Gr=(e,t)=>e+t,Kr=(e,t)=>e>t?e:t;var qr=({stat:e})=>{let t=Qe(e.total),n=Qe(e.task),i=t.reduce(Kr)*1.2,a=e.total.reduce(Gr),s=e.task.reduce(Gr),c=e.wlid?wn(e.wlid)[1]:``,l=`${e.disc??c} - ${s}|${a}`,u=e=>{let a=t[e],s=n[e];return o(r,{children:[o(`div`,{class:`text-left`,children:Ze[e]}),o(`div`,{class:`relative bg-[var(--bg-title)] h-6 py-1 w-full hover:cursor-pointer`,children:[o(`div`,{class:`my-auto h-4 bg-slate-400`,style:{width:`${i?a*100/i:100}%`},children:o(`div`,{class:`ml-auto h-full bg-orange-500`,style:{width:`${a?s*100/a:0}%`}})}),o(`div`,{class:`absolute top-0 right-1`,children:[s,`|`,a]})]})]})};return o(`div`,{class:`grow min-w-80 grid gap-x-1 grid-cols-[max-content_1fr] items-center`,children:[o(`div`,{class:`col-span-2 text-center font-bold`,children:o(`button`,{type:`button`,class:`hover:cursor-pointer hover:underline`,onClick:()=>Ur(e.wlid),children:l})}),[0,1,2,3,4,5].map(u)]})},Jr=e=>o(`svg`,{...e,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 128 128`,children:[o(`path`,{d:`M18.938 93.37c.121-26.895.24-53.753.355-80.572.01-1.78 1.007-3.302 2.379-3.635 7.656-2.032 19.724-1.521 27.918 2.485 5.77 2.655 10.828 7.348 14.583 13.53 3.875-5.886 8.908-10.355 14.584-12.949 7.738-3.763 19.477-4.668 27.89-3.066 1.436.248 2.51 1.801 2.525 3.647v80.898c-.005 2.063-1.325 3.729-2.944 3.716a2.521 2.521 0 01-.675-.105c-7.184-1.187-14.486-.318-21.373 2.544-5.088 2.416-9.918 5.639-14.374 9.592 6.267-2.478 12.798-3.692 19.36-3.6 8.418.17 16.797 1.526 24.982 4.041v-84.66h2.926c1.616 0 2.926 1.669 2.926 3.728v85.81c0 2.059-1.31 3.728-2.926 3.728a2.357 2.357 0 01-.911-.198c-8.818-3.089-17.9-4.778-27.043-5.028-8.08-.13-16.087 1.953-23.48 6.109-1.011.82-2.305.82-3.317 0-7.392-4.157-15.4-6.24-23.48-6.109-9.121.265-18.182 1.961-26.978 5.052a2.343 2.343 0 01-.912.197c-1.634.02-2.963-1.67-2.953-3.75V28.963c0-2.059 1.31-3.728 2.926-3.728h2.926v84.66c8.185-2.515 16.564-3.87 24.983-4.04 7.033-.107 14.03 1.295 20.699 4.145-4.212-4.341-9.013-7.663-14.164-9.802-6.38-2.67-16.115-3.565-23.233-2.787-1.625.202-3.065-1.33-3.2-3.402a7.394 7.394 0 010-.64zm84.364-77.239c-6.763-.813-16.46.14-22.54 3.078-5.652 2.524-10.497 7.342-13.79 13.715v69.981c4.736-4.136 9.854-7.514 15.239-10.057 6.806-2.777 13.96-3.908 21.091-3.333zM61.12 102.185V32.82c-3.063-6.886-8.012-11.485-13.608-14.214-6.38-3.101-16.179-3.798-22.386-2.671l-.328 73.814c6.772-.314 16.124.79 22.35 3.379 5.001 2.066 9.716 5.123 13.972 9.058z`}),o(`path`,{d:`M48.602 50.572c-1.248 3.52-3.008 6.432-5.216 8.864-2.464-2.528-4.384-5.504-5.76-8.864zm9.184 0V46.86h-13.92l2.752-.864c-.384-1.312-1.344-3.36-2.176-4.832l-4.064 1.184c.736 1.408 1.44 3.2 1.792 4.512H28.666v3.712h5.024c1.728 4.512 3.936 8.352 6.816 11.52-3.328 2.592-7.456 4.416-12.448 5.664.768.864 1.888 2.656 2.304 3.552 5.152-1.472 9.44-3.584 12.96-6.464 3.36 2.816 7.488 4.928 12.512 6.272.576-1.056 1.696-2.72 2.56-3.552-4.768-1.12-8.8-2.976-12.096-5.536 2.784-3.104 4.96-6.848 6.592-11.456zM81.702 58.432l.743-2.737c.743-2.601 1.486-5.439 2.128-8.175h.135c.744 2.702 1.42 5.574 2.196 8.175l.743 2.737zm8.783 10.304h5.237l-8.04-25h-5.88l-8.006 25h5.068l1.756-6.42h8.109z`})]}),Yr=e=>o(`svg`,{...e,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 128 128`,children:[o(`path`,{d:`M63.99 45.64c11.482 0 20.83-9.347 20.83-20.83C84.82 13.328 75.473 4 63.99 4c-11.482 0-20.83 9.347-20.83 20.83 0 11.483 9.347 20.81 20.83 20.81zm0-34.98c7.826 0 14.17 6.364 14.17 14.17C78.16 32.638 71.796 39 63.99 39c-7.807 0-14.17-6.362-14.17-14.168 0-7.807 6.345-14.171 14.17-14.171z`}),o(`path`,{d:`M113.97 72.637h-2.548l1.205-16.7c.099-1.244-.514-2.43-1.6-3.103-13.875-8.418-32.077-7.371-47.056 2.49-14.96-9.842-33.183-10.889-47.057-2.49-1.068.633-1.68 1.838-1.6 3.104l1.204 16.7h-2.51c-3.675 0-6.66 3.003-6.66 6.658v10.396c0 3.675 3.004 6.66 6.66 6.66h4.23c.593 8.182 1.187 16.324 1.78 24.507.158 2.49 3.359 4.367 5.671 2.133 10.375-10.316 25.475-13.339 36.74-7.331 1.225.494 2.253.435 3.143 0 11.264-6.028 26.383-3.004 36.739 7.331 2.292 2.373 5.692.1 5.672-2.133.573-8.183 1.186-16.325 1.779-24.507h4.23c3.675 0 6.66-3.004 6.66-6.66V79.296c-.021-3.656-2.985-6.66-6.681-6.66zM23.93 85.503a4.226 4.226 0 01-4.21 4.21H14.01V79.318h5.73a4.226 4.226 0 014.21 4.209v1.976zm36.72 22.173c-11.107-3.714-24.071-1.363-34.467 6.167-.454-6.205-.89-12.43-1.344-18.637v-.118c3.419-1.818 5.77-5.435 5.77-9.585v-1.977c0-4.743-3.063-8.795-7.331-10.256l-1.127-15.693c11.522-6.027 26.265-4.684 38.499 3.539zm41.147 6.167c-10.396-7.529-23.36-9.88-34.467-6.166V87.835h6.56a3.336 3.336 0 003.341-3.34 3.323 3.323 0 00-3.34-3.34H67.33v-6.027h14.624a3.336 3.336 0 003.34-3.34 3.336 3.336 0 00-3.34-3.34H67.349v-7.37c12.254-8.222 26.997-9.566 38.5-3.519l-1.128 15.693c-4.249 1.461-7.332 5.513-7.332 10.256v1.977c0 4.15 2.332 7.746 5.77 9.585 0 .02-.929 12.727-1.362 18.774zm6.442-24.15a4.226 4.226 0 01-4.21-4.21v-1.976a4.226 4.226 0 014.21-4.21h5.732v10.396z`})]}),Xr=e=>o(`svg`,{...e,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 64 64`,children:[o(`path`,{d:`m 32,3.5 c -9.094931,0 -16.5,7.405069 -16.5,16.5 0,9.094931 7.405069,16.5 16.5,16.5 9.094931,0 16.5,-7.405069 16.5,-16.5 C 48.5,10.905069 41.094931,3.5 32,3.5 Z m 0,3 c 7.473611,0 13.5,6.026389 13.5,13.5 0,7.473611 -6.026389,13.5 -13.5,13.5 C 24.526389,33.5 18.5,27.473611 18.5,20 18.5,12.526389 24.526389,6.5 32,6.5 Z`}),o(`path`,{d:`M 32,26.5 C 15.173084,26.5 1.5000002,40.173072 1.5,57 v 1.5 h 61 V 57 C 62.5,40.173072 48.826916,26.5 32,26.5 Z m 0,3 c 14.691629,0 26.556927,11.508874 27.349609,26 H 4.6503906 C 5.4430732,41.008874 17.308371,29.5 32,29.5 Z`})]}),Zr=()=>o(Z,{class:`flex flex-col`,title:`学习进度`,children:[o(`div`,{class:`body grow overflow-y-auto`,children:o(`div`,{class:`p-2 flex flex-wrap justify-between gap-4`,children:Fr.value.stats.map(e=>o(qr,{stat:e},`${e.time}${e.wlid}`))})}),o(`div`,{class:`tail shrink-0 px-4 pt-2 pb-5 flex gap-3 justify-between [&>button]:grow font-bold`,children:[o(Q,{onClick:()=>J(`#search`),children:[o(Jr,{class:`w-9 h-9 inline-block`}),`词典`]}),o(Q,{onClick:()=>Ur(),children:[o(Yr,{class:`w-9 h-9 inline-block`}),`学习`]}),o(Q,{onClick:()=>J(`#menu`),children:[o(Xr,{class:`w-9 h-9 inline-block`}),`我`]})]})]}),Qr=()=>o(Z,{class:`flex flex-col pb-4`,title:`帮助`,onBackClick:()=>J(),children:o(`ol`,{class:`list-decimal py-2 pr-2 pl-8 [&>li]:mx-2 overflow-y-auto`,children:[o(`li`,{children:[`如何使用本软件？`,o(`br`,{}),`答：点击「学习」，开始学习即可；在学习界面， (1)当练习听力时，会先播放一小段声音，没有听清可以点击`,o(`div`,{class:`w-6 h-6 inline-block`,children:`‣`}),`或按下「B或C」快捷键或触摸屏幕的上半部分进行重听， (2)当练习阅读时，会先显示一个单词； 然后在心里默想一个概念（意思），点击「答」或按下「空格键」或触摸屏幕下半区域，显示单词的音标和解释， 并同时显示一个与该词相关的背景图片，检查是否和自己默想的答案一致，如果一致，点击「知」或按下「N或X」快捷键或向上滑动屏幕， 否则点击「不」或按下「M或Z」快捷键或向下滑动屏幕。记住，要快速完成，不要在一个词上长时间停留，那样只会降低效率， 我们的方法是快速/多次，从记忆效率来讲，次数的作用远远大于时长。这个方法称为大脑按摩，直接在拼写/声音和概念之间建立反射弧， 所以不要犹豫，快速完成一个小冲刺。`]}),o(`li`,{children:[`我应该学习哪些词汇？`,o(`br`,{}),`答：我们的目标是在未来能够自由使用英语，应该先学重要的词汇，因为20%的英语词汇表达了80%的意思， 抓住少数基本词，将能够快速提高英语水平。本软件提供多本词书供您选择，以适应您当下的需求。但不要太多关注词书， 一个常用词通常会出现在多本词书中，不必介意它到底从哪里来。也可以不选择词书，直接基于词典 （本词典收录25000多条常用词，不在词典中的词，对于学生而言，可以不必记忆了），在词典中查到自己在生活中遇到， 但不会的词，直接开始学它，背它，终有一日，你再也遇不到生词的时候，你就已经功法大成了。`]}),o(`li`,{children:[`我该如何复习？`,o(`br`,{}),`答：完全不必操心这个事情，让系统决定，系统自动根据「艾宾浩斯」遗忘曲线来决定此时的最佳复习内容， 你要做的事是每天利用碎片时间，拿出手机，开始「学习」。`]}),o(`li`,{children:[`界面上的按钮是什么意思？`,o(`br`,{}),o(`span`,{class:`text-[150%] i-material-symbols-check-circle text-green`}),`我认识这个词；`,o(`br`,{}),o(`span`,{class:`text-[150%] i-gridicons-cross-circle text-fuchsia`}),`我不认识这个词；`,o(`br`,{}),o(`span`,{class:`text-[150%] i-material-symbols-volume-up text-blue`}),`: 再播一遍声音；`,o(`br`,{}),o(`span`,{class:`text-[150%] i-material-symbols-light-family-star text-yellow`}),`: 这个词我已经掌握，直接标记为「已完成」；`,o(`br`,{}),o(`span`,{class:`text-[150%] i-material-symbols-error text-red`}),`: 这个词的翻译/声音/音标，有问题/错误，请人工处理。`,o(`br`,{}),o(`span`,{class:`text-[150%] i-material-symbols-refresh text-purple`}),`: 忽略本地词典缓冲，从服务器重新下载这个词的翻译/声音/音标。`]}),o(`li`,{children:[`关于「学习词书」`,o(`br`,{}),`答：学习词书将一本词书的全部词添加进我的学习任务。但我们通常并不会直接开始学这些新词，而是优先复习旧词， 掌握巩固一个旧词比学习一批新词更重要，这些新加的任务将会成为优先级最低的任务。`]}),o(`li`,{children:[`关于登录和多设备`,o(`br`,{}),`答：⓵软件设计为免密模式（不需要密码），在一个设备上只要用电子邮件验证身份之后，就再也不需要密码了，打开软件立即可以开始学习。`,o(`br`,{}),`⓶在第二台设备上登录时，系统将自动同步学习记录和设置，你完全可以同时在电脑和手机上学习。`]}),o(`li`,{children:[`以后有AI翻译了，我还用得着学英语吗？`,o(`br`,{}),`答：AI或者任意翻译工具甚至包括人工翻译，都只能解决浅表问题，因为一门语言是无法准确表达另一门语言的含义的， 一门语言的背后代表着文化和思维模式，这些深层次的东西是任何翻译都无法解决的。如果你有计划去英语文华圈生活/学习/工作， 那你必需亲自用人脑学好它，仅仅翻译工具是不够的。`]})]})}),$=({binding:e,...t})=>o(`input`,{...t,value:e.value?.toString(),onInput:t=>e.value=t.currentTarget.value}),$r=()=>{let e=w(!1),n=w(``);return o(Z,{title:`快乐背单词`,class:`about flex flex-col pb-4 font-extrabold`,onBackClick:V.value?()=>J(`#home`):void 0,children:[e.value&&o(r,{children:[o($,{binding:n}),o(X,{class:`button btn-normal`,onClick:()=>L(`_auth`,n.value),children:`OK`})]}),o(`div`,{children:[o(`h1`,{children:`快乐背单词`}),o(`p`,{children:[`版本：`,t]})]}),o(`div`,{children:[o(`h1`,{children:`语言基础`}),o(`p`,{children:[`词汇是`,o(`b`,{children:`语言的基础`}),`，学习语言应该掌握一定数量的基础词汇。`]})]}),o(`div`,{children:[o(`h1`,{children:`高频词汇`}),o(`p`,{children:[`每个词汇的重要程度是不一样的，越是使用`,o(`b`,{children:`频率高的词汇`}),`，其重要程度越高，本工具提供多种词频工具统计的结果词书。`]})]}),o(`div`,{children:[o(`h1`,{children:`遗忘曲线`}),o(`p`,{children:[`记忆最大的敌人是遗忘，本工具依据「艾宾浩斯」`,o(`b`,{children:`遗忘曲线`}),`设计大脑刺激频率，以最大化记忆效率。`]})]}),o(`div`,{children:[o(`h1`,{children:`碎片时间`}),o(`p`,{children:[`现代人工作学习都非常忙碌，充分利用好`,o(`b`,{children:`碎片时间`}),`，是成功的关键。`]})]}),o(`div`,{children:[o(`h1`,{children:`开始学习`}),o(`p`,{children:[`使用你的手机，单击`,o(Q,{class:`button bg-orange-300 text-slate-800`,title:`login`,onClick:()=>J(`#signup`),children:`登录`}),`开始免费学习吧。`]})]}),o(`div`,{children:[o(`h1`,{children:`微信`}),o(`p`,{children:[`*提示一：请使用`,o(`b`,{children:`除微信以外`}),`的其他浏览器，如果当前是在微信中，点击屏幕右上(...)，然后选择「在默认浏览器中打开」。`]})]}),o(`div`,{children:[o(`h1`,{children:`桌面`}),o(`p`,{children:[`*提示二(iOS): 请使用「共享」-「添加到主屏幕」安装 `,o(`b`,{children:`Web应用`}),` 到桌面，以便下次直接`,o(X,{onClick:()=>e.value=!0,children:`点击`}),`进入。`]}),o(`p`,{children:[`*提示三(Android): 请使用「...」-「安装应用」安装 `,o(`b`,{children:`Web应用`}),` 到桌面，以便下次直接点击进入。`]})]})]})},ei=()=>{let e=e=>{e.stopPropagation(),J(e.currentTarget.title)},t=()=>{V.value=``,J(`#about`),Mr()};return o(Z,{class:`menu p-2 flex flex-col gap-1`,title:`菜单`,onBackClick:()=>J(),children:[Vr()&&o(r,{children:[o(`menu`,{title:`#lookup`,onClick:e,children:`辞典编辑`}),o(`div`,{}),o(`menu`,{title:`#ignore`,onClick:e,children:`拼写忽略`}),o(`div`,{}),o(`menu`,{title:`#issues`,onClick:e,children:`处理问题`}),o(`div`,{}),o(`div`,{})]}),o(`menu`,{title:`#issue`,onClick:e,children:`报告问题`}),o(`div`,{}),o(`menu`,{title:`#wordlists`,onClick:e,children:`我的词书`}),o(`div`,{}),o(`menu`,{title:`#setting`,onClick:e,children:`设置`}),o(`div`,{}),o(`menu`,{title:`#about`,onClick:e,children:`关于`}),o(`div`,{}),o(`menu`,{title:`#help`,onClick:e,children:`帮助`}),o(`div`,{}),o(`menu`,{onClick:t,children:`登出`})]})},ti=({binding:e,...t})=>o(`textarea`,{...t,value:e.value,onInput:t=>e.value=t.currentTarget.value}),ni=()=>{let e=w(``),t=async()=>{await yr(e.value),Y(`提交成功!`),J()};return o(Z,{class:`p-2 flex flex-col`,title:`提交问题`,onBackClick:()=>J(),children:[o(`label`,{children:`请在这里描述你的问题:`}),o(ti,{name:`issue`,class:`grow`,binding:e,children:e.value}),o(`div`,{class:`flex gap-2 mt-2 pb-3 justify-end`,children:[o(Q,{class:`w-24 button btn-normal`,onClick:()=>J(),children:`取消`}),o(Q,{class:`w-24 button btn-prime`,onClick:t,children:`提交`})]})]})},ri=({options:e,cindex:t,class:n,activeClass:r})=>e.map((e,i)=>o(`div`,{onClick:e=>(e.stopPropagation(),t.value=i),class:`${n??``} ${t.value==i?r:``}`,children:e},i)),ii=()=>{let e=w(0),t=w([]),n=async()=>{let n=t.value[e.value],r=await xr(n._id);r.acknowledged&&r.deletedCount>0?(t.value=[...t.value.slice(0,e.value),...t.value.slice(e.value+1)],Y(`处理成功!`)):Y(`处理失败`)};return m(()=>{br().then(e=>e&&(t.value=e))},[]),o(Z,{class:`p-2 flex flex-col`,title:`处理问题`,onBackClick:()=>J(),children:[o(`div`,{class:`grow border p-2`,children:o(ri,{cindex:e,activeClass:`bg-[var(--bg-title)]`,options:t.value.map(e=>`${e.reporter}: ${e.issue}`)})}),o(`div`,{class:`flex gap-2 mt-2 pb-4 justify-end`,children:[o(Q,{class:`w-24 button btn-normal`,onClick:()=>J(),children:`取消`}),o(Q,{class:`w-24 button btn-prime`,onClick:n,children:`处理`})]})]})},ai=()=>{let e=w(`^common`),t=w(0),n=w([]),r=w(0),i=w([]),a=()=>{i.value=[...i.value,n.value[r.value]]},s=()=>{i.value=[...i.value.slice(0,t.value),...i.value.slice(t.value+1)]},c=async()=>{K.value=!0,await _r(i.value[t.value].wlid),await q(),K.value=!1},l=async()=>{await dr({format:bn,version:N(),books:i.value.map(e=>e.wlid)}),await q(),J()},u=async()=>{n.value=(await Tr()).filter(e=>e.wlid.startsWith(`common`)).sort(Sn),i.value=await Er(e=>B.books.includes(e.wlid))};return We(()=>{(async()=>{let t=new RegExp(e.value);n.value=(await Er(e=>t.test(e.wlid)||e.disc&&t.test(e.disc))).sort(Sn)})()}),m(()=>{u()},[]),o(Z,{class:`p-2 gap-2 flex flex-col`,title:`设置`,onBackClick:()=>J(),children:[o(`div`,{class:`flex gap-2`,children:[o(`label`,{for:`filter`,children:`设置过滤`}),o($,{class:`grow`,name:`filter`,binding:e})]}),o(`fieldset`,{class:`border rounded max-h-[50%] grow overflow-y-auto px-2`,children:[o(`legend`,{children:`可用的词书`}),o(ri,{class:`px-2`,cindex:r,options:n.value.map(e=>e.disc??e.wlid),activeClass:`bg-[var(--bg-title)]`})]}),o(`div`,{class:`flex justify-between gap-2`,children:[o(Q,{class:`button btn-normal grow`,onClick:a,children:`添加订阅`}),o(Q,{class:`button btn-normal grow`,onClick:s,children:`删除订阅`})]}),o(`fieldset`,{class:`border rounded max-h-[50%] grow overflow-y-auto px-2`,children:[o(`legend`,{children:`我订阅的词书`}),o(ri,{class:`px-2`,cindex:t,options:i.value.map(e=>e.disc??e.wlid),activeClass:`bg-[var(--bg-title)]`})]}),o(`div`,{class:`pb-3 flex justify-between gap-2`,children:[o(Q,{class:`button btn-normal grow`,onClick:c,children:`添加任务`}),o(Q,{class:`button btn-normal grow`,onClick:()=>J(),children:`取消`}),o(Q,{class:`button btn-prime grow`,onClick:l,children:`保存`})]})]})},oi=({binding:e,options:t,maxSuggest:n,class:r,onChange:i,...a})=>{let s=n??12,c=w([]),l=()=>setTimeout(()=>c.value=[],200),u=e=>{e.stopPropagation(),e.key==`Enter`&&l()&&i&&i()},ee=n=>{let r=e.value=n.currentTarget.value;if(!r)return c.value=[];let i=[],a=[];for(let e of t)if(e.startsWith(r)?i.push(e):e.includes(r)&&a.push(e),i.length>=s)break;c.value=i.concat(a.slice(0,s-i.length))},d=t=>{e.value=t.currentTarget.textContent??``,i&&i()};return o(`div`,{class:`inline-block relative ${r??``}`,children:[o(`input`,{class:`w-full px-2`,...a,value:e.value?.toString(),onInput:ee,onBlur:l,onKeyUp:u}),c.value.length?o(`div`,{class:`absolute border bg-[var(--bg-body)] z-100 top-[calc(100%_+_4px)] inset-x-0 px-2`,children:c.value.map((e,t)=>o(`div`,{onClick:d,children:e},t))}):``]})},si=({class:e,cindex:t,children:n})=>{let i=Array.isArray(n)?n:[n];return i.length?o(r,{children:[o(`header`,{class:`flex gap-2`,children:i?.map((n,r)=>o(`div`,{class:`min-w-16 px-2 py-1 cursor-pointer text-center rounded-t-md ${t.value==r?e??``:``}`,onClick:e=>(e.stopPropagation(),t.value=r),children:n.props.title??r},r))}),o(`section`,{class:`grow h-0 p-2 overflow-y-auto ${e??``}`,children:i[t.value]})]}):void 0},ci=({card:e,class:t})=>{let n=w(e.phonetic),r=w(e.trans),i=w(e.def),a=w(e.sound),s=ce(null),c=()=>{a.value?s.current?.play():Y(`no sound to play!`)};return o(`div`,{class:`flex flex-col h-full gap-2 ${t??``}`,children:[o(`input`,{name:`phonetic`,placeholder:`phonetic`,value:n,onInput:t=>e.phonetic=n.value=t.currentTarget.value}),o(`textarea`,{name:`trans`,placeholder:`trans`,class:`h-32 grow`,value:r,onInput:t=>e.trans=r.value=t.currentTarget.value}),o(`textarea`,{name:`def`,placeholder:`def`,class:`h-32 grow`,value:i,onInput:t=>e.def=i.value=t.currentTarget.value}),o(`div`,{class:`flex`,children:[o(`textarea`,{name:`sound`,placeholder:`sound`,class:`h-32 grow`,value:a,onInput:t=>e.sound=a.value=t.currentTarget.value}),o(Q,{class:`button ml-2`,onClick:c,disabled:!a.value,children:o(`span`,{class:`text-[150%] i-material-symbols-chevron-right`})})]}),o(`audio`,{ref:s,src:a})]})};function li(){let e=w(``),t=w(0),n=w([]),r=async()=>{let r=await sr(e.value);if(!r)return Y(`Not Found`);t.value=0,n.value=r?.cards??[]},i=()=>{n.value=[...n.value,{}]},a=()=>{n.value.length>1&&(n.value=n.value.toSpliced(t.value,1))},s=async()=>{let t={word:e.value,cards:n.value};Y(await cr(t)?`success update word "${e.value}"!`:`Error`)},c=async()=>{Y(await lr(e.value)?`success delete word "${e.value}"!`:`Error`)};return m(()=>{U.value&&(e.value=U.value.word),r()},[]),o(Z,{class:`flex flex-col gap-2 p-2 text-lg`,title:`辞典编辑ˈʒɑɜæəɪʌʊˌ`,onBackClick:()=>J(),children:[o(`div`,{class:`flex gap-2`,children:[o(oi,{name:`word`,placeholder:`word`,class:`grow`,binding:e,options:Br,onChange:r}),o(Q,{class:`button btn-normal`,disabled:!e.value,onClick:r,children:`Search`})]}),o(`div`,{class:`flex flex-col grow`,children:o(si,{class:`bg-[var(--bg-tab)]`,cindex:t,children:n.value.map(e=>o(ci,{card:e},e))})}),o(`div`,{class:`flex justify-between gap-2 pb-4`,children:[o(Q,{class:`grow button btn-normal`,disabled:!e.value,onClick:i,children:`增卡`}),o(Q,{class:`grow button btn-normal`,disabled:!e.value||n.value.length<=1,onClick:a,children:`删卡`}),o(Q,{class:`grow button btn-normal`,disabled:!e.value,onClick:c,children:`删除`}),o(Q,{class:`grow button btn-normal`,disabled:!e.value,onClick:s,children:`更新`})]})]})}var ui=()=>{let e=w(``),t=async()=>{let t=e.peek().trim();if(!t)return;let n=await fr(t);if(!n)return Y(`Not Found!`);U.value=n,H.value=!0,Rr.value=-1,J(`#study`)};return o(Z,{class:`flex flex-col text-lg`,title:`词典`,onBackClick:()=>J(),children:o(oi,{autoCapitalize:`none`,type:`search`,name:`word`,placeholder:`word`,class:`m-2 w-[calc(100%-16px)]`,binding:e,onChange:t,options:Br})})},di=({card:e})=>e&&o(r,{children:[e.trans?.split(`
`).map((e,t)=>o(`p`,{class:`text-2xl`,children:e},t)),e.def?.split(`
`).map((e,t)=>e.startsWith(` `)?o(`p`,{class:`text-lg`,children:[` •`,e]},t):o(`p`,{class:`text-xl font-bold`,children:e},t))]}),fi=()=>{let e=async()=>{J(),await q(),await vr(),q()};if(!U.value)return J(),o(`div`,{});let t=w(0),n=w(0),r=w(0),i=ce(null),a=e=>gr(U.value.word,e),s=async()=>{if(++Rr.value<=0)return e();let n=await mr(Lr.value);if(!n)return e();U.value=n,H.value=!1,t.value=0},c=async(e,t)=>{r.value+=e;let i=Math.abs(r.value-n.value);i<t&&(await Ge(30),await c(e,t))},l=async()=>{Y(`Get Server Data...`);let e=await pr(U.value.word);if(!e)return Y(`Not Found ${U.value.word}`);U.value=e},u=async()=>{Y(`Submiting...`,!1),await yr(U.value.word),Y(`Submit Success!`)},ee=async()=>{Y(await hr(U.value.word)?`删除成功`:`删除失败`)},d=e=>{if(e.stopPropagation(),!(e.ctrlKey||e.altKey))switch(e.key){case` `:p(e);break;case`N`:case`X`:case`n`:case`x`:H.value&&a().then(s);break;case`M`:case`Z`:case`m`:case`z`:H.value&&a(0).then(s);break}},te=e=>{e.stopPropagation(),e.preventDefault(),H.value&&(r.value=n.value=e.touches[0].clientY)},f=e=>{e.stopPropagation(),e.preventDefault(),H.value&&(r.value=e.touches[0].clientY)},ne=e=>{e.stopPropagation(),e.preventDefault(),H.value&&(r.value=n.value=0)},re=async e=>{if(e.stopPropagation(),e.preventDefault(),H.value){let t=e.currentTarget.scrollHeight+60,i=r.value-n.value,o=Math.max(globalThis.innerHeight,t);Math.abs(i)>=globalThis.innerHeight/6?(i>0?(await a(0),await c(60,o)):(await a(),await c(-60,o)),await s()):Math.abs(i)<5&&p()}else p();r.value=n.value=0},p=e=>{e?.stopPropagation();let n=U.value.cards.length??0;n!==0&&(H.value?n===1?i.current?.play():t.value<n-1?t.value++:t.value=0:(H.value=!0)&&i.current?.play())};return o(Z,{title:`学习`,onBackClick:e,children:o(`div`,{class:`relative h-full p-2 flex flex-col`,style:{top:`${r.value-n.value}px`},children:[o(`div`,{class:`flex gap-4 text-[150%] items-center`,children:[o(X,{disabled:!H.value,title:`X/N`,onClick:()=>a().then(s),class:`i-material-symbols-check-circle text-green`}),o(X,{disabled:!H.value,title:`Z/M`,onClick:()=>a(0).then(s),class:`i-gridicons-cross-circle text-fuchsia`}),o(X,{disabled:!H.value,onClick:()=>a(13).then(s),class:`i-material-symbols-light-family-star text-yellow`}),o(X,{disabled:!H.value,onClick:ee,class:`i-material-symbols-delete-outline text-orange`}),o(`div`,{class:`grow text-center text-lg`,children:Rr.value>0?Rr.value:``}),o(X,{onClick:()=>i.current?.play(),class:`i-material-symbols-volume-up text-blue`}),Vr()&&o(X,{onClick:()=>J(`#lookup`),class:`i-material-symbols-dictionary-outline text-cyan`}),o(X,{disabled:!H.value,onClick:u,class:`i-material-symbols-error text-red`}),o(X,{disabled:!H.value,onClick:l,class:`i-material-symbols-refresh text-purple`}),o(`div`,{class:`text-lg`,children:U.value.level})]}),o(`div`,{class:`grow h-0 pb-4 flex flex-col outline-none`,tabIndex:-1,onTouchStart:te,onTouchMove:f,onTouchEnd:re,onTouchCancel:ne,onClick:p,onKeyUp:d,children:[o(`div`,{class:`py-2 flex gap-2 flex-wrap justify-between`,children:[o(`div`,{class:`text-4xl font-bold`,children:U.value.word}),H.value&&o(`div`,{class:`text-2xl flex items-center`,children:U.value.cards?.[t.value].phonetic})]}),H.value&&((U.value.cards.length??0)>1?o(si,{class:`bg-[var(--bg-tab)]`,cindex:t,children:U.value.cards.map((e,t)=>o(di,{card:e},`${U.value.word}${t}`))}):o(`div`,{class:`grow h-0 overflow-y-auto`,children:o(di,{card:U.value.cards?.[0]})})),o(`audio`,{ref:i,autoPlay:!0,src:U.value.cards.at(t.value)?.sound??``})]})]})})};const pi=/^[_\w-]+$/,mi=/^\+\d+$/;var hi=()=>{let e=w(``),t=()=>{J(`#signin`)},n=async()=>{if(!pi.test(W.value))return Y(`Name can only include _, letter, number and -`);let t=e.value.replaceAll(/[\(\) -]/g,``);if(!mi.test(t))return Y(`Invalid phone number!`);switch(await Ar(t,W.value)){case T.BadRequest:return Y(`用户名已注册`);case T.Conflict:return Y(`电话号码已注册`);case T.OK:Y(`注册成功，请登录`),J(`#signin`)}};return o(Z,{class:`p-2 flex flex-col`,title:`注册`,onBackClick:()=>J(),children:o(`div`,{class:`w-64 m-auto flex flex-col pb-4`,children:[o(`label`,{children:`用户名`}),o($,{name:`name`,placeholder:`name`,autoCapitalize:`none`,binding:W,class:`mb-3`}),o(`label`,{children:`手机号码(含国际区号)`}),o($,{name:`phone`,placeholder:`+1(987)765-5432`,autoCapitalize:`none`,binding:e,class:`mb-3`}),o(`div`,{class:`text-right mb-3`,children:[`已经注册，请`,o(Q,{class:`button btn-normal mx-1`,onClick:t,children:`登录`})]}),o(Q,{class:`button btn-prime py-1`,onClick:n,children:`注册`})]})})};let gi;var _i=()=>{let e=w(``),t=w(0),n=w(!0),r=async()=>{switch(n.value=!1,t.value=60,gi=setInterval(()=>{--t.value<=0&&(clearInterval(gi),gi=void 0,n.value=!0)},1e3),await kr(W.value)){case T.BadRequest:return Y(`请输入用户名`);case T.NotFound:return Y(`未找到用户`);case T.FailedDependency:return Y(`此用户未注册手机号码`);case T.TooEarly:return Y(`请求OTP过于频繁`);case T.OK:return Y(`OTP已发送`);default:return Y(`未知服务器错误`)}},i=async()=>{switch(await jr(W.value,e.value)){case T.BadRequest:return Y(`请输入用户名和密码`);case T.NotFound:return Y(`未找到用户`);case T.Unauthorized:return Y(`错误的密码`);case T.OK:Y(`已登录`),gi&&clearInterval(gi),location.reload()}};return o(Z,{class:`p-2 flex flex-col`,title:`登录`,onBackClick:()=>J(),children:o(`div`,{class:`w-64 m-auto flex flex-col`,children:[o(`label`,{for:`name`,children:`用户名`}),o($,{name:`name`,class:`mb-3`,placeholder:`name`,autoCapitalize:`none`,binding:W}),o(`label`,{for:`code`,children:`临时密码`}),o($,{name:`code`,placeholder:`code`,autoCapitalize:`none`,binding:e}),o(X,{class:`btn-anchor block text-right mb-3`,onClick:r,disabled:!n.value,children:[`Send One-Time Passcode `,t.value>0?`(${t.value})`:``]}),o(Q,{class:`button btn-prime`,onClick:i,children:`登录`})]})})},vi=()=>{let e=w(``),t=async()=>{let t=await wr(e.value);Y(t?`上传成功`:`上传失败`)};return o(Z,{class:`flex flex-col p-2`,title:`拼写忽略`,onBackClick:()=>J(),children:[o(`textarea`,{class:`grow`,value:e,onChange:t=>e.value=t.currentTarget.value}),o(`div`,{class:`flex justify-end gap-2 my-2`,children:[o(Q,{class:`w-32 button btn-normal`,onClick:()=>J(),children:`取消`}),o(Q,{class:`w-32 button btn-prime`,onClick:t,children:`上传`})]})]})},yi=()=>{let e=w(0),t=w([]),n=()=>{G.value=void 0,J(`#wordlist`)},r=async()=>{Y(await Or(t.value[e.value].wlid)?`删除成功`:`删除失败`),t.value=[...t.value.slice(0,e.value),...t.value.slice(e.value+1)]},i=()=>{G.value=t.value[e.value],J(`#wordlist`)},a=async()=>{t.value=(await Tr()).filter(e=>e.wlid.startsWith(V.value)).sort(Sn)};return m(()=>{a()},[]),o(Z,{class:`p-2 flex flex-col gap-2`,title:`我的词书`,onBackClick:()=>J(),children:[o(`div`,{class:`h-0 grow border overflow-y-auto`,children:o(ri,{cindex:e,options:t.value.map(e=>e.disc??e.wlid),class:`px-2`,activeClass:`bg-[var(--bg-title)]`})}),o(`div`,{class:`pb-3 flex justify-end gap-2`,children:[o(Q,{class:`w-24 button btn-normal`,name:`new`,onClick:n,children:`新建`}),o(Q,{class:`w-24 button btn-normal`,name:`delete`,disabled:!t.value.length,onClick:r,children:`删除`}),o(Q,{class:`w-24 button btn-normal`,name:`update`,disabled:!t.value.length,onClick:i,children:`更新`})]})]})},bi=({label:e,binding:t,disabled:n,class:r,onChange:i,...a})=>{let s=e=>{e.stopPropagation(),n||(t.value=!t.value,i&&i(e))};return o(`div`,{class:`${n?`opacity-50`:``} ${r??``}`,"aria-disabled":n,onClick:s,...a,children:[o(`span`,{class:`text-[150%] ${t.value?`i-material-symbols-check-box-outline`:`i-material-symbols-check-box-outline-blank`}`}),e]})},xi=()=>{let e=w(``),t=w(``),n=w(``),i=w(!1),a=w(``),s=async()=>{let t=`${V.value}/${e}`,r=await M(t);r&&(n.value=Array.from(r.wordSet).sort().join(`
`))},c=async()=>{e.value=e.value.replaceAll(`/`,`-`);let[r,o]=await Dr(e.value,n.value,t.value,i.value?`1`:void 0);switch(r){case T.BadRequest:return Y(`Error: 无名称或无内容`);case T.NotAcceptable:return a.value=Object.entries(o).map(([e,t])=>`${e}: ${t.join(`,`)}`).join(`
`),Y(`未通过拼写检查`);case T.OK:Y(`词书上传成功`),J()}};return m(()=>{G.value&&(e.value=wn(G.value.wlid)[1],G.value.disc&&(t.value=G.value.disc))},[]),o(Z,{class:`flex flex-col p-2`,title:`上传我的词书`,onBackClick:()=>J(),children:[o(`label`,{for:`name`,children:`名称`}),o($,{name:`name`,binding:e}),o(`label`,{for:`disc`,class:`mt-2`,children:`描述`}),o($,{name:`disc`,binding:t}),o(`label`,{for:`words`,class:`mt-2`,children:`词表`}),o(ti,{name:`words`,class:`grow`,binding:n}),a.value.length?o(r,{children:[o(`label`,{for:`replace`,class:`text-red-500 mt-2`,children:`请考虑用下面的词替换`}),o(`textarea`,{name:`replace`,class:`grow`,value:a,onChange:e=>a.value=e.currentTarget.value})]}):void 0,o(`div`,{class:`flex gap-2 my-2`,children:[o(bi,{binding:i,label:`Replace`}),o(`div`,{class:`grow`}),o(Q,{class:`w-24 button btn-normal`,onClick:s,children:`下载`}),o(Q,{class:`w-24 button btn-prime`,onClick:c,children:`上传`})]})]})},Si=e=>o(`svg`,{xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 128 128`,...e,children:o(`g`,{children:[o(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#000000`}),o(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#555555`,transform:`rotate(45,64,64)`}),o(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#949494`,transform:`rotate(90,64,64)`}),o(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#cccccc`,transform:`rotate(135,64,64)`}),o(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#e1e1e1`,transform:`rotate(180,64,64)`}),o(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#e1e1e1`,transform:`rotate(225,64,64)`}),o(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#e1e1e1`,transform:`rotate(270,64,64)`}),o(`circle`,{cx:`16`,cy:`64`,r:`16`,fill:`#e1e1e1`,transform:`rotate(315,64,64)`}),o(`animateTransform`,{attributeName:`transform`,type:`rotate`,values:`45 64 64;90 64 64;135 64 64;180 64 64;225 64 64;270 64 64;315 64 64;0 64 64;`,calcMode:`discrete`,dur:`720ms`,repeatCount:`indefinite`})]})}),Ci=()=>{let e=new Map;return e.set(`#home`,o(Zr,{})),e.set(`#help`,o(Qr,{})),e.set(`#about`,o($r,{})),e.set(`#menu`,o(ei,{})),e.set(`#issue`,o(ni,{})),e.set(`#issues`,o(ii,{})),e.set(`#setting`,o(ai,{})),e.set(`#lookup`,o(li,{})),e.set(`#search`,o(ui,{})),e.set(`#study`,o(fi,{})),e.set(`#signup`,o(hi,{})),e.set(`#signin`,o(_i,{})),e.set(`#ignore`,o(vi,{})),e.set(`#wordlists`,o(yi,{})),e.set(`#wordlist`,o(xi,{})),m(()=>{Wr()},[]),o(r,{children:[e.get(zr.value),K.value&&o(`div`,{class:`absolute inset-0 bg-[var(--bg-half)] flex justify-center content-center flex-wrap`,children:o(Si,{class:`w-16 h-16`})})]})};n(o(Ci,{}),document.getElementById(`root`));